"use strict";exports.id=67,exports.ids=[67],exports.modules={90067:(e,t,i)=>{i.a(e,async(e,r)=>{try{i.d(t,{c:()=>parseProduct});var a=i(99648),l=i(20295),c=e([a,l]);function getMeta(e,t){return e(`meta[property='${t}']`).attr("content")||e(`meta[name='${t}']`).attr("content")||null}async function parseProduct(e){let t,i;let clean=e=>(e||"").toString().trim(),r="";try{let t=await a.default.get(e,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0 Safari/537.36"},maxRedirects:3});r=t.data}catch(t){return console.error(`Failed to fetch ${e}:`,t instanceof Error?t.message:t),{url:e,pretitle:"",title:"",price:"",description:"",image:"",images:void 0,cta:e,ctaLabel:"SHOP NOW"}}let c=l.load(r),s=function(e){let t=e('script[type="application/ld+json"]').toArray();for(let i of t){let t=e(i).contents().text();if(t)try{let e=JSON.parse(t.trim()),i=Array.isArray(e)?e:[e];for(let e of i)if("Product"===e["@type"])return e}catch(e){}}return null}(c)||{},n={url:e,pretitle:"",title:"",price:"",originalPrice:void 0,description:"",image:"",images:void 0,cta:e,ctaLabel:"SHOP NOW"};n.title=clean(s.name)||clean(getMeta(c,"og:title"))||clean(getMeta(c,"twitter:title"))||clean(c("title").first().text()),n.description=clean(s.description)||clean(getMeta(c,"og:description"))||clean(getMeta(c,"twitter:description"))||clean(getMeta(c,"description"));try{let e=c(".product__description").first();if(e&&e.length){let t=e.find("p").first();t&&t.length&&(n.descriptionP=clean(t.text()));let i=e.find("ul").first();i&&i.length&&(n.descriptionUl=c.html(i))}}catch(e){}let o=Array.isArray(s.image)?s.image[0]:"string"==typeof s.image?s.image:void 0;n.image=clean(o)||clean(getMeta(c,"og:image"))||clean(getMeta(c,"twitter:image"))||clean(c("img").first().attr("src"));let p=s.offers;if(p&&(Array.isArray(p)?t=p[0]?.price:"object"==typeof p&&(t=p.price)),n.price=clean(t)||clean(getMeta(c,"product:price:amount"))||clean(getMeta(c,"og:price:amount"))||clean(c('[itemprop="price"]').first().text()),p){let getCompare=e=>{if(e)return e.compareAtPrice||e.originalPrice||e.priceSpecification?.price};if(Array.isArray(p))for(let e of p){let t=getCompare(e);if(t){i=clean(t);break}}else if("object"==typeof p){let e=getCompare(p);e&&(i=clean(e))}}if(!i){let e=/([\d,.]+)\s*(?:[A-Z]{3})?/,parsePriceText=t=>{let i=e.exec(t);return i?i[1]:void 0};c("del, strike").each((e,t)=>{let r=c(t).text(),a=parsePriceText(r);if(a)return i=clean(a),!1}),i||c('[class*="compare"],[class*="original"],[class*="strike"]').each((e,t)=>{let r=c(t).text(),a=parsePriceText(r);if(a)return i=clean(a),!1})}if(i&&i!==n.price&&(n.originalPrice=i),n.title&&n.title.includes(" – ")){let e=n.title.split(/\s+–\s+/);e.length>1&&(n.pretitle=e[0],n.title=e.slice(1).join(" – "))}let f=new Set;if(n.image&&f.add(n.image),Array.isArray(s.image))for(let e of s.image)"string"==typeof e&&/^https?:\/\//i.test(e)&&f.add(e);c("img").each((e,t)=>{let i=clean(c(t).attr("src"));if(!i||!/^https?:\/\//i.test(i))return;let r=(c(t).attr("class")||"")+" "+(c(t).parent().attr("class")||""),a=(c(t).attr("id")||"")+" "+(c(t).parent().attr("id")||"");/product|gallery|thumb|image|slider|carousel/i.test(r+" "+a)&&f.add(i)});try{let t=e.endsWith(".js")?e:`${e}.js`,i=await a.default.get(t,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0 Safari/537.36"},maxRedirects:3}),r=i.data,l="string"==typeof r?JSON.parse(r):"object"==typeof r?r:null;if(l&&"object"==typeof l){let e=l.images;if(Array.isArray(e)){for(let t of e)if("string"==typeof t&&t){let e=t.startsWith("//")?`https:${t}`:t;/^https?:\/\//i.test(e)&&f.add(e)}}let t=l.featured_image;if("string"==typeof t&&t){let e=t.startsWith("//")?`https:${t}`:t;/^https?:\/\//i.test(e)&&f.add(e)}}}catch(e){}let g=Array.from(f);if(g.length>0){if(n.image){let e=g.findIndex(e=>e===n.image);if(e>0){let[t]=g.splice(e,1);g.unshift(t)}else -1===e&&g.unshift(n.image)}n.images=g}return n}[a,l]=c.then?(await c)():c,r()}catch(e){r(e)}})}};