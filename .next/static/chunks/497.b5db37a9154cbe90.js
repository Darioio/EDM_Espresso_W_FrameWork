(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[497],{1879:function(n){"use strict";n.exports=function equal(n,o){if(n===o)return!0;if(n&&o&&"object"==typeof n&&"object"==typeof o){if(n.constructor!==o.constructor)return!1;if(Array.isArray(n)){if((a=n.length)!=o.length)return!1;for(l=a;0!=l--;)if(!equal(n[l],o[l]))return!1;return!0}if(n instanceof Map&&o instanceof Map){if(n.size!==o.size)return!1;for(l of n.entries())if(!o.has(l[0]))return!1;for(l of n.entries())if(!equal(l[1],o.get(l[0])))return!1;return!0}if(n instanceof Set&&o instanceof Set){if(n.size!==o.size)return!1;for(l of n.entries())if(!o.has(l[0]))return!1;return!0}if(ArrayBuffer.isView(n)&&ArrayBuffer.isView(o)){if((a=n.length)!=o.length)return!1;for(l=a;0!=l--;)if(n[l]!==o[l])return!1;return!0}if(n.constructor===RegExp)return n.source===o.source&&n.flags===o.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===o.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===o.toString();if((a=(m=Object.keys(n)).length)!==Object.keys(o).length)return!1;for(l=a;0!=l--;)if(!Object.prototype.hasOwnProperty.call(o,m[l]))return!1;for(l=a;0!=l--;){var a,l,m,S=m[l];if(("_owner"!==S||!n.$$typeof)&&!equal(n[S],o[S]))return!1}return!0}return n!=n&&o!=o}},8552:function(n,o,a){var l=a(852)(a(5639),"DataView");n.exports=l},1989:function(n,o,a){var l=a(1789),m=a(401),S=a(7667),M=a(1327),T=a(1866);function Hash(n){var o=-1,a=null==n?0:n.length;for(this.clear();++o<a;){var l=n[o];this.set(l[0],l[1])}}Hash.prototype.clear=l,Hash.prototype.delete=m,Hash.prototype.get=S,Hash.prototype.has=M,Hash.prototype.set=T,n.exports=Hash},8407:function(n,o,a){var l=a(7040),m=a(4125),S=a(2117),M=a(7518),T=a(4705);function ListCache(n){var o=-1,a=null==n?0:n.length;for(this.clear();++o<a;){var l=n[o];this.set(l[0],l[1])}}ListCache.prototype.clear=l,ListCache.prototype.delete=m,ListCache.prototype.get=S,ListCache.prototype.has=M,ListCache.prototype.set=T,n.exports=ListCache},7071:function(n,o,a){var l=a(852)(a(5639),"Map");n.exports=l},3369:function(n,o,a){var l=a(4785),m=a(1285),S=a(6e3),M=a(9916),T=a(5265);function MapCache(n){var o=-1,a=null==n?0:n.length;for(this.clear();++o<a;){var l=n[o];this.set(l[0],l[1])}}MapCache.prototype.clear=l,MapCache.prototype.delete=m,MapCache.prototype.get=S,MapCache.prototype.has=M,MapCache.prototype.set=T,n.exports=MapCache},3818:function(n,o,a){var l=a(852)(a(5639),"Promise");n.exports=l},8525:function(n,o,a){var l=a(852)(a(5639),"Set");n.exports=l},6384:function(n,o,a){var l=a(8407),m=a(7465),S=a(3779),M=a(7599),T=a(4758),A=a(4309);function Stack(n){var o=this.__data__=new l(n);this.size=o.size}Stack.prototype.clear=m,Stack.prototype.delete=S,Stack.prototype.get=M,Stack.prototype.has=T,Stack.prototype.set=A,n.exports=Stack},2705:function(n,o,a){var l=a(5639).Symbol;n.exports=l},1149:function(n,o,a){var l=a(5639).Uint8Array;n.exports=l},577:function(n,o,a){var l=a(852)(a(5639),"WeakMap");n.exports=l},6874:function(n){n.exports=function(n,o,a){switch(a.length){case 0:return n.call(o);case 1:return n.call(o,a[0]);case 2:return n.call(o,a[0],a[1]);case 3:return n.call(o,a[0],a[1],a[2])}return n.apply(o,a)}},7412:function(n){n.exports=function(n,o){for(var a=-1,l=null==n?0:n.length;++a<l&&!1!==o(n[a],a,n););return n}},4963:function(n){n.exports=function(n,o){for(var a=-1,l=null==n?0:n.length,m=0,S=[];++a<l;){var M=n[a];o(M,a,n)&&(S[m++]=M)}return S}},4636:function(n,o,a){var l=a(2545),m=a(5694),S=a(1469),M=a(4144),T=a(5776),A=a(6719),E=Object.prototype.hasOwnProperty;n.exports=function(n,o){var a=S(n),R=!a&&m(n),O=!a&&!R&&M(n),N=!a&&!R&&!O&&A(n),j=a||R||O||N,B=j?l(n.length,String):[],z=B.length;for(var P in n)(o||E.call(n,P))&&!(j&&("length"==P||O&&("offset"==P||"parent"==P)||N&&("buffer"==P||"byteLength"==P||"byteOffset"==P)||T(P,z)))&&B.push(P);return B}},9932:function(n){n.exports=function(n,o){for(var a=-1,l=null==n?0:n.length,m=Array(l);++a<l;)m[a]=o(n[a],a,n);return m}},2488:function(n){n.exports=function(n,o){for(var a=-1,l=o.length,m=n.length;++a<l;)n[m+a]=o[a];return n}},4865:function(n,o,a){var l=a(9465),m=a(7813),S=Object.prototype.hasOwnProperty;n.exports=function(n,o,a){var M=n[o];S.call(n,o)&&m(M,a)&&(void 0!==a||o in n)||l(n,o,a)}},8470:function(n,o,a){var l=a(7813);n.exports=function(n,o){for(var a=n.length;a--;)if(l(n[a][0],o))return a;return -1}},4037:function(n,o,a){var l=a(8363),m=a(3674);n.exports=function(n,o){return n&&l(o,m(o),n)}},3886:function(n,o,a){var l=a(8363),m=a(1704);n.exports=function(n,o){return n&&l(o,m(o),n)}},9465:function(n,o,a){var l=a(8777);n.exports=function(n,o,a){"__proto__"==o&&l?l(n,o,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[o]=a}},5990:function(n,o,a){var l=a(6384),m=a(7412),S=a(4865),M=a(4037),T=a(3886),A=a(4626),E=a(278),R=a(8805),O=a(1911),N=a(8234),j=a(6904),B=a(4160),z=a(3824),P=a(9148),H=a(8517),_=a(1469),$=a(4144),W=a(6688),J=a(3218),V=a(2928),Z=a(3674),G=a(1704),te="[object Arguments]",tn="[object Function]",to="[object Object]",ti={};ti[te]=ti["[object Array]"]=ti["[object ArrayBuffer]"]=ti["[object DataView]"]=ti["[object Boolean]"]=ti["[object Date]"]=ti["[object Float32Array]"]=ti["[object Float64Array]"]=ti["[object Int8Array]"]=ti["[object Int16Array]"]=ti["[object Int32Array]"]=ti["[object Map]"]=ti["[object Number]"]=ti[to]=ti["[object RegExp]"]=ti["[object Set]"]=ti["[object String]"]=ti["[object Symbol]"]=ti["[object Uint8Array]"]=ti["[object Uint8ClampedArray]"]=ti["[object Uint16Array]"]=ti["[object Uint32Array]"]=!0,ti["[object Error]"]=ti[tn]=ti["[object WeakMap]"]=!1,n.exports=function baseClone(n,o,a,tl,tc,tu){var tp,th=1&o,td=2&o,tf=4&o;if(a&&(tp=tc?a(n,tl,tc,tu):a(n)),void 0!==tp)return tp;if(!J(n))return n;var tm=_(n);if(tm){if(tp=z(n),!th)return E(n,tp)}else{var tg=B(n),ty=tg==tn||"[object GeneratorFunction]"==tg;if($(n))return A(n,th);if(tg==to||tg==te||ty&&!tc){if(tp=td||ty?{}:H(n),!th)return td?O(n,T(tp,n)):R(n,M(tp,n))}else{if(!ti[tg])return tc?n:{};tp=P(n,tg,th)}}tu||(tu=new l);var tv=tu.get(n);if(tv)return tv;tu.set(n,tp),V(n)?n.forEach(function(l){tp.add(baseClone(l,o,a,l,n,tu))}):W(n)&&n.forEach(function(l,m){tp.set(m,baseClone(l,o,a,m,n,tu))});var tk=tf?td?j:N:td?G:Z,tb=tm?void 0:tk(n);return m(tb||n,function(l,m){tb&&(l=n[m=l]),S(tp,m,baseClone(l,o,a,m,n,tu))}),tp}},3118:function(n,o,a){var l=a(3218),m=Object.create,S=function(){function object(){}return function(n){if(!l(n))return{};if(m)return m(n);object.prototype=n;var o=new object;return object.prototype=void 0,o}}();n.exports=S},5764:function(n,o,a){var l=a(2488),m=a(7285);n.exports=function baseFlatten(n,o,a,S,M){var T=-1,A=n.length;for(a||(a=m),M||(M=[]);++T<A;){var E=n[T];o>0&&a(E)?o>1?baseFlatten(E,o-1,a,S,M):l(M,E):S||(M[M.length]=E)}return M}},7786:function(n,o,a){var l=a(1811),m=a(327);n.exports=function(n,o){o=l(o,n);for(var a=0,S=o.length;null!=n&&a<S;)n=n[m(o[a++])];return a&&a==S?n:void 0}},8866:function(n,o,a){var l=a(2488),m=a(1469);n.exports=function(n,o,a){var S=o(n);return m(n)?S:l(S,a(n))}},4239:function(n,o,a){var l=a(2705),m=a(9607),S=a(2333),M=l?l.toStringTag:void 0;n.exports=function(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":M&&M in Object(n)?m(n):S(n)}},9454:function(n,o,a){var l=a(4239),m=a(7005);n.exports=function(n){return m(n)&&"[object Arguments]"==l(n)}},5588:function(n,o,a){var l=a(4160),m=a(7005);n.exports=function(n){return m(n)&&"[object Map]"==l(n)}},8458:function(n,o,a){var l=a(3560),m=a(5346),S=a(3218),M=a(346),T=/^\[object .+?Constructor\]$/,A=Object.prototype,E=Function.prototype.toString,R=A.hasOwnProperty,O=RegExp("^"+E.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");n.exports=function(n){return!(!S(n)||m(n))&&(l(n)?O:T).test(M(n))}},9221:function(n,o,a){var l=a(4160),m=a(7005);n.exports=function(n){return m(n)&&"[object Set]"==l(n)}},8749:function(n,o,a){var l=a(4239),m=a(1780),S=a(7005),M={};M["[object Float32Array]"]=M["[object Float64Array]"]=M["[object Int8Array]"]=M["[object Int16Array]"]=M["[object Int32Array]"]=M["[object Uint8Array]"]=M["[object Uint8ClampedArray]"]=M["[object Uint16Array]"]=M["[object Uint32Array]"]=!0,M["[object Arguments]"]=M["[object Array]"]=M["[object ArrayBuffer]"]=M["[object Boolean]"]=M["[object DataView]"]=M["[object Date]"]=M["[object Error]"]=M["[object Function]"]=M["[object Map]"]=M["[object Number]"]=M["[object Object]"]=M["[object RegExp]"]=M["[object Set]"]=M["[object String]"]=M["[object WeakMap]"]=!1,n.exports=function(n){return S(n)&&m(n.length)&&!!M[l(n)]}},280:function(n,o,a){var l=a(5726),m=a(6916),S=Object.prototype.hasOwnProperty;n.exports=function(n){if(!l(n))return m(n);var o=[];for(var a in Object(n))S.call(n,a)&&"constructor"!=a&&o.push(a);return o}},5014:function(n,o,a){var l=a(3218),m=a(5726),S=a(3498),M=Object.prototype.hasOwnProperty;n.exports=function(n){if(!l(n))return S(n);var o=m(n),a=[];for(var T in n)"constructor"==T&&(o||!M.call(n,T))||a.push(T);return a}},3968:function(n,o,a){var l=a(5703),m=a(8777),S=a(6557),M=m?function(n,o){return m(n,"toString",{configurable:!0,enumerable:!1,value:l(o),writable:!0})}:S;n.exports=M},4259:function(n){n.exports=function(n,o,a){var l=-1,m=n.length;o<0&&(o=-o>m?0:m+o),(a=a>m?m:a)<0&&(a+=m),m=o>a?0:a-o>>>0,o>>>=0;for(var S=Array(m);++l<m;)S[l]=n[l+o];return S}},2545:function(n){n.exports=function(n,o){for(var a=-1,l=Array(n);++a<n;)l[a]=o(a);return l}},531:function(n,o,a){var l=a(2705),m=a(9932),S=a(1469),M=a(3448),T=1/0,A=l?l.prototype:void 0,E=A?A.toString:void 0;n.exports=function baseToString(n){if("string"==typeof n)return n;if(S(n))return m(n,baseToString)+"";if(M(n))return E?E.call(n):"";var o=n+"";return"0"==o&&1/n==-T?"-0":o}},7561:function(n,o,a){var l=a(7990),m=/^\s+/;n.exports=function(n){return n?n.slice(0,l(n)+1).replace(m,""):n}},1717:function(n){n.exports=function(n){return function(o){return n(o)}}},7406:function(n,o,a){var l=a(1811),m=a(928),S=a(292),M=a(327);n.exports=function(n,o){return o=l(o,n),null==(n=S(n,o))||delete n[M(m(o))]}},1811:function(n,o,a){var l=a(1469),m=a(5403),S=a(5514),M=a(9833);n.exports=function(n,o){return l(n)?n:m(n,o)?[n]:S(M(n))}},4318:function(n,o,a){var l=a(1149);n.exports=function(n){var o=new n.constructor(n.byteLength);return new l(o).set(new l(n)),o}},4626:function(n,o,a){n=a.nmd(n);var l=a(5639),m=o&&!o.nodeType&&o,S=m&&n&&!n.nodeType&&n,M=S&&S.exports===m?l.Buffer:void 0,T=M?M.allocUnsafe:void 0;n.exports=function(n,o){if(o)return n.slice();var a=n.length,l=T?T(a):new n.constructor(a);return n.copy(l),l}},4359:function(n,o,a){var l=a(4318);n.exports=function(n,o){var a=o?l(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.byteLength)}},3147:function(n){var o=/\w*$/;n.exports=function(n){var a=new n.constructor(n.source,o.exec(n));return a.lastIndex=n.lastIndex,a}},419:function(n,o,a){var l=a(2705),m=l?l.prototype:void 0,S=m?m.valueOf:void 0;n.exports=function(n){return S?Object(S.call(n)):{}}},7133:function(n,o,a){var l=a(4318);n.exports=function(n,o){var a=o?l(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.length)}},278:function(n){n.exports=function(n,o){var a=-1,l=n.length;for(o||(o=Array(l));++a<l;)o[a]=n[a];return o}},8363:function(n,o,a){var l=a(4865),m=a(9465);n.exports=function(n,o,a,S){var M=!a;a||(a={});for(var T=-1,A=o.length;++T<A;){var E=o[T],R=S?S(a[E],n[E],E,a,n):void 0;void 0===R&&(R=n[E]),M?m(a,E,R):l(a,E,R)}return a}},8805:function(n,o,a){var l=a(8363),m=a(9551);n.exports=function(n,o){return l(n,m(n),o)}},1911:function(n,o,a){var l=a(8363),m=a(1442);n.exports=function(n,o){return l(n,m(n),o)}},4429:function(n,o,a){var l=a(5639)["__core-js_shared__"];n.exports=l},696:function(n,o,a){var l=a(6827);n.exports=function(n){return l(n)?void 0:n}},8777:function(n,o,a){var l=a(852),m=function(){try{var n=l(Object,"defineProperty");return n({},"",{}),n}catch(n){}}();n.exports=m},9021:function(n,o,a){var l=a(5564),m=a(5357),S=a(61);n.exports=function(n){return S(m(n,void 0,l),n+"")}},1957:function(n,o,a){var l="object"==typeof a.g&&a.g&&a.g.Object===Object&&a.g;n.exports=l},8234:function(n,o,a){var l=a(8866),m=a(9551),S=a(3674);n.exports=function(n){return l(n,S,m)}},6904:function(n,o,a){var l=a(8866),m=a(1442),S=a(1704);n.exports=function(n){return l(n,S,m)}},5050:function(n,o,a){var l=a(7019);n.exports=function(n,o){var a=n.__data__;return l(o)?a["string"==typeof o?"string":"hash"]:a.map}},852:function(n,o,a){var l=a(8458),m=a(7801);n.exports=function(n,o){var a=m(n,o);return l(a)?a:void 0}},5924:function(n,o,a){var l=a(5569)(Object.getPrototypeOf,Object);n.exports=l},9607:function(n,o,a){var l=a(2705),m=Object.prototype,S=m.hasOwnProperty,M=m.toString,T=l?l.toStringTag:void 0;n.exports=function(n){var o=S.call(n,T),a=n[T];try{n[T]=void 0;var l=!0}catch(n){}var m=M.call(n);return l&&(o?n[T]=a:delete n[T]),m}},9551:function(n,o,a){var l=a(4963),m=a(479),S=Object.prototype.propertyIsEnumerable,M=Object.getOwnPropertySymbols,T=M?function(n){return null==n?[]:l(M(n=Object(n)),function(o){return S.call(n,o)})}:m;n.exports=T},1442:function(n,o,a){var l=a(2488),m=a(5924),S=a(9551),M=a(479),T=Object.getOwnPropertySymbols?function(n){for(var o=[];n;)l(o,S(n)),n=m(n);return o}:M;n.exports=T},4160:function(n,o,a){var l=a(8552),m=a(7071),S=a(3818),M=a(8525),T=a(577),A=a(4239),E=a(346),R="[object Map]",O="[object Promise]",N="[object Set]",j="[object WeakMap]",B="[object DataView]",z=E(l),P=E(m),H=E(S),_=E(M),$=E(T),W=A;(l&&W(new l(new ArrayBuffer(1)))!=B||m&&W(new m)!=R||S&&W(S.resolve())!=O||M&&W(new M)!=N||T&&W(new T)!=j)&&(W=function(n){var o=A(n),a="[object Object]"==o?n.constructor:void 0,l=a?E(a):"";if(l)switch(l){case z:return B;case P:return R;case H:return O;case _:return N;case $:return j}return o}),n.exports=W},7801:function(n){n.exports=function(n,o){return null==n?void 0:n[o]}},1789:function(n,o,a){var l=a(4536);n.exports=function(){this.__data__=l?l(null):{},this.size=0}},401:function(n){n.exports=function(n){var o=this.has(n)&&delete this.__data__[n];return this.size-=o?1:0,o}},7667:function(n,o,a){var l=a(4536),m=Object.prototype.hasOwnProperty;n.exports=function(n){var o=this.__data__;if(l){var a=o[n];return"__lodash_hash_undefined__"===a?void 0:a}return m.call(o,n)?o[n]:void 0}},1327:function(n,o,a){var l=a(4536),m=Object.prototype.hasOwnProperty;n.exports=function(n){var o=this.__data__;return l?void 0!==o[n]:m.call(o,n)}},1866:function(n,o,a){var l=a(4536);n.exports=function(n,o){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=l&&void 0===o?"__lodash_hash_undefined__":o,this}},3824:function(n){var o=Object.prototype.hasOwnProperty;n.exports=function(n){var a=n.length,l=new n.constructor(a);return a&&"string"==typeof n[0]&&o.call(n,"index")&&(l.index=n.index,l.input=n.input),l}},9148:function(n,o,a){var l=a(4318),m=a(4359),S=a(3147),M=a(419),T=a(7133);n.exports=function(n,o,a){var A=n.constructor;switch(o){case"[object ArrayBuffer]":return l(n);case"[object Boolean]":case"[object Date]":return new A(+n);case"[object DataView]":return m(n,a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return T(n,a);case"[object Map]":case"[object Set]":return new A;case"[object Number]":case"[object String]":return new A(n);case"[object RegExp]":return S(n);case"[object Symbol]":return M(n)}}},8517:function(n,o,a){var l=a(3118),m=a(5924),S=a(5726);n.exports=function(n){return"function"!=typeof n.constructor||S(n)?{}:l(m(n))}},7285:function(n,o,a){var l=a(2705),m=a(5694),S=a(1469),M=l?l.isConcatSpreadable:void 0;n.exports=function(n){return S(n)||m(n)||!!(M&&n&&n[M])}},5776:function(n){var o=/^(?:0|[1-9]\d*)$/;n.exports=function(n,a){var l=typeof n;return!!(a=null==a?9007199254740991:a)&&("number"==l||"symbol"!=l&&o.test(n))&&n>-1&&n%1==0&&n<a}},5403:function(n,o,a){var l=a(1469),m=a(3448),S=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,M=/^\w*$/;n.exports=function(n,o){if(l(n))return!1;var a=typeof n;return!!("number"==a||"symbol"==a||"boolean"==a||null==n||m(n))||M.test(n)||!S.test(n)||null!=o&&n in Object(o)}},7019:function(n){n.exports=function(n){var o=typeof n;return"string"==o||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n}},5346:function(n,o,a){var l,m=a(4429),S=(l=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"";n.exports=function(n){return!!S&&S in n}},5726:function(n){var o=Object.prototype;n.exports=function(n){var a=n&&n.constructor;return n===("function"==typeof a&&a.prototype||o)}},7040:function(n){n.exports=function(){this.__data__=[],this.size=0}},4125:function(n,o,a){var l=a(8470),m=Array.prototype.splice;n.exports=function(n){var o=this.__data__,a=l(o,n);return!(a<0)&&(a==o.length-1?o.pop():m.call(o,a,1),--this.size,!0)}},2117:function(n,o,a){var l=a(8470);n.exports=function(n){var o=this.__data__,a=l(o,n);return a<0?void 0:o[a][1]}},7518:function(n,o,a){var l=a(8470);n.exports=function(n){return l(this.__data__,n)>-1}},4705:function(n,o,a){var l=a(8470);n.exports=function(n,o){var a=this.__data__,m=l(a,n);return m<0?(++this.size,a.push([n,o])):a[m][1]=o,this}},4785:function(n,o,a){var l=a(1989),m=a(8407),S=a(7071);n.exports=function(){this.size=0,this.__data__={hash:new l,map:new(S||m),string:new l}}},1285:function(n,o,a){var l=a(5050);n.exports=function(n){var o=l(this,n).delete(n);return this.size-=o?1:0,o}},6e3:function(n,o,a){var l=a(5050);n.exports=function(n){return l(this,n).get(n)}},9916:function(n,o,a){var l=a(5050);n.exports=function(n){return l(this,n).has(n)}},5265:function(n,o,a){var l=a(5050);n.exports=function(n,o){var a=l(this,n),m=a.size;return a.set(n,o),this.size+=a.size==m?0:1,this}},4523:function(n,o,a){var l=a(8306);n.exports=function(n){var o=l(n,function(n){return 500===a.size&&a.clear(),n}),a=o.cache;return o}},4536:function(n,o,a){var l=a(852)(Object,"create");n.exports=l},6916:function(n,o,a){var l=a(5569)(Object.keys,Object);n.exports=l},3498:function(n){n.exports=function(n){var o=[];if(null!=n)for(var a in Object(n))o.push(a);return o}},1167:function(n,o,a){n=a.nmd(n);var l=a(1957),m=o&&!o.nodeType&&o,S=m&&n&&!n.nodeType&&n,M=S&&S.exports===m&&l.process,T=function(){try{var n=S&&S.require&&S.require("util").types;if(n)return n;return M&&M.binding&&M.binding("util")}catch(n){}}();n.exports=T},2333:function(n){var o=Object.prototype.toString;n.exports=function(n){return o.call(n)}},5569:function(n){n.exports=function(n,o){return function(a){return n(o(a))}}},5357:function(n,o,a){var l=a(6874),m=Math.max;n.exports=function(n,o,a){return o=m(void 0===o?n.length-1:o,0),function(){for(var S=arguments,M=-1,T=m(S.length-o,0),A=Array(T);++M<T;)A[M]=S[o+M];M=-1;for(var E=Array(o+1);++M<o;)E[M]=S[M];return E[o]=a(A),l(n,this,E)}}},292:function(n,o,a){var l=a(7786),m=a(4259);n.exports=function(n,o){return o.length<2?n:l(n,m(o,0,-1))}},5639:function(n,o,a){var l=a(1957),m="object"==typeof self&&self&&self.Object===Object&&self,S=l||m||Function("return this")();n.exports=S},61:function(n,o,a){var l=a(3968),m=a(1275)(l);n.exports=m},1275:function(n){var o=Date.now;n.exports=function(n){var a=0,l=0;return function(){var m=o(),S=16-(m-l);if(l=m,S>0){if(++a>=800)return arguments[0]}else a=0;return n.apply(void 0,arguments)}}},7465:function(n,o,a){var l=a(8407);n.exports=function(){this.__data__=new l,this.size=0}},3779:function(n){n.exports=function(n){var o=this.__data__,a=o.delete(n);return this.size=o.size,a}},7599:function(n){n.exports=function(n){return this.__data__.get(n)}},4758:function(n){n.exports=function(n){return this.__data__.has(n)}},4309:function(n,o,a){var l=a(8407),m=a(7071),S=a(3369);n.exports=function(n,o){var a=this.__data__;if(a instanceof l){var M=a.__data__;if(!m||M.length<199)return M.push([n,o]),this.size=++a.size,this;a=this.__data__=new S(M)}return a.set(n,o),this.size=a.size,this}},5514:function(n,o,a){var l=a(4523),m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,S=/\\(\\)?/g,M=l(function(n){var o=[];return 46===n.charCodeAt(0)&&o.push(""),n.replace(m,function(n,a,l,m){o.push(l?m.replace(S,"$1"):a||n)}),o});n.exports=M},327:function(n,o,a){var l=a(3448),m=1/0;n.exports=function(n){if("string"==typeof n||l(n))return n;var o=n+"";return"0"==o&&1/n==-m?"-0":o}},346:function(n){var o=Function.prototype.toString;n.exports=function(n){if(null!=n){try{return o.call(n)}catch(n){}try{return n+""}catch(n){}}return""}},7990:function(n){var o=/\s/;n.exports=function(n){for(var a=n.length;a--&&o.test(n.charAt(a)););return a}},5703:function(n){n.exports=function(n){return function(){return n}}},3279:function(n,o,a){var l=a(3218),m=a(7771),S=a(4841),M=Math.max,T=Math.min;n.exports=function(n,o,a){var A,E,R,O,N,j,B=0,z=!1,P=!1,H=!0;if("function"!=typeof n)throw TypeError("Expected a function");function invokeFunc(o){var a=A,l=E;return A=E=void 0,B=o,O=n.apply(l,a)}function shouldInvoke(n){var a=n-j,l=n-B;return void 0===j||a>=o||a<0||P&&l>=R}function timerExpired(){var n,a,l,S=m();if(shouldInvoke(S))return trailingEdge(S);N=setTimeout(timerExpired,(n=S-j,a=S-B,l=o-n,P?T(l,R-a):l))}function trailingEdge(n){return(N=void 0,H&&A)?invokeFunc(n):(A=E=void 0,O)}function debounced(){var n,a=m(),l=shouldInvoke(a);if(A=arguments,E=this,j=a,l){if(void 0===N)return B=n=j,N=setTimeout(timerExpired,o),z?invokeFunc(n):O;if(P)return clearTimeout(N),N=setTimeout(timerExpired,o),invokeFunc(j)}return void 0===N&&(N=setTimeout(timerExpired,o)),O}return o=S(o)||0,l(a)&&(z=!!a.leading,R=(P="maxWait"in a)?M(S(a.maxWait)||0,o):R,H="trailing"in a?!!a.trailing:H),debounced.cancel=function(){void 0!==N&&clearTimeout(N),B=0,A=j=E=N=void 0},debounced.flush=function(){return void 0===N?O:trailingEdge(m())},debounced}},7813:function(n){n.exports=function(n,o){return n===o||n!=n&&o!=o}},5564:function(n,o,a){var l=a(5764);n.exports=function(n){return(null==n?0:n.length)?l(n,1):[]}},6557:function(n){n.exports=function(n){return n}},5694:function(n,o,a){var l=a(9454),m=a(7005),S=Object.prototype,M=S.hasOwnProperty,T=S.propertyIsEnumerable,A=l(function(){return arguments}())?l:function(n){return m(n)&&M.call(n,"callee")&&!T.call(n,"callee")};n.exports=A},1469:function(n){var o=Array.isArray;n.exports=o},8612:function(n,o,a){var l=a(3560),m=a(1780);n.exports=function(n){return null!=n&&m(n.length)&&!l(n)}},4144:function(n,o,a){n=a.nmd(n);var l=a(5639),m=a(5062),S=o&&!o.nodeType&&o,M=S&&n&&!n.nodeType&&n,T=M&&M.exports===S?l.Buffer:void 0,A=T?T.isBuffer:void 0;n.exports=A||m},3560:function(n,o,a){var l=a(4239),m=a(3218);n.exports=function(n){if(!m(n))return!1;var o=l(n);return"[object Function]"==o||"[object GeneratorFunction]"==o||"[object AsyncFunction]"==o||"[object Proxy]"==o}},1780:function(n){n.exports=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991}},6688:function(n,o,a){var l=a(5588),m=a(1717),S=a(1167),M=S&&S.isMap,T=M?m(M):l;n.exports=T},3218:function(n){n.exports=function(n){var o=typeof n;return null!=n&&("object"==o||"function"==o)}},7005:function(n){n.exports=function(n){return null!=n&&"object"==typeof n}},6827:function(n,o,a){var l=a(4239),m=a(5924),S=a(7005),M=Object.prototype,T=Function.prototype.toString,A=M.hasOwnProperty,E=T.call(Object);n.exports=function(n){if(!S(n)||"[object Object]"!=l(n))return!1;var o=m(n);if(null===o)return!0;var a=A.call(o,"constructor")&&o.constructor;return"function"==typeof a&&a instanceof a&&T.call(a)==E}},2928:function(n,o,a){var l=a(9221),m=a(1717),S=a(1167),M=S&&S.isSet,T=M?m(M):l;n.exports=T},3448:function(n,o,a){var l=a(4239),m=a(7005);n.exports=function(n){return"symbol"==typeof n||m(n)&&"[object Symbol]"==l(n)}},6719:function(n,o,a){var l=a(8749),m=a(1717),S=a(1167),M=S&&S.isTypedArray,T=M?m(M):l;n.exports=T},3674:function(n,o,a){var l=a(4636),m=a(280),S=a(8612);n.exports=function(n){return S(n)?l(n):m(n)}},1704:function(n,o,a){var l=a(4636),m=a(5014),S=a(8612);n.exports=function(n){return S(n)?l(n,!0):m(n)}},928:function(n){n.exports=function(n){var o=null==n?0:n.length;return o?n[o-1]:void 0}},8306:function(n,o,a){var l=a(3369);function memoize(n,o){if("function"!=typeof n||null!=o&&"function"!=typeof o)throw TypeError("Expected a function");var memoized=function(){var a=arguments,l=o?o.apply(this,a):a[0],m=memoized.cache;if(m.has(l))return m.get(l);var S=n.apply(this,a);return memoized.cache=m.set(l,S)||m,S};return memoized.cache=new(memoize.Cache||l),memoized}memoize.Cache=l,n.exports=memoize},7771:function(n,o,a){var l=a(5639);n.exports=function(){return l.Date.now()}},7557:function(n,o,a){var l=a(9932),m=a(5990),S=a(7406),M=a(1811),T=a(8363),A=a(696),E=a(9021),R=a(6904),O=E(function(n,o){var a={};if(null==n)return a;var E=!1;o=l(o,function(o){return o=M(o,n),E||(E=o.length>1),o}),T(n,R(n),a),E&&(a=m(a,7,A));for(var O=o.length;O--;)S(a,o[O]);return a});n.exports=O},479:function(n){n.exports=function(){return[]}},5062:function(n){n.exports=function(){return!1}},4841:function(n,o,a){var l=a(7561),m=a(3218),S=a(3448),M=0/0,T=/^[-+]0x[0-9a-f]+$/i,A=/^0b[01]+$/i,E=/^0o[0-7]+$/i,R=parseInt;n.exports=function(n){if("number"==typeof n)return n;if(S(n))return M;if(m(n)){var o="function"==typeof n.valueOf?n.valueOf():n;n=m(o)?o+"":o}if("string"!=typeof n)return 0===n?n:+n;n=l(n);var a=A.test(n);return a||E.test(n)?R(n.slice(2),a?2:8):T.test(n)?M:+n}},9833:function(n,o,a){var l=a(531);n.exports=function(n){return null==n?"":l(n)}},6086:function(n,o,a){"use strict";a.d(o,{Z:function(){return RichTextEditorProvider}});var l=a(5893),m=a(5441);function RichTextEditorProvider({editor:n,children:o}){return(0,l.jsx)(m.W.Provider,{value:n,children:o})}},5441:function(n,o,a){"use strict";a.d(o,{W:function(){return m},Y:function(){return useRichTextEditorContext}});var l=a(7294);let m=(0,l.createContext)(void 0);function useRichTextEditorContext(){let n=(0,l.useContext)(m);if(void 0===n)throw Error("Tiptap editor not found in component context. Be sure to use <RichTextEditorProvider editor={editor} />!");return n}},2801:function(n,o,a){"use strict";a.d(o,{b:function(){return N},Z:function(){return MenuButton}});var l=a(5893),m=a(6917),S=a(622),M=a(6351),T=a(287),A=a(512),E=a(3075);let R=(0,E.Un)("MenuButton",["root","icon"]);var O=a(300);let N="1.25rem",j=(0,E.jB)("MenuButton"),B=(0,m.ZP)("span",{name:j,slot:"root",overridesResolver:(n,o)=>o.root})(()=>({[`&& .${S.Z.root}`]:{border:"none",padding:5}})),z=(0,m.ZP)("span",{name:j,slot:"icon",overridesResolver:(n,o)=>o.icon})(()=>({fontSize:N}));function MenuButton(n){let o=(0,M.Z)({props:n,name:j}),{tooltipLabel:a,tooltipShortcutKeys:m,IconComponent:S,buttonRef:E,children:N,className:P,classes:H={},sx:_,...$}=o;return(0,l.jsx)(B,{className:(0,A.W)([R.root,P,H.root]),sx:_,children:(0,l.jsx)(O.Z,{label:a,shortcutKeys:m,children:(0,l.jsx)(T.Z,{ref:E,size:"small",value:a,...$,children:null!=N?N:S&&(0,l.jsx)(z,{as:S,className:(0,A.W)([R.icon,H.icon])})})})})}},7613:function(n,o,a){"use strict";a.d(o,{Z:function(){return MenuButtonBold}});var l=a(5893),m=a(570),S=a(5441),M=a(2801);function MenuButtonBold(n){var o;let a=(0,S.Y)();return(0,l.jsx)(M.Z,{tooltipLabel:"Bold",tooltipShortcutKeys:["mod","B"],IconComponent:m.Z,selected:null!==(o=null==a?void 0:a.isActive("bold"))&&void 0!==o&&o,disabled:!(null==a?void 0:a.isEditable)||!a.can().toggleBold(),onClick:()=>null==a?void 0:a.chain().focus().toggleBold().run(),...n})}},7773:function(n,o,a){"use strict";a.d(o,{Z:function(){return MenuButtonBulletedList}});var l=a(5893),m=a(1641),S=a(5441),M=a(2801);function MenuButtonBulletedList(n){var o;let a=(0,S.Y)();return(0,l.jsx)(M.Z,{tooltipLabel:"Bulleted list",tooltipShortcutKeys:["mod","Shift","8"],IconComponent:m.Z,selected:null!==(o=null==a?void 0:a.isActive("bulletList"))&&void 0!==o&&o,disabled:!(null==a?void 0:a.isEditable)||!a.can().toggleBulletList(),onClick:()=>null==a?void 0:a.chain().focus().toggleBulletList().run(),...n})}},4389:function(n,o,a){"use strict";a.d(o,{Z:function(){return MenuButtonEditLink}});var l=a(5893),m=a(9175),S=a(7294),M=a(5441),T=a(2801);function MenuButtonEditLink(n){let o=(0,M.Y)(),a=(0,S.useRef)(null);return(0,l.jsx)(T.Z,{buttonRef:a,tooltipLabel:"Link",tooltipShortcutKeys:["mod","Shift","U"],IconComponent:m.Z,selected:null==o?void 0:o.isActive("link"),disabled:!(null==o?void 0:o.isEditable),onClick:()=>null==o?void 0:o.commands.openLinkBubbleMenu({anchorEl:a.current,placement:"bottom"}),...n})}},2151:function(n,o,a){"use strict";a.d(o,{Z:function(){return MenuButtonItalic}});var l=a(5893),m=a(7920),S=a(5441),M=a(2801);function MenuButtonItalic(n){var o;let a=(0,S.Y)();return(0,l.jsx)(M.Z,{tooltipLabel:"Italic",tooltipShortcutKeys:["mod","I"],IconComponent:m.Z,selected:null!==(o=null==a?void 0:a.isActive("italic"))&&void 0!==o&&o,disabled:!(null==a?void 0:a.isEditable)||!a.can().toggleItalic(),onClick:()=>null==a?void 0:a.chain().focus().toggleItalic().run(),...n})}},331:function(n,o,a){"use strict";a.d(o,{Z:function(){return MenuButtonOrderedList}});var l=a(5893),m=a(8630),S=a(5441),M=a(2801);function MenuButtonOrderedList(n){var o;let a=(0,S.Y)();return(0,l.jsx)(M.Z,{tooltipLabel:"Ordered list",tooltipShortcutKeys:["mod","Shift","7"],IconComponent:m.Z,selected:null!==(o=null==a?void 0:a.isActive("orderedList"))&&void 0!==o&&o,disabled:!(null==a?void 0:a.isEditable)||!a.can().toggleOrderedList(),onClick:()=>null==a?void 0:a.chain().focus().toggleOrderedList().run(),...n})}},8723:function(n,o,a){"use strict";a.d(o,{Z:function(){return MenuButtonTextColor}});var l=a(5893),m=a(5441),S=a(5295);let M=(0,S.Z)((0,l.jsx)("path",{d:"M 5.49 17 h 2.42 l 1.27 -3.58 h 5.65 L 16.09 17 h 2.42 L 13.25 3 h -2.5 L 5.49 17 z m 4.42 -5.61 l 2.03 -5.79 h 0.12 l 2.03 5.79 H 9.91 z"}),"FormatColorTextNoBar");var T=a(2103),A=a(6917),E=a(6351),R=a(512),O=a(7294);let N=(0,S.Z)((0,l.jsx)("path",{d:"M 2 20 h 20 v 4 H 2 v -4 z"}),"FormatColorBar");var j=a(3075),B=a(1005),z=a(94),P=a(2467),H=a(9382),_=a(6514),$=a(3387),W=a(2178),J=a(1395);function u(){return(u=Object.assign||function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(n[l]=a[l])}return n}).apply(this,arguments)}function c(n,o){if(null==n)return{};var a,l,m={},S=Object.keys(n);for(l=0;l<S.length;l++)o.indexOf(a=S[l])>=0||(m[a]=n[a]);return m}function i(n){var o=(0,O.useRef)(n),a=(0,O.useRef)(function(n){o.current&&o.current(n)});return o.current=n,a.current}var s=function(n,o,a){return void 0===o&&(o=0),void 0===a&&(a=1),n>a?a:n<o?o:n},f=function(n){return"touches"in n},v=function(n){return n&&n.ownerDocument.defaultView||self},d=function(n,o,a){var l=n.getBoundingClientRect(),m=f(o)?function(n,o){for(var a=0;a<n.length;a++)if(n[a].identifier===o)return n[a];return n[0]}(o.touches,a):o;return{left:s((m.pageX-(l.left+v(n).pageXOffset))/l.width),top:s((m.pageY-(l.top+v(n).pageYOffset))/l.height)}},h=function(n){f(n)||n.preventDefault()},V=O.memo(function(n){var o=n.onMove,a=n.onKey,l=c(n,["onMove","onKey"]),m=(0,O.useRef)(null),S=i(o),M=i(a),T=(0,O.useRef)(null),A=(0,O.useRef)(!1),E=(0,O.useMemo)(function(){var e=function(n){h(n),(f(n)?n.touches.length>0:n.buttons>0)&&m.current?S(d(m.current,n,T.current)):t(!1)},r=function(){return t(!1)};function t(n){var o=A.current,a=v(m.current),l=n?a.addEventListener:a.removeEventListener;l(o?"touchmove":"mousemove",e),l(o?"touchend":"mouseup",r)}return[function(n){var o=n.nativeEvent,a=m.current;if(a&&(h(o),(!A.current||f(o))&&a)){if(f(o)){A.current=!0;var l=o.changedTouches||[];l.length&&(T.current=l[0].identifier)}a.focus(),S(d(a,o,T.current)),t(!0)}},function(n){var o=n.which||n.keyCode;o<37||o>40||(n.preventDefault(),M({left:39===o?.05:37===o?-.05:0,top:40===o?.05:38===o?-.05:0}))},t]},[M,S]),R=E[0],N=E[1],j=E[2];return(0,O.useEffect)(function(){return j},[j]),O.createElement("div",u({},l,{onTouchStart:R,onMouseDown:R,className:"react-colorful__interactive",ref:m,onKeyDown:N,tabIndex:0,role:"slider"}))}),g=function(n){return n.filter(Boolean).join(" ")},p=function(n){var o=n.color,a=n.left,l=n.top,m=g(["react-colorful__pointer",n.className]);return O.createElement("div",{className:m,style:{top:100*(void 0===l?.5:l)+"%",left:100*a+"%"}},O.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:o}}))},b=function(n,o,a){return void 0===o&&(o=0),void 0===a&&(a=Math.pow(10,o)),Math.round(a*n)/a},x=function(n){return L(C(n))},C=function(n){return"#"===n[0]&&(n=n.substring(1)),n.length<6?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:4===n.length?b(parseInt(n[3]+n[3],16)/255,2):1}:{r:parseInt(n.substring(0,2),16),g:parseInt(n.substring(2,4),16),b:parseInt(n.substring(4,6),16),a:8===n.length?b(parseInt(n.substring(6,8),16)/255,2):1}},w=function(n){return K(I(n))},y=function(n){var o=n.s,a=n.v,l=n.a,m=(200-o)*a/100;return{h:b(n.h),s:b(m>0&&m<200?o*a/100/(m<=100?m:200-m)*100:0),l:b(m/2),a:b(l,2)}},q=function(n){var o=y(n);return"hsl("+o.h+", "+o.s+"%, "+o.l+"%)"},k=function(n){var o=y(n);return"hsla("+o.h+", "+o.s+"%, "+o.l+"%, "+o.a+")"},I=function(n){var o=n.h,a=n.s,l=n.v,m=n.a;o=o/360*6,a/=100,l/=100;var S=Math.floor(o),M=l*(1-a),T=l*(1-(o-S)*a),A=l*(1-(1-o+S)*a),E=S%6;return{r:b(255*[l,T,M,M,A,l][E]),g:b(255*[A,l,l,T,M,M][E]),b:b(255*[M,M,A,l,l,T][E]),a:b(m,2)}},D=function(n){var o=n.toString(16);return o.length<2?"0"+o:o},K=function(n){var o=n.r,a=n.g,l=n.b,m=n.a,S=m<1?D(b(255*m)):"";return"#"+D(o)+D(a)+D(l)+S},L=function(n){var o=n.r,a=n.g,l=n.b,m=n.a,S=Math.max(o,a,l),M=S-Math.min(o,a,l),T=M?S===o?(a-l)/M:S===a?2+(l-o)/M:4+(o-a)/M:0;return{h:b(60*(T<0?T+6:T)),s:b(S?M/S*100:0),v:b(S/255*100),a:m}},Z=O.memo(function(n){var o=n.hue,a=n.onChange,l=g(["react-colorful__hue",n.className]);return O.createElement("div",{className:l},O.createElement(V,{onMove:function(n){a({h:360*n.left})},onKey:function(n){a({h:s(o+360*n.left,0,360)})},"aria-label":"Hue","aria-valuenow":b(o),"aria-valuemax":"360","aria-valuemin":"0"},O.createElement(p,{className:"react-colorful__hue-pointer",left:o/360,color:q({h:o,s:100,v:100,a:1})})))}),G=O.memo(function(n){var o=n.hsva,a=n.onChange,l={backgroundColor:q({h:o.h,s:100,v:100,a:1})};return O.createElement("div",{className:"react-colorful__saturation",style:l},O.createElement(V,{onMove:function(n){a({s:100*n.left,v:100-100*n.top})},onKey:function(n){a({s:s(o.s+100*n.left,0,100),v:s(o.v-100*n.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+b(o.s)+"%, Brightness "+b(o.v)+"%"},O.createElement(p,{className:"react-colorful__saturation-pointer",top:1-o.v/100,left:o.s/100,color:q(o)})))}),F=function(n,o){if(n===o)return!0;for(var a in n)if(n[a]!==o[a])return!1;return!0},X=function(n,o){return n.toLowerCase()===o.toLowerCase()||F(C(n),C(o))};function Y(n,o,a){var l=i(a),m=(0,O.useState)(function(){return n.toHsva(o)}),S=m[0],M=m[1],T=(0,O.useRef)({color:o,hsva:S});return(0,O.useEffect)(function(){if(!n.equal(o,T.current.color)){var a=n.toHsva(o);T.current={hsva:a,color:o},M(a)}},[o,n]),(0,O.useEffect)(function(){var o;F(S,T.current.hsva)||n.equal(o=n.fromHsva(S),T.current.color)||(T.current={hsva:S,color:o},l(o))},[S,n,l]),[S,(0,O.useCallback)(function(n){M(function(o){return Object.assign({},o,n)})},[])]}var te,tn="undefined"!=typeof window?O.useLayoutEffect:O.useEffect,to=new Map,Q=function(n){tn(function(){var o=n.current?n.current.ownerDocument:document;if(void 0!==o&&!to.has(o)){var l=o.createElement("style");l.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',to.set(o,l);var m=te||a.nc;m&&l.setAttribute("nonce",m),o.head.appendChild(l)}},[])},U=function(n){var o=n.className,a=n.colorModel,l=n.color,m=void 0===l?a.defaultColor:l,S=n.onChange,M=c(n,["className","colorModel","color","onChange"]),T=(0,O.useRef)(null);Q(T);var A=Y(a,m,S),E=A[0],R=A[1],N=g(["react-colorful",o]);return O.createElement("div",u({},M,{ref:T,className:N}),O.createElement(G,{hsva:E,onChange:R}),O.createElement(Z,{hue:E.h,onChange:R,className:"react-colorful__last-control"}))},ti={defaultColor:"000",toHsva:x,fromHsva:function(n){return w({h:n.h,s:n.s,v:n.v,a:1})},equal:X},ee=function(n){var o=n.className,a=n.hsva,l=n.onChange,m={backgroundImage:"linear-gradient(90deg, "+k(Object.assign({},a,{a:0}))+", "+k(Object.assign({},a,{a:1}))+")"},S=g(["react-colorful__alpha",o]),M=b(100*a.a);return O.createElement("div",{className:S},O.createElement("div",{className:"react-colorful__alpha-gradient",style:m}),O.createElement(V,{onMove:function(n){l({a:n.left})},onKey:function(n){l({a:s(a.a+n.left)})},"aria-label":"Alpha","aria-valuetext":M+"%","aria-valuenow":M,"aria-valuemin":"0","aria-valuemax":"100"},O.createElement(p,{className:"react-colorful__alpha-pointer",left:a.a,color:k(a)})))},re=function(n){var o=n.className,a=n.colorModel,l=n.color,m=void 0===l?a.defaultColor:l,S=n.onChange,M=c(n,["className","colorModel","color","onChange"]),T=(0,O.useRef)(null);Q(T);var A=Y(a,m,S),E=A[0],R=A[1],N=g(["react-colorful",o]);return O.createElement("div",u({},M,{ref:T,className:N}),O.createElement(G,{hsva:E,onChange:R}),O.createElement(Z,{hue:E.h,onChange:R}),O.createElement(ee,{hsva:E,onChange:R,className:"react-colorful__last-control"}))},tl={defaultColor:"0001",toHsva:x,fromHsva:w,equal:X},tc=a(291);function color_colorToHex(n){try{return(0,tc.vq)(n)}catch(n){return null}}let tu=(0,j.Un)("ColorPicker",["gradientPicker","colorTextInput","swatchContainer"]);var tp=(0,S.Z)((0,l.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),th=a(3255);let td=(0,j.Un)("ColorSwatchButton",["root","activeIcon","colorNotSet"]),tf=(0,j.jB)("ColorSwatchButton"),tm=(0,A.ZP)("button",{name:tf,slot:"root",overridesResolver:(n,o)=>[o.root,n.ownerState.colorNotSet&&o.colorNotSet]})(({theme:n,ownerState:o})=>({height:n.spacing(2.5),width:n.spacing(2.5),minWidth:n.spacing(2.5),borderRadius:n.shape.borderRadius,borderColor:"dark"===n.palette.mode?n.palette.grey[700]:n.palette.grey[400],borderStyle:"solid",borderWidth:1,cursor:"pointer",padding:0,backgroundClip:"content-box",...o.colorNotSet&&{background:`repeating-conic-gradient(
      ${n.palette.grey[400]} 0% 25%, ${n.palette.common.white} 0% 50%)
      50% / 12px 12px`,backgroundClip:"content-box"}})),tg=(0,A.ZP)(tp,{name:tf,slot:"activeIcon",overridesResolver:(n,o)=>o.activeIcon})(()=>({height:"100%",width:"80%",verticalAlign:"middle"})),ty=(0,O.forwardRef)((n,o)=>{let a=(0,E.Z)({props:n,name:tf}),{value:m,label:S,padding:M,active:T,className:A,classes:O={},sx:N,...j}=a,B=(0,th.Z)(),z=!m;return(0,l.jsx)(tm,{ref:o,type:"button",style:{backgroundColor:m,padding:M},"aria-label":null!=S?S:m,value:m,...j,className:(0,R.W)([td.root,z&&[td.colorNotSet,O.colorNotSet],O.root,A]),sx:N,ownerState:{active:T,colorNotSet:z},children:T&&(0,l.jsx)(tg,{fontSize:"small",className:(0,R.W)([td.activeIcon,O.activeIcon]),style:{color:m?B.palette.getContrastText(m):void 0}})})});ty.displayName="ColorSwatchButton";let tv=(0,j.jB)("ColorPicker"),tk=(0,A.ZP)(function(n){return O.createElement(U,u({},n,{colorModel:ti}))},{name:tv,slot:"gradientPicker",overridesResolver:(n,o)=>o.gradientPicker})(()=>({"&&":{width:"100%"}})),tb=(0,A.ZP)(function(n){return O.createElement(re,u({},n,{colorModel:tl}))},{name:tv,slot:"gradientPicker",overridesResolver:(n,o)=>o.gradientPicker})(()=>({"&&":{width:"100%"}})),tS=(0,A.ZP)(J.Z,{name:tv,slot:"colorTextInput",overridesResolver:(n,o)=>o.colorTextInput})(({theme:n})=>({marginTop:n.spacing(1)})),tx=(0,A.ZP)("div",{name:tv,slot:"swatchContainer",overridesResolver:(n,o)=>o.swatchContainer})(({theme:n})=>({display:"flex",flexWrap:"wrap",gap:5,marginTop:n.spacing(1)}));function ColorPicker(n){let o=(0,E.Z)({props:n,name:tv}),{value:a,onChange:m,swatchColors:S,colorToHex:M=color_colorToHex,disableAlpha:T=!1,labels:A={},classes:N={}}=o,{textFieldPlaceholder:j='Ex: "#7cb5ec"'}=A,B=(0,O.useRef)(null);(0,O.useEffect)(()=>{B.current&&B.current!==document.activeElement&&(B.current.value=a)},[a]);let z=(null!=S?S:[]).map(n=>"string"==typeof n?{value:n}:n),P=M(a);return(0,l.jsxs)(l.Fragment,{children:[T?(0,l.jsx)(tk,{color:null!=P?P:"#000000",className:(0,R.W)([tu.gradientPicker,N.gradientPicker]),onChange:n=>{m(n,"gradient")}}):(0,l.jsx)(tb,{color:null!=P?P:"#000000",className:(0,R.W)([tu.gradientPicker,N.gradientPicker]),onChange:n=>{m(n,"gradient")}}),(0,l.jsx)(tS,{placeholder:j,variant:"outlined",size:"small",defaultValue:a||"",inputRef:B,spellCheck:!1,className:(0,R.W)([tu.colorTextInput,N.colorTextInput]),onChange:n=>{let o=n.target.value,a=M(o);a&&m(a,"text")},fullWidth:!0}),z.length>0&&(0,l.jsx)(tx,{className:(0,R.W)([tu.swatchContainer,N.swatchContainer]),children:z.map(n=>(0,l.jsx)(ty,{value:n.value,label:n.label,onClick:()=>{var o;m(null!==(o=n.value)&&void 0!==o?o:"","swatch")},active:n.value==a||!n.value&&!a||!!n.value&&!!P&&M(n.value)===P},n.value))})]})}let tw=(0,j.Un)("ColorPickerPopper",["root"]);function ColorPickerPopperBody({value:n,onCancel:o,onSave:a,swatchColors:m,labels:S={},ColorPickerProps:M}){let{removeColorButton:T="None",removeColorButtonTooltipTitle:A="",cancelButton:E="Cancel",saveButton:R="OK"}=S,[N,j]=(0,O.useState)(n);return(0,O.useEffect)(()=>{j(n)},[n]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ColorPicker,{swatchColors:m,value:N,onChange:n=>{j(n)},labels:S,...M}),(0,l.jsxs)(B.Z,{direction:"row",justifyContent:"space-between",sx:{mt:1},children:[(0,l.jsx)(z.Z,{title:A,arrow:!0,children:(0,l.jsx)(P.Z,{onClick:()=>{a("")},size:"small",children:T})}),(0,l.jsx)(P.Z,{onClick:o,size:"small",children:E}),(0,l.jsx)(P.Z,{onClick:()=>{a(N)},size:"small",children:R})]})]})}let tC=(0,j.jB)("ColorPickerPopper"),tM=(0,A.ZP)(H.Z,{name:tC,slot:"root",overridesResolver:(n,o)=>o.root})(({theme:n})=>({zIndex:n.zIndex.tooltip,width:235}));function ColorPickerPopper(n){let o=(0,E.Z)({props:n,name:tC}),{value:a,onSave:m,onCancel:S,swatchColors:M,ColorPickerProps:T,labels:A,classes:O={},sx:N,...j}=o;return(0,l.jsx)(tM,{transition:!0,placement:"bottom-start",...j,className:(0,R.W)([tw.root,O.root,j.className]),sx:N,children:({TransitionProps:n})=>(0,l.jsx)(_.Z,{...n,timeout:100,children:(0,l.jsx)("div",{children:(0,l.jsx)($.d,{mouseEvent:"onMouseDown",touchEvent:"onTouchStart",onClickAway:S,children:(0,l.jsx)(W.Z,{elevation:5,sx:{p:2.5,pb:1},children:(0,l.jsx)(ColorPickerPopperBody,{value:a||"",onSave:m,onCancel:S,swatchColors:M,ColorPickerProps:T,labels:A})})})})})})}var tT=a(2801);let tA=(0,j.Un)("MenuButtonColorPicker",["icon","colorIndicatorIcon","colorIndicatorIconDisabled"]),tE=(0,j.jB)("MenuButtonColorPicker"),tR=(0,A.ZP)("span",{name:tE,slot:"icon",overridesResolver:(n,o)=>o.icon})({fontSize:tT.b}),tO=(0,A.ZP)(N,{name:tE,slot:"colorIndicatorIcon",overridesResolver:(n,o)=>[o.colorIndicatorIcon,n.ownerState.disabled&&o.colorIndicatorIconDisabled]})(({theme:n,ownerState:o})=>({fontSize:tT.b,position:"absolute",...o.disabled&&{color:n.palette.action.disabled}}));function MenuButtonColorPicker(n){let o=(0,E.Z)({props:n,name:tE}),{value:a,onChange:m,swatchColors:S,labels:M,hideColorIndicator:T=!1,popperId:A,PopperProps:N,ColorPickerProps:j,classes:B={},...z}=o,[P,H]=(0,O.useState)(null),_={disabled:z.disabled},handleClose=()=>{H(null)},{IconComponent:$,children:W,...J}=z;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(tT.Z,{onClick:n=>{P?handleClose():H(n.currentTarget)},"aria-describedby":A,...J,children:null!=W?W:(0,l.jsxs)(l.Fragment,{children:[$&&(0,l.jsx)(tR,{as:$,ownerState:_,className:(0,R.W)([tA.icon,B.icon])}),!T&&a&&(0,l.jsx)(tO,{ownerState:_,className:(0,R.W)([tA.colorIndicatorIcon,B.colorIndicatorIcon,z.disabled&&[tA.colorIndicatorIconDisabled,B.colorIndicatorIconDisabled]]),style:z.disabled?void 0:{color:a}})]})}),(0,l.jsx)(ColorPickerPopper,{id:A,open:!!P,anchorEl:P,value:null!=a?a:"",onSave:n=>{m(n),handleClose()},onCancel:handleClose,swatchColors:S,ColorPickerProps:j,labels:M,...N})]})}function MenuButtonTextColor({IconComponent:n=M,tooltipLabel:o="Text color",defaultTextColor:a="",...S}){let A;let E=(0,m.Y)(),R=E?(0,T.a)(E.state,"textStyle"):[],O=!!(null==E?void 0:E.isActive("textStyle")),N=R.map(n=>n.color||a);O||N.push(a);let j=new Set(N).size;return A=1===j?N[0]:j>1?"":a,(0,l.jsx)(MenuButtonColorPicker,{IconComponent:n,tooltipLabel:o,value:A,onChange:n=>{null==E||E.chain().focus().setColor(n).run()},disabled:!(null==E?void 0:E.isEditable)||!E.can().setColor("#000"),...S,labels:{removeColorButton:"Reset",...S.labels}})}},300:function(n,o,a){"use strict";let l;a.d(o,{Z:function(){return MenuButtonTooltip}});var m=a(5893),S=a(6917),M=a(291),T=a(6351),A=a(94),E=a(824),R=a(512),O=a(3075);let N=(0,O.Un)("MenuButtonTooltip",["titleContainer","label","shortcutKey","contentWrapper"]),j=(0,O.jB)("MenuButtonTooltip"),B=(0,S.ZP)("div",{name:j,slot:"titleContainer",overridesResolver:(n,o)=>o.tooltip})(()=>({textAlign:"center"})),z=(0,S.ZP)("div",{name:j,slot:"label",overridesResolver:(n,o)=>o.label})(({theme:n})=>({fontSize:n.typography.pxToRem(13)})),P=(0,S.ZP)("span",{name:j,slot:"shortcutKey",overridesResolver:(n,o)=>o.shortcutKey})(({theme:n})=>({fontSize:n.typography.pxToRem(12),border:`1px solid ${(0,M.Fq)(n.palette.text.secondary,.2)}`,backgroundColor:(0,M.Fq)(n.palette.background.paper,.3),height:"19px",lineHeight:"19px",padding:"0 4px",minWidth:17,borderRadius:n.shape.borderRadius,display:"inline-block","&:not(:first-of-type)":{marginLeft:1}})),H=(0,S.ZP)("span",{name:j,slot:"contentWrapper",overridesResolver:(n,o)=>o.contentWrapper})({});function MenuButtonTooltip(n){let o=(0,T.Z)({props:n,name:j}),{label:a,shortcutKeys:S,placement:M="top",contentWrapperClassName:O,children:_,className:$,classes:W={},sx:J,...V}=o;return(0,m.jsx)(A.Z,{title:a||S&&S.length>0?(0,m.jsxs)(B,{className:(0,R.W)([N.titleContainer,W.titleContainer]),children:[(0,m.jsx)(z,{className:(0,R.W)([N.label,W.label]),children:a}),S&&S.length>0&&(0,m.jsx)(E.Z,{variant:"body2",component:"div",children:S.map((n,o)=>(0,m.jsx)(P,{className:(0,R.W)([N.shortcutKey,W.shortcutKey]),children:"mod"===n?(void 0===l&&(l=navigator.platform.includes("Mac")),l)?"âŒ˜":"Ctrl":n},o))})]}):"",placement:M,arrow:!0,sx:J,...V,children:(0,m.jsx)(H,{className:(0,R.W)([$,N.contentWrapper,W.contentWrapper,O]),children:_})})}},3263:function(n,o,a){"use strict";a.d(o,{Z:function(){return MenuControlsContainer}});var l=a(5893),m=a(6917),S=a(9258),M=a(6351),T=a(512),A=a(3075),E=a(3279),R=a.n(E),O=a(7294);let DebounceRender=class DebounceRender extends O.Component{constructor(n){var o,a;super(n),this.updateDebounced=R()(this.forceUpdate,null!==(o=n.wait)&&void 0!==o?o:170,null!==(a=n.options)&&void 0!==a?a:{leading:!0,trailing:!0,maxWait:300})}shouldComponentUpdate(){return this.updateDebounced(),!1}componentWillUnmount(){this.updateDebounced.cancel()}render(){return this.props.children}};let N=(0,A.Un)("MenuControlsContainer",["root"]),j=(0,A.jB)("MenuControlsContainer"),B=(0,m.ZP)(S.Z,{name:j,slot:"root",overridesResolver:(n,o)=>o.root})(({theme:n})=>({display:"flex",rowGap:n.spacing(.3),columnGap:n.spacing(.3),alignItems:"center",flexWrap:"wrap"}));function MenuControlsContainer(n){let o=(0,M.Z)({props:n,name:j}),{children:a,className:m,classes:S={},sx:A,debounced:E,DebounceProps:R,...O}=o,z=(0,l.jsx)(B,{...O,className:(0,T.W)([N.root,m,S.root]),sx:A,children:a});return E?(0,l.jsx)(DebounceRender,{...R,children:z}):z}},3822:function(n,o,a){"use strict";a.d(o,{Z:function(){return MenuSelectFontSize}});var l=a(5893),m=a(305),S=a(6917),M=a(6351),T=a(3631),A=a(512),E=a(5441),R=a(3075),O=a(2103),N=a(2801),j=a(6521),B=a(7884),z=a(3188),P=a(6744),H=a(7294),_=a(300);let $=(0,R.Un)("MenuSelect",["root","tooltip"]),W=(0,R.jB)("MenuSelect"),J=(0,S.ZP)(j.Z,{name:W,slot:"root",overridesResolver:(n,o)=>o.root})(({theme:n})=>({[`&:not(:hover):not(.${B.Z.focused}) .${B.Z.notchedOutline}`]:{borderWidth:0},[`& .${z.Z.root}`]:{color:n.palette.action.active},[`&.${P.Z.disabled} .${z.Z.root}`]:{color:n.palette.action.disabled},[`& .${P.Z.select}`]:{paddingTop:"3px",paddingBottom:"3px",fontSize:"0.9em"},[`&&& .${P.Z.select}`]:{paddingLeft:n.spacing(1),paddingRight:n.spacing(3)},[`& .${P.Z.icon}`]:{right:1}})),V=(0,S.ZP)(_.Z,{name:W,slot:"tooltip",overridesResolver:(n,o)=>o.tooltip})({display:"inline-flex"}),Z=(0,R.Un)("MenuSelectFontSize",["root","selectInput","icon"]),G=(0,R.jB)("MenuSelectFontSize"),te=(0,S.ZP)(function(n){let o=(0,M.Z)({props:n,name:W}),{tooltipTitle:a,classes:m={},sx:S,...T}=o,[E,R]=(0,H.useState)(!1),O=(0,l.jsx)(J,{margin:"none",variant:"outlined",size:"small",...T,onMouseEnter:(...n)=>{var o;R(!0),null===(o=T.onMouseEnter)||void 0===o||o.call(T,...n)},onMouseLeave:(...n)=>{var o;R(!1),null===(o=T.onMouseLeave)||void 0===o||o.call(T,...n)},onClick:(...n)=>{var o;R(!1),null===(o=T.onClick)||void 0===o||o.call(T,...n)},onOpen:(...n)=>{var o;R(!1),null===(o=T.onOpen)||void 0===o||o.call(T,...n)},MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},...T.MenuProps},className:(0,A.W)([$.root,m.root,T.className]),sx:S});return a?(0,l.jsx)(V,{label:a,open:E,className:(0,A.W)([$.tooltip,m.tooltip]),children:O}):O},{name:G,slot:"root",overridesResolver:(n,o)=>o.root})(()=>({[`& .${Z.selectInput}`]:{width:17,display:"flex",alignItems:"center"}})),tn=(0,S.ZP)(m.Z,{name:G,slot:"icon",overridesResolver:(n,o)=>o.icon})(()=>({fontSize:N.b})),to=["8px","9px","10px","11px","12px","14px","16px","18px","24px","30px","36px","48px","60px","72px","96px"];function stripPxFromValue(n){return n.replace("px","")}let ti="MULTIPLE";function MenuSelectFontSize(n){var o;let a;let m=(0,M.Z)({props:n,name:G}),{sizeOptions:S,options:R=null!=S?S:to,unsetOptionContent:N,unsetOptionLabel:j=null!=N?N:"Default",emptyValue:B,emptyLabel:z=B,hideUnsetOption:P=!1,classes:H={},sx:_,...$}=m,W=(0,E.Y)(),J=(null!=R?R:[]).map(n=>"string"==typeof n?{value:n}:n),V=W?(0,O.a)(W.state,"textStyle"):[],tl=!!(null==W?void 0:W.isActive("textStyle")),tc=V.map(n=>{var o;return null!==(o=n.fontSize)&&void 0!==o?o:""});tl||tc.push("");let tu=new Set(tc).size;return a=1===tu?tc[0]:tu>1?ti:"",(0,l.jsxs)(te,{onChange:n=>{let o=n.target.value;o?null==W||W.chain().setFontSize(o).focus().run():null==W||W.chain().unsetFontSize().focus().run()},disabled:!(null==W?void 0:W.isEditable)||!W.can().setFontSize("12px"),renderValue:n=>n&&n!==ti?stripPxFromValue(n):null!=z?z:(0,l.jsx)(tn,{className:(0,A.W)([Z.icon,H.icon])}),displayEmpty:!0,"aria-label":"Font sizes",tooltipTitle:"Font size",...$,value:a||"",inputProps:{...$.inputProps,className:(0,A.W)([Z.selectInput,H.selectInput,null===(o=$.inputProps)||void 0===o?void 0:o.className])},className:(0,A.W)([Z.root,H.root,$.className]),sx:_,children:[!P&&(0,l.jsx)(T.Z,{value:"",children:j}),(0,l.jsx)(T.Z,{style:{display:"none"},value:ti}),J.map(n=>{var o;return(0,l.jsx)(T.Z,{value:n.value,children:null!==(o=n.label)&&void 0!==o?o:stripPxFromValue(n.value)},n.value)})]})}},3075:function(n,o,a){"use strict";function getUtilityComponentName(n){return`MuiTiptap-${n}`}function getUtilityClasses(n,o){let a={};return o.forEach(o=>{a[o]=`${getUtilityComponentName(n)}-${o}`}),a}a.d(o,{Un:function(){return getUtilityClasses},jB:function(){return getUtilityComponentName}}),a(7557)},2103:function(n,o,a){"use strict";a.d(o,{a:function(){return getAttributesForEachSelected}});var l=a(5865);function getAttributesForEachSelected(n,o){let a=(0,l.HM)("string"==typeof o?o:o.name,n.schema);return"node"===a?function(n,o){let a=(0,l.jo)(o,n.schema),{from:m,to:S}=n.selection,M=[];return n.doc.nodesBetween(m,S,n=>{M.push(n)}),M.reverse().filter(n=>n.type.name===a.name).map(n=>({...n.attrs}))}(n,o):"mark"===a?function(n,o){let a=(0,l.TP)(o,n.schema),{from:m,to:S,empty:M}=n.selection,T=[];return M?(n.storedMarks&&T.push(...n.storedMarks),T.push(...n.selection.$head.marks())):n.doc.nodesBetween(m,S,n=>{T.push(...n.marks)}),T.filter(n=>n.type.name===a.name).map(n=>({...n.attrs}))}(n,o):[]}},83:function(n,o,a){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=a(7294),m="function"==typeof Object.is?Object.is:function(n,o){return n===o&&(0!==n||1/n==1/o)||n!=n&&o!=o},S=l.useState,M=l.useEffect,T=l.useLayoutEffect,A=l.useDebugValue;function checkIfSnapshotChanged(n){var o=n.getSnapshot;n=n.value;try{var a=o();return!m(n,a)}catch(n){return!0}}var E="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(n,o){return o()}:function(n,o){var a=o(),l=S({inst:{value:a,getSnapshot:o}}),m=l[0].inst,E=l[1];return T(function(){m.value=a,m.getSnapshot=o,checkIfSnapshotChanged(m)&&E({inst:m})},[n,a,o]),M(function(){return checkIfSnapshotChanged(m)&&E({inst:m}),n(function(){checkIfSnapshotChanged(m)&&E({inst:m})})},[n]),A(a),a};o.useSyncExternalStore=void 0!==l.useSyncExternalStore?l.useSyncExternalStore:E},6251:function(n,o,a){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=a(7294),m=a(1688),S="function"==typeof Object.is?Object.is:function(n,o){return n===o&&(0!==n||1/n==1/o)||n!=n&&o!=o},M=m.useSyncExternalStore,T=l.useRef,A=l.useEffect,E=l.useMemo,R=l.useDebugValue;o.useSyncExternalStoreWithSelector=function(n,o,a,l,m){var O=T(null);if(null===O.current){var N={hasValue:!1,value:null};O.current=N}else N=O.current;var j=M(n,(O=E(function(){function memoizedSelector(o){if(!T){if(T=!0,n=o,o=l(o),void 0!==m&&N.hasValue){var a=N.value;if(m(a,o))return M=a}return M=o}if(a=M,S(n,o))return a;var A=l(o);return void 0!==m&&m(a,A)?(n=o,a):(n=o,M=A)}var n,M,T=!1,A=void 0===a?null:a;return[function(){return memoizedSelector(o())},null===A?void 0:function(){return memoizedSelector(A())}]},[o,a,l,m]))[0],O[1]);return A(function(){N.hasValue=!0,N.value=j},[j]),R(j),j}},1688:function(n,o,a){"use strict";n.exports=a(83)},2798:function(n,o,a){"use strict";n.exports=a(6251)},6351:function(n,o,a){"use strict";a.d(o,{Z:function(){return useThemeProps}});var l=a(4286),m=a(6292),S=a(9049);function useThemeProps({props:n,name:o}){return(0,l.Z)({props:n,name:o,defaultTheme:m.Z,themeId:S.Z})}},353:function(n,o,a){"use strict";a.d(o,{Z:function(){return l}});var l=a(3621).Il},5740:function(n,o,a){"use strict";a.d(o,{Z:function(){return l}}),a(3621);var l=a(5865).hj.create({name:"fontSize",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:n=>n.style.fontSize,renderHTML:n=>n.fontSize?{style:`font-size: ${n.fontSize}`}:{}}}}]},addCommands:()=>({setFontSize:n=>({chain:o})=>o().setMark("textStyle",{fontSize:n}).run(),unsetFontSize:()=>({chain:n})=>n().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()})})},5915:function(n,o,a){"use strict";a.d(o,{rU:function(){return t4},ZP:function(){return t6}});var l=a(5865);let m="numeric",S="ascii",M="alpha",T="asciinumeric",A="alphanumeric",E="domain",R="emoji",O="whitespace";function addToGroups(n,o,a){for(let l in o[m]&&(o[T]=!0,o[A]=!0),o[S]&&(o[T]=!0,o[M]=!0),o[T]&&(o[A]=!0),o[M]&&(o[A]=!0),o[A]&&(o[E]=!0),o[R]&&(o[E]=!0),o){let o=(l in a||(a[l]=[]),a[l]);0>o.indexOf(n)&&o.push(n)}}function State(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}State.groups={},State.prototype={accepts(){return!!this.t},go(n){let o=this.j[n];if(o)return o;for(let o=0;o<this.jr.length;o++){let a=this.jr[o][0],l=this.jr[o][1];if(l&&a.test(n))return l}return this.jd},has(n,o=!1){return o?n in this.j:!!this.go(n)},ta(n,o,a,l){for(let m=0;m<n.length;m++)this.tt(n[m],o,a,l)},tr(n,o,a,l){let m;return l=l||State.groups,o&&o.j?m=o:(m=new State(o),a&&l&&addToGroups(o,a,l)),this.jr.push([n,m]),m},ts(n,o,a,l){let m=this,S=n.length;if(!S)return m;for(let o=0;o<S-1;o++)m=m.tt(n[o]);return m.tt(n[S-1],o,a,l)},tt(n,o,a,l){if(l=l||State.groups,o&&o.j)return this.j[n]=o,o;let m,S=this.go(n);if(S?(Object.assign((m=new State).j,S.j),m.jr.push.apply(m.jr,S.jr),m.jd=S.jd,m.t=S.t):m=new State,o){if(l){if(m.t&&"string"==typeof m.t){let n=Object.assign(function(n,o){let a={};for(let l in o)o[l].indexOf(n)>=0&&(a[l]=!0);return a}(m.t,l),a);addToGroups(o,n,l)}else a&&addToGroups(o,a,l)}m.t=o}return this.j[n]=m,m}};let ta=(n,o,a,l,m)=>n.ta(o,a,l,m),tr=(n,o,a,l,m)=>n.tr(o,a,l,m),ts=(n,o,a,l,m)=>n.ts(o,a,l,m),tt=(n,o,a,l,m)=>n.tt(o,a,l,m),N="WORD",j="UWORD",B="ASCIINUMERICAL",z="ALPHANUMERICAL",P="LOCALHOST",H="UTLD",_="SCHEME",$="SLASH_SCHEME",W="OPENBRACE",J="CLOSEBRACE",V="OPENBRACKET",Z="CLOSEBRACKET",G="OPENPAREN",te="CLOSEPAREN",tn="OPENANGLEBRACKET",to="CLOSEANGLEBRACKET",ti="FULLWIDTHLEFTPAREN",tl="FULLWIDTHRIGHTPAREN",tc="LEFTCORNERBRACKET",tu="RIGHTCORNERBRACKET",tp="LEFTWHITECORNERBRACKET",th="RIGHTWHITECORNERBRACKET",td="FULLWIDTHLESSTHAN",tf="FULLWIDTHGREATERTHAN",tm="AMPERSAND",tg="APOSTROPHE",ty="ASTERISK",tv="BACKSLASH",tk="BACKTICK",tb="CARET",tS="COLON",tx="COMMA",tw="DOLLAR",tC="EQUALS",tM="EXCLAMATION",tT="HYPHEN",tA="PERCENT",tE="PIPE",tR="PLUS",tO="POUND",tI="QUERY",tN="QUOTE",tj="FULLWIDTHMIDDLEDOT",tL="SEMI",tB="SLASH",tz="TILDE",tP="UNDERSCORE",tF="EMOJI";var tH=Object.freeze({__proto__:null,ALPHANUMERICAL:z,AMPERSAND:tm,APOSTROPHE:tg,ASCIINUMERICAL:B,ASTERISK:ty,AT:"AT",BACKSLASH:tv,BACKTICK:tk,CARET:tb,CLOSEANGLEBRACKET:to,CLOSEBRACE:J,CLOSEBRACKET:Z,CLOSEPAREN:te,COLON:tS,COMMA:tx,DOLLAR:tw,DOT:"DOT",EMOJI:tF,EQUALS:tC,EXCLAMATION:tM,FULLWIDTHGREATERTHAN:tf,FULLWIDTHLEFTPAREN:ti,FULLWIDTHLESSTHAN:td,FULLWIDTHMIDDLEDOT:tj,FULLWIDTHRIGHTPAREN:tl,HYPHEN:tT,LEFTCORNERBRACKET:tc,LEFTWHITECORNERBRACKET:tp,LOCALHOST:P,NL:"NL",NUM:"NUM",OPENANGLEBRACKET:tn,OPENBRACE:W,OPENBRACKET:V,OPENPAREN:G,PERCENT:tA,PIPE:tE,PLUS:tR,POUND:tO,QUERY:tI,QUOTE:tN,RIGHTCORNERBRACKET:tu,RIGHTWHITECORNERBRACKET:th,SCHEME:_,SEMI:tL,SLASH:tB,SLASH_SCHEME:$,SYM:"SYM",TILDE:tz,TLD:"TLD",UNDERSCORE:tP,UTLD:H,UWORD:j,WORD:N,WS:"WS"});let tD=/[a-z]/,t_=/\p{L}/u,t$=/\p{Emoji}/u,tW=/\d/,tU=/\s/,tq=null,tJ=null;function run$1(n,o){let a=function(n){let o=[],a=n.length,l=0;for(;l<a;){let m,S=n.charCodeAt(l),M=S<55296||S>56319||l+1===a||(m=n.charCodeAt(l+1))<56320||m>57343?n[l]:n.slice(l,l+2);o.push(M),l+=M.length}return o}(o.replace(/[A-Z]/g,n=>n.toLowerCase())),l=a.length,m=[],S=0,M=0;for(;M<l;){let T=n,A=null,E=0,R=null,O=-1,N=-1;for(;M<l&&(A=T.go(a[M]));)(T=A).accepts()?(O=0,N=0,R=T):O>=0&&(O+=a[M].length,N++),E+=a[M].length,S+=a[M].length,M++;S-=O,M-=N,E-=O,m.push({t:R.t,v:o.slice(S-E,S),s:S-E,e:S})}return m}function fastts(n,o,a,l,m){let S;let M=o.length;for(let a=0;a<M-1;a++){let M=o[a];n.j[M]?S=n.j[M]:((S=new State(l)).jr=m.slice(),n.j[M]=S),n=S}return(S=new State(a)).jr=m.slice(),n.j[o[M-1]]=S,S}function decodeTlds(n){let o=[],a=[],l=0;for(;l<n.length;){let m=0;for(;"0123456789".indexOf(n[l+m])>=0;)m++;if(m>0){o.push(a.join(""));for(let o=parseInt(n.substring(l,l+m),10);o>0;o--)a.pop();l+=m}else a.push(n[l]),l++}return o}let tK={defaultProtocol:"http",events:null,format:noop,formatHref:noop,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Options(n,o=null){let a=Object.assign({},tK);n&&(a=Object.assign(a,n instanceof Options?n.o:n));let l=a.ignoreTags,m=[];for(let n=0;n<l.length;n++)m.push(l[n].toUpperCase());this.o=a,o&&(this.defaultRender=o),this.ignoreTags=m}function noop(n){return n}function MultiToken(n,o){this.t="token",this.v=n,this.tk=o}function createTokenClass(n,o){let Token=class Token extends MultiToken{constructor(o,a){super(o,a),this.t=n}};for(let n in o)Token.prototype[n]=o[n];return Token.t=n,Token}Options.prototype={o:tK,ignoreTags:[],defaultRender:n=>n,check(n){return this.get("validate",n.toString(),n)},get(n,o,a){let l=null!=o,m=this.o[n];return m&&("object"==typeof m?"function"==typeof(m=a.t in m?m[a.t]:tK[n])&&l&&(m=m(o,a)):"function"==typeof m&&l&&(m=m(o,a.t,a))),m},getObj(n,o,a){let l=this.o[n];return"function"==typeof l&&null!=o&&(l=l(o,a.t,a)),l},render(n){let o=n.render(this),a=this.get("render",null,n)||this.defaultRender;return a(o,n.t,n)}},MultiToken.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){let o=this.toString(),a=n.get("truncate",o,this),l=n.get("format",o,this);return a&&l.length>a?l.substring(0,a)+"â€¦":l},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=tK.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){let o=this.toHref(n.get("defaultProtocol")),a=n.get("formatHref",o,this),l=n.get("tagName",o,this),m=this.toFormattedString(n),S={},M=n.get("className",o,this),T=n.get("target",o,this),A=n.get("rel",o,this),E=n.getObj("attributes",o,this),R=n.getObj("events",o,this);return S.href=a,M&&(S.class=M),T&&(S.target=T),A&&(S.rel=A),E&&Object.assign(S,E),{tagName:l,attributes:S,content:m,eventListeners:R}}};let tV=createTokenClass("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),tZ=createTokenClass("text"),tY=createTokenClass("nl"),tG=createTokenClass("url",{isLink:!0,toHref(n=tK.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){let n=this.tk;return n.length>=2&&n[0].t!==P&&n[1].t===tS}}),makeState=n=>new State(n);function initMultiToken(n,o,a){let l=a[0].s,m=a[a.length-1].e,S=o.slice(l,m);return new n(S,a)}let tQ="undefined"!=typeof console&&console&&console.warn||(()=>{}),tX={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function registerCustomProtocol(n,o=!1){if(tX.initialized&&tQ(`linkifyjs: already initialized - will not register custom scheme "${n}" until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);tX.customSchemes.push([n,o])}function tokenize(n){return tX.initialized||function(){tX.scanner=function(n=[]){let o={};State.groups=o;let a=new State;null==tq&&(tq=decodeTlds("aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5m\xf6gensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2")),null==tJ&&(tJ=decodeTlds("ÎµÎ»1Ï…2Ð±Ð³1ÐµÐ»3Ð´ÐµÑ‚Ð¸4ÐµÑŽ2ÐºÐ°Ñ‚Ð¾Ð»Ð¸Ðº6Ð¾Ð¼3Ð¼ÐºÐ´2Ð¾Ð½1ÑÐºÐ²Ð°6Ð¾Ð½Ð»Ð°Ð¹Ð½5Ñ€Ð³3Ñ€ÑƒÑ2Ñ„2ÑÐ°Ð¹Ñ‚3Ñ€Ð±3ÑƒÐºÑ€3Ò›Ð°Ð·3Õ°Õ¡Õµ3×™×©×¨××œ5×§×•×3Ø§Ø¨ÙˆØ¸Ø¨ÙŠ5Ø±Ø§Ù…ÙƒÙˆ5Ù„Ø§Ø±Ø¯Ù†4Ø¨Ø­Ø±ÙŠÙ†5Ø¬Ø²Ø§Ø¦Ø±5Ø³Ø¹ÙˆØ¯ÙŠØ©6Ø¹Ù„ÙŠØ§Ù†5Ù…ØºØ±Ø¨5Ù…Ø§Ø±Ø§Øª5ÛŒØ±Ø§Ù†5Ø¨Ø§Ø±Øª2Ø²Ø§Ø±4ÙŠØªÙƒ3Ú¾Ø§Ø±Øª5ØªÙˆÙ†Ø³4Ø³ÙˆØ¯Ø§Ù†3Ø±ÙŠØ©5Ø´Ø¨ÙƒØ©4Ø¹Ø±Ø§Ù‚2Ø¨2Ù…Ø§Ù†4ÙÙ„Ø³Ø·ÙŠÙ†6Ù‚Ø·Ø±3ÙƒØ§Ø«ÙˆÙ„ÙŠÙƒ6ÙˆÙ…3Ù…ØµØ±2Ù„ÙŠØ³ÙŠØ§5ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§7Ù‚Ø¹4Ù‡Ù…Ø±Ø§Ù‡5Ù¾Ø§Ú©Ø³ØªØ§Ù†7Ú€Ø§Ø±Øª4à¤•à¥‰à¤®3à¤¨à¥‡à¤Ÿ3à¤­à¤¾à¤°à¤¤0à¤®à¥3à¥‹à¤¤5à¤¸à¤‚à¤—à¤ à¤¨5à¦¬à¦¾à¦‚à¦²à¦¾5à¦­à¦¾à¦°à¦¤2à§°à¦¤4à¨­à¨¾à¨°à¨¤4àª­àª¾àª°àª¤4à¬­à¬¾à¬°à¬¤4à®‡à®¨à¯à®¤à®¿à®¯à®¾6à®²à®™à¯à®•à¯ˆ6à®šà®¿à®™à¯à®•à®ªà¯à®ªà¯‚à®°à¯11à°­à°¾à°°à°¤à±5à²­à²¾à²°à²¤4à´­à´¾à´°à´¤à´‚5à¶½à¶‚à¶šà·4à¸„à¸­à¸¡3à¹„à¸—à¸¢3àº¥àº²àº§3áƒ’áƒ”2ã¿ã‚“ãª3ã‚¢ãƒžã‚¾ãƒ³4ã‚¯ãƒ©ã‚¦ãƒ‰4ã‚°ãƒ¼ã‚°ãƒ«4ã‚³ãƒ 2ã‚¹ãƒˆã‚¢3ã‚»ãƒ¼ãƒ«3ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³6ãƒã‚¤ãƒ³ãƒˆ4ä¸–ç•Œ2ä¸­ä¿¡1å›½1åœ‹1æ–‡ç½‘3äºšé©¬é€Š3ä¼ä¸š2ä½›å±±2ä¿¡æ¯2å¥åº·2å…«å¦2å…¬å¸1ç›Š2å°æ¹¾1ç£2å•†åŸŽ1åº—1æ ‡2å˜‰é‡Œ0å¤§é…’åº—5åœ¨çº¿2å¤§æ‹¿2å¤©ä¸»æ•™3å¨±ä¹2å®¶é›»2å¹¿ä¸œ2å¾®åš2æ…ˆå–„2æˆ‘çˆ±ä½ 3æ‰‹æœº2æ‹›è˜2æ”¿åŠ¡1åºœ2æ–°åŠ å¡2é—»2æ—¶å°š2æ›¸ç±2æœºæž„2æ·¡é©¬é”¡3æ¸¸æˆ2æ¾³é–€2ç‚¹çœ‹2ç§»åŠ¨2ç»„ç»‡æœºæž„4ç½‘å€1åº—1ç«™1ç»œ2è”é€š2è°·æ­Œ2è´­ç‰©2é€šè²©2é›†å›¢2é›»è¨Šç›ˆç§‘4é£žåˆ©æµ¦3é£Ÿå“2é¤åŽ…2é¦™æ ¼é‡Œæ‹‰3æ¸¯2ë‹·ë„·1ì»´2ì‚¼ì„±2í•œêµ­2")),tt(a,"'",tg),tt(a,"{",W),tt(a,"}",J),tt(a,"[",V),tt(a,"]",Z),tt(a,"(",G),tt(a,")",te),tt(a,"<",tn),tt(a,">",to),tt(a,"ï¼ˆ",ti),tt(a,"ï¼‰",tl),tt(a,"ã€Œ",tc),tt(a,"ã€",tu),tt(a,"ã€Ž",tp),tt(a,"ã€",th),tt(a,"ï¼œ",td),tt(a,"ï¼ž",tf),tt(a,"&",tm),tt(a,"*",ty),tt(a,"@","AT"),tt(a,"`",tk),tt(a,"^",tb),tt(a,":",tS),tt(a,",",tx),tt(a,"$",tw),tt(a,".","DOT"),tt(a,"=",tC),tt(a,"!",tM),tt(a,"-",tT),tt(a,"%",tA),tt(a,"|",tE),tt(a,"+",tR),tt(a,"#",tO),tt(a,"?",tI),tt(a,'"',tN),tt(a,"/",tB),tt(a,";",tL),tt(a,"~",tz),tt(a,"_",tP),tt(a,"\\",tv),tt(a,"ãƒ»",tj);let l=tr(a,tW,"NUM",{[m]:!0});tr(l,tW,l);let tK=tr(l,tD,B,{[T]:!0}),tV=tr(l,t_,z,{[A]:!0}),tZ=tr(a,tD,N,{[S]:!0});tr(tZ,tW,tK),tr(tZ,tD,tZ),tr(tK,tW,tK),tr(tK,tD,tK);let tY=tr(a,t_,j,{[M]:!0});tr(tY,tD),tr(tY,tW,tV),tr(tY,t_,tY),tr(tV,tW,tV),tr(tV,tD),tr(tV,t_,tV);let tG=tt(a,"\n","NL",{[O]:!0}),tQ=tt(a,"\r","WS",{[O]:!0}),tX=tr(a,tU,"WS",{[O]:!0});tt(a,"ï¿¼",tX),tt(tQ,"\n",tG),tt(tQ,"ï¿¼",tX),tr(tQ,tU,tX),tt(tX,"\r"),tt(tX,"\n"),tr(tX,tU,tX),tt(tX,"ï¿¼",tX);let t0=tr(a,t$,tF,{[R]:!0});tt(t0,"#"),tr(t0,t$,t0),tt(t0,"ï¸",t0);let t1=tt(t0,"â€");tt(t1,"#"),tr(t1,t$,t0);let t2=[[tD,tZ],[tW,tK]],t3=[[tD,null],[t_,tY],[tW,tV]];for(let n=0;n<tq.length;n++)fastts(a,tq[n],"TLD",N,t2);for(let n=0;n<tJ.length;n++)fastts(a,tJ[n],H,j,t3);addToGroups("TLD",{tld:!0,ascii:!0},o),addToGroups(H,{utld:!0,alpha:!0},o),fastts(a,"file",_,N,t2),fastts(a,"mailto",_,N,t2),fastts(a,"http",$,N,t2),fastts(a,"https",$,N,t2),fastts(a,"ftp",$,N,t2),fastts(a,"ftps",$,N,t2),addToGroups(_,{scheme:!0,ascii:!0},o),addToGroups($,{slashscheme:!0,ascii:!0},o),n=n.sort((n,o)=>n[0]>o[0]?1:-1);for(let o=0;o<n.length;o++){let l=n[o][0],M=n[o][1],A=M?{scheme:!0}:{slashscheme:!0};l.indexOf("-")>=0?A[E]=!0:tD.test(l)?tW.test(l)?A[T]=!0:A[S]=!0:A[m]=!0,ts(a,l,l,A)}return ts(a,"localhost",P,{ascii:!0}),a.jd=new State("SYM"),{start:a,tokens:Object.assign({groups:o},tH)}}(tX.customSchemes);for(let n=0;n<tX.tokenQueue.length;n++)tX.tokenQueue[n][1]({scanner:tX.scanner});tX.parser=function({groups:n}){let o=n.domain.concat([tm,ty,"AT",tv,tk,tb,tw,tC,tT,"NUM",tA,tE,tR,tO,tB,"SYM",tz,tP]),a=[tg,tS,tx,"DOT",tM,tA,tI,tN,tL,tn,to,W,J,Z,V,G,te,ti,tl,tc,tu,tp,th,td,tf],l=[tm,tg,ty,tv,tk,tb,tw,tC,tT,W,J,tA,tE,tR,tO,tI,tB,"SYM",tz,tP],m=makeState(),S=tt(m,tz);ta(S,l,S),ta(S,n.domain,S);let M=makeState(),T=makeState(),A=makeState();ta(m,n.domain,M),ta(m,n.scheme,T),ta(m,n.slashscheme,A),ta(M,l,S),ta(M,n.domain,M);let E=tt(M,"AT");tt(S,"AT",E),tt(T,"AT",E),tt(A,"AT",E);let R=tt(S,"DOT");ta(R,l,S),ta(R,n.domain,S);let O=makeState();ta(E,n.domain,O),ta(O,n.domain,O);let N=tt(O,"DOT");ta(N,n.domain,O);let j=makeState(tV);ta(N,n.tld,j),ta(N,n.utld,j),tt(E,P,j);let B=tt(O,tT);tt(B,tT,B),ta(B,n.domain,O),ta(j,n.domain,O),tt(j,"DOT",N),tt(j,tT,B);let z=tt(j,tS);ta(z,n.numeric,tV);let H=tt(M,tT),_=tt(M,"DOT");tt(H,tT,H),ta(H,n.domain,M),ta(_,l,S),ta(_,n.domain,M);let $=makeState(tG);ta(_,n.tld,$),ta(_,n.utld,$),ta($,n.domain,M),ta($,l,S),tt($,"DOT",_),tt($,tT,H),tt($,"AT",E);let tj=tt($,tS),tF=makeState(tG);ta(tj,n.numeric,tF);let tD=makeState(tG),t_=makeState();ta(tD,o,tD),ta(tD,a,t_),ta(t_,o,tD),ta(t_,a,t_),tt($,tB,tD),tt(tF,tB,tD);let t$=tt(T,tS),tW=tt(A,tS),tU=tt(tW,tB),tq=tt(tU,tB);ta(T,n.domain,M),tt(T,"DOT",_),tt(T,tT,H),ta(A,n.domain,M),tt(A,"DOT",_),tt(A,tT,H),ta(t$,n.domain,tD),tt(t$,tB,tD),tt(t$,tI,tD),ta(tq,n.domain,tD),ta(tq,o,tD),tt(tq,tB,tD);let tJ=[[W,J],[V,Z],[G,te],[tn,to],[ti,tl],[tc,tu],[tp,th],[td,tf]];for(let n=0;n<tJ.length;n++){let[l,m]=tJ[n],S=tt(tD,l);tt(t_,l,S),tt(S,m,tD);let M=makeState(tG);ta(S,o,M);let T=makeState();ta(S,a),ta(M,o,M),ta(M,a,T),ta(T,o,M),ta(T,a,T),tt(M,m,tD),tt(T,m,tD)}return tt(m,P,$),tt(m,"NL",tY),{start:m,tokens:tH}}(tX.scanner.tokens);for(let n=0;n<tX.pluginQueue.length;n++)tX.pluginQueue[n][1]({scanner:tX.scanner,parser:tX.parser});tX.initialized=!0}(),function(n,o,a){let l=a.length,m=0,S=[],M=[];for(;m<l;){let T=n,A=null,E=null,R=0,O=null,N=-1;for(;m<l&&!(A=T.go(a[m].t));)M.push(a[m++]);for(;m<l&&(E=A||T.go(a[m].t));)A=null,(T=E).accepts()?(N=0,O=T):N>=0&&N++,m++,R++;if(N<0)(m-=R)<l&&(M.push(a[m]),m++);else{M.length>0&&(S.push(initMultiToken(tZ,o,M)),M=[]),m-=N,R-=N;let n=O.t,l=a.slice(m-R,m);S.push(initMultiToken(n,o,l))}}return M.length>0&&S.push(initMultiToken(tZ,o,M)),S}(tX.parser.start,n,run$1(tX.scanner.start,n))}function find(n,o=null,a=null){if(o&&"object"==typeof o){if(a)throw Error(`linkifyjs: Invalid link type ${o}; must be a string`);a=o,o=null}let l=new Options(a),m=tokenize(n),S=[];for(let n=0;n<m.length;n++){let a=m[n];a.isLink&&(!o||a.t===o)&&l.check(a)&&S.push(a.toFormattedObject(l))}return S}tokenize.scan=run$1;var t0=a(2376),t1="[\x00- \xa0áš€á Žâ€€-\u2029âŸã€€]",t2=new RegExp(t1),t3=RegExp(`${t1}$`),t5=RegExp(t1,"g");function isAllowedUri(n,o){let a=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return o&&o.forEach(n=>{let o="string"==typeof n?n:n.scheme;o&&a.push(o)}),!n||n.replace(t5,"").match(RegExp(`^(?:(?:${a.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var t4=l.vc.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if("string"==typeof n){registerCustomProtocol(n);return}registerCustomProtocol(n.scheme,n.optionalSlashes)})},onDestroy(){State.groups={},tX.scanner=null,tX.parser=null,tX.tokenQueue=[],tX.pluginQueue=[],tX.customSchemes=[],tX.initialized=!1},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,o)=>!!isAllowedUri(n,o.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}),addAttributes(){return{href:{default:null,parseHTML:n=>n.getAttribute("href")},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{let o=n.getAttribute("href");return!!(o&&this.options.isAllowedUri(o,{defaultValidate:n=>!!isAllowedUri(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol}))&&null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:n=>!!isAllowedUri(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",(0,l.P1)(this.options.HTMLAttributes,n),0]:["a",(0,l.P1)(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:o})=>{let{href:a}=n;return!!this.options.isAllowedUri(a,{defaultValidate:n=>!!isAllowedUri(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})&&o().setMark(this.name,n).setMeta("preventAutolink",!0).run()},toggleLink:n=>({chain:o})=>{let{href:a}=n||{};return(!a||!!this.options.isAllowedUri(a,{defaultValidate:n=>!!isAllowedUri(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol}))&&o().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[(0,l.K9)({find:n=>{let o=[];if(n){let{protocols:a,defaultProtocol:l}=this.options,m=find(n).filter(n=>n.isLink&&this.options.isAllowedUri(n.value,{defaultValidate:n=>!!isAllowedUri(n,a),protocols:a,defaultProtocol:l}));m.length&&m.forEach(n=>o.push({text:n.value,data:{href:n.href},index:n.start}))}return o},type:this.type,getAttributes:n=>{var o;return{href:null==(o=n.data)?void 0:o.href}}})]},addProseMirrorPlugins(){var n,o,a;let m=[],{protocols:S,defaultProtocol:M}=this.options;return this.options.autolink&&m.push((n={type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:n=>!!isAllowedUri(n,S),protocols:S,defaultProtocol:M}),shouldAutoLink:this.options.shouldAutoLink},new t0.Sy({key:new t0.H$("autolink"),appendTransaction:(o,a,m)=>{let S=o.some(n=>n.docChanged)&&!a.doc.eq(m.doc),M=o.some(n=>n.getMeta("preventAutolink"));if(!S||M)return;let{tr:T}=m,A=(0,l.XP)(a.doc,[...o]),E=(0,l.QC)(A);if(E.forEach(({newRange:o})=>{let a,S;let M=(0,l.b5)(m.doc,o,n=>n.isTextblock);if(M.length>1)a=M[0],S=m.doc.textBetween(a.pos,a.pos+a.node.nodeSize,void 0," ");else if(M.length){let n=m.doc.textBetween(o.from,o.to," "," ");if(!t3.test(n))return;a=M[0],S=m.doc.textBetween(a.pos,o.to,void 0," ")}if(a&&S){let o=S.split(t2).filter(Boolean);if(o.length<=0)return!1;let M=o[o.length-1],A=a.pos+S.lastIndexOf(M);if(!M)return!1;let E=tokenize(M).map(o=>o.toObject(n.defaultProtocol));if(!(1===E.length?E[0].isLink:3===E.length&&!!E[1].isLink&&["()","[]"].includes(E[0].value+E[2].value)))return!1;E.filter(n=>n.isLink).map(n=>({...n,from:A+n.start+1,to:A+n.end+1})).filter(n=>!m.schema.marks.code||!m.doc.rangeHasMark(n.from,n.to,m.schema.marks.code)).filter(o=>n.validate(o.value)).filter(o=>n.shouldAutoLink(o.value)).forEach(o=>{(0,l.tI)(o.from,o.to,m.doc).some(o=>o.mark.type===n.type)||T.addMark(o.from,o.to,n.type.create({href:o.href}))})}}),T.steps.length)return T}}))),!0===this.options.openOnClick&&m.push((o={type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection},new t0.Sy({key:new t0.H$("handleClickLink"),props:{handleClick:(n,a,m)=>{var S,M;if(0!==m.button||!n.editable)return!1;let T=null;if(m.target instanceof HTMLAnchorElement)T=m.target;else{let n=m.target,o=[];for(;"DIV"!==n.nodeName;)o.push(n),n=n.parentNode;T=o.find(n=>"A"===n.nodeName)}if(!T)return!1;let A=(0,l.u9)(n.state,o.type.name),E=null!=(S=null==T?void 0:T.href)?S:A.href,R=null!=(M=null==T?void 0:T.target)?M:A.target;return o.enableClickSelection&&o.editor.commands.extendMarkRange(o.type.name),!!T&&!!E&&(window.open(E,R),!0)}}}))),this.options.linkOnPaste&&m.push((a={editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type},new t0.Sy({key:new t0.H$("handlePasteLink"),props:{handlePaste:(n,o,l)=>{let{state:m}=n,{selection:S}=m,{empty:M}=S;if(M)return!1;let T="";l.content.forEach(n=>{T+=n.textContent});let A=find(T,{defaultProtocol:a.defaultProtocol}).find(n=>n.isLink&&n.value===T);return!!T&&!!A&&a.editor.commands.setMark(a.type,{href:A.href})}}}))),m}}),t6=t4},3237:function(n,o,a){"use strict";a.d(o,{Z:function(){return l}});var l=a(9273).Vm},3621:function(n,o,a){"use strict";a.d(o,{Il:function(){return M},pn:function(){return m}});var l=a(5865),mergeNestedSpanStyles=n=>{if(!n.children.length)return;let o=n.querySelectorAll("span");o&&o.forEach(n=>{var o,a;let l=n.getAttribute("style"),m=null==(a=null==(o=n.parentElement)?void 0:o.closest("span"))?void 0:a.getAttribute("style");n.setAttribute("style",`${m};${l}`)})},m=l.vc.create({name:"textStyle",priority:101,addOptions:()=>({HTMLAttributes:{},mergeNestedSpanStyles:!0}),parseHTML(){return[{tag:"span",consuming:!1,getAttrs:n=>{let o=n.hasAttribute("style");return!!o&&(this.options.mergeNestedSpanStyles&&mergeNestedSpanStyles(n),{})}}]},renderHTML({HTMLAttributes:n}){return["span",(0,l.P1)(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleTextStyle:n=>({commands:o})=>o.toggleMark(this.name,n),removeEmptyTextStyle:()=>({tr:n})=>{let{selection:o}=n;return n.doc.nodesBetween(o.from,o.to,(o,a)=>{if(o.isTextblock)return!0;o.marks.filter(n=>n.type===this.type).some(n=>Object.values(n.attrs).some(n=>!!n))||n.removeMark(a,a+o.nodeSize,this.type)}),!0}}}}),S=l.hj.create({name:"backgroundColor",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:n=>{var o;let a=n.getAttribute("style");if(a){let n=a.split(";").map(n=>n.trim()).filter(Boolean);for(let o=n.length-1;o>=0;o-=1){let a=n[o].split(":");if(a.length>=2){let n=a[0].trim().toLowerCase(),o=a.slice(1).join(":").trim();if("background-color"===n)return o.replace(/['"]+/g,"")}}}return null==(o=n.style.backgroundColor)?void 0:o.replace(/['"]+/g,"")},renderHTML:n=>n.backgroundColor?{style:`background-color: ${n.backgroundColor}`}:{}}}}]},addCommands:()=>({setBackgroundColor:n=>({chain:o})=>o().setMark("textStyle",{backgroundColor:n}).run(),unsetBackgroundColor:()=>({chain:n})=>n().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()})}),M=l.hj.create({name:"color",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:n=>{var o;let a=n.getAttribute("style");if(a){let n=a.split(";").map(n=>n.trim()).filter(Boolean);for(let o=n.length-1;o>=0;o-=1){let a=n[o].split(":");if(a.length>=2){let n=a[0].trim().toLowerCase(),o=a.slice(1).join(":").trim();if("color"===n)return o.replace(/['"]+/g,"")}}}return null==(o=n.style.color)?void 0:o.replace(/['"]+/g,"")},renderHTML:n=>n.color?{style:`color: ${n.color}`}:{}}}}]},addCommands:()=>({setColor:n=>({chain:o})=>o().setMark("textStyle",{color:n}).run(),unsetColor:()=>({chain:n})=>n().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()})}),T=l.hj.create({name:"fontFamily",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:n=>n.style.fontFamily,renderHTML:n=>n.fontFamily?{style:`font-family: ${n.fontFamily}`}:{}}}}]},addCommands:()=>({setFontFamily:n=>({chain:o})=>o().setMark("textStyle",{fontFamily:n}).run(),unsetFontFamily:()=>({chain:n})=>n().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()})}),A=l.hj.create({name:"fontSize",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:n=>n.style.fontSize,renderHTML:n=>n.fontSize?{style:`font-size: ${n.fontSize}`}:{}}}}]},addCommands:()=>({setFontSize:n=>({chain:o})=>o().setMark("textStyle",{fontSize:n}).run(),unsetFontSize:()=>({chain:n})=>n().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()})}),E=l.hj.create({name:"lineHeight",addOptions:()=>({types:["textStyle"]}),addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:n=>n.style.lineHeight,renderHTML:n=>n.lineHeight?{style:`line-height: ${n.lineHeight}`}:{}}}}]},addCommands:()=>({setLineHeight:n=>({chain:o})=>o().setMark("textStyle",{lineHeight:n}).run(),unsetLineHeight:()=>({chain:n})=>n().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()})});l.hj.create({name:"textStyleKit",addExtensions(){let n=[];return!1!==this.options.backgroundColor&&n.push(S.configure(this.options.backgroundColor)),!1!==this.options.color&&n.push(M.configure(this.options.color)),!1!==this.options.fontFamily&&n.push(T.configure(this.options.fontFamily)),!1!==this.options.fontSize&&n.push(A.configure(this.options.fontSize)),!1!==this.options.lineHeight&&n.push(E.configure(this.options.lineHeight)),!1!==this.options.textStyle&&n.push(m.configure(this.options.textStyle)),n}})},9273:function(n,o,a){"use strict";a.d(o,{m$:function(){return $},fj:function(){return W},Vm:function(){return J},eh:function(){return V},QA:function(){return Z}});var l=a(5865),m=a(2376),S=a(6560);let DropCursorView=class DropCursorView{constructor(n,o){var a;this.editorView=n,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(a=o.width)&&void 0!==a?a:1,this.color=!1===o.color?void 0:o.color||"black",this.class=o.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let handler=n=>{this[o](n)};return n.dom.addEventListener(o,handler),{name:o,handler}})}destroy(){this.handlers.forEach(({name:n,handler:o})=>this.editorView.dom.removeEventListener(n,o))}update(n,o){null!=this.cursorPos&&o.doc!=n.state.doc&&(this.cursorPos>n.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(n){n!=this.cursorPos&&(this.cursorPos=n,null==n?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let n,o,a=this.editorView.state.doc.resolve(this.cursorPos),l=!a.parent.inlineContent,m,S=this.editorView.dom,M=S.getBoundingClientRect(),T=M.width/S.offsetWidth,A=M.height/S.offsetHeight;if(l){let n=a.nodeBefore,o=a.nodeAfter;if(n||o){let a=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0));if(a){let l=a.getBoundingClientRect(),S=n?l.bottom:l.top;n&&o&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let M=this.width/2*A;m={left:l.left,right:l.right,top:S-M,bottom:S+M}}}}if(!m){let n=this.editorView.coordsAtPos(this.cursorPos),o=this.width/2*T;m={left:n.left-o,right:n.left+o,top:n.top,bottom:n.bottom}}let E=this.editorView.dom.offsetParent;if(!this.element&&(this.element=E.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",l),this.element.classList.toggle("prosemirror-dropcursor-inline",!l),E&&(E!=document.body||"static"!=getComputedStyle(E).position)){let a=E.getBoundingClientRect(),l=a.width/E.offsetWidth,m=a.height/E.offsetHeight;n=a.left-E.scrollLeft*l,o=a.top-E.scrollTop*m}else n=-pageXOffset,o=-pageYOffset;this.element.style.left=(m.left-n)/T+"px",this.element.style.top=(m.top-o)/A+"px",this.element.style.width=(m.right-m.left)/T+"px",this.element.style.height=(m.bottom-m.top)/A+"px"}scheduleRemoval(n){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),n)}dragover(n){if(!this.editorView.editable)return;let o=this.editorView.posAtCoords({left:n.clientX,top:n.clientY}),a=o&&o.inside>=0&&this.editorView.state.doc.nodeAt(o.inside),l=a&&a.type.spec.disableDropCursor,m="function"==typeof l?l(this.editorView,o,n):l;if(o&&!m){let n=o.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let o=(0,S.nj)(this.editorView.state.doc,n,this.editorView.dragging.slice);null!=o&&(n=o)}this.setCursor(n),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(n){this.editorView.dom.contains(n.relatedTarget)||this.setCursor(null)}};var M=a(4348),T=a(2696),A=a(2806);let GapCursor=class GapCursor extends m.Y1{constructor(n){super(n,n)}map(n,o){let a=n.resolve(o.map(this.head));return GapCursor.valid(a)?new GapCursor(a):m.Y1.near(a)}content(){return A.p2.empty}eq(n){return n instanceof GapCursor&&n.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(n,o){if("number"!=typeof o.pos)throw RangeError("Invalid input for GapCursor.fromJSON");return new GapCursor(n.resolve(o.pos))}getBookmark(){return new GapBookmark(this.anchor)}static valid(n){let o=n.parent;if(o.isTextblock||!function(n){for(let o=n.depth;o>=0;o--){let a=n.index(o),l=n.node(o);if(0==a){if(l.type.spec.isolating)return!0;continue}for(let n=l.child(a-1);;n=n.lastChild){if(0==n.childCount&&!n.inlineContent||n.isAtom||n.type.spec.isolating)return!0;if(n.inlineContent)return!1}}return!0}(n)||!function(n){for(let o=n.depth;o>=0;o--){let a=n.indexAfter(o),l=n.node(o);if(a==l.childCount){if(l.type.spec.isolating)return!0;continue}for(let n=l.child(a);;n=n.firstChild){if(0==n.childCount&&!n.inlineContent||n.isAtom||n.type.spec.isolating)return!0;if(n.inlineContent)return!1}}return!0}(n))return!1;let a=o.type.spec.allowGapCursor;if(null!=a)return a;let l=o.contentMatchAt(n.index()).defaultType;return l&&l.isTextblock}static findGapCursorFrom(n,o,a=!1){t:for(;;){if(!a&&GapCursor.valid(n))return n;let l=n.pos,S=null;for(let a=n.depth;;a--){let m=n.node(a);if(o>0?n.indexAfter(a)<m.childCount:n.index(a)>0){S=m.child(o>0?n.indexAfter(a):n.index(a)-1);break}if(0==a)return null;l+=o;let M=n.doc.resolve(l);if(GapCursor.valid(M))return M}for(;;){let M=o>0?S.firstChild:S.lastChild;if(!M){if(S.isAtom&&!S.isText&&!m.qv.isSelectable(S)){n=n.doc.resolve(l+S.nodeSize*o),a=!1;continue t}break}S=M,l+=o;let T=n.doc.resolve(l);if(GapCursor.valid(T))return T}return null}}};GapCursor.prototype.visible=!1,GapCursor.findFrom=GapCursor.findGapCursorFrom,m.Y1.jsonID("gapcursor",GapCursor);let GapBookmark=class GapBookmark{constructor(n){this.pos=n}map(n){return new GapBookmark(n.map(this.pos))}resolve(n){let o=n.resolve(this.pos);return GapCursor.valid(o)?new GapCursor(o):m.Y1.near(o)}};let E=(0,T.$)({ArrowLeft:arrow("horiz",-1),ArrowRight:arrow("horiz",1),ArrowUp:arrow("vert",-1),ArrowDown:arrow("vert",1)});function arrow(n,o){let a="vert"==n?o>0?"down":"up":o>0?"right":"left";return function(n,l,S){let M=n.selection,T=o>0?M.$to:M.$from,A=M.empty;if(M instanceof m.Bs){if(!S.endOfTextblock(a)||0==T.depth)return!1;A=!1,T=n.doc.resolve(o>0?T.after():T.before())}let E=GapCursor.findGapCursorFrom(T,o,A);return!!E&&(l&&l(n.tr.setSelection(new GapCursor(E))),!0)}}function handleClick(n,o,a){if(!n||!n.editable)return!1;let l=n.state.doc.resolve(o);if(!GapCursor.valid(l))return!1;let S=n.posAtCoords({left:a.clientX,top:a.clientY});return!(S&&S.inside>-1&&m.qv.isSelectable(n.state.doc.nodeAt(S.inside)))&&(n.dispatch(n.state.tr.setSelection(new GapCursor(l))),!0)}function beforeinput(n,o){if("insertCompositionText"!=o.inputType||!(n.state.selection instanceof GapCursor))return!1;let{$from:a}=n.state.selection,l=a.parent.contentMatchAt(a.index()).findWrapping(n.state.schema.nodes.text);if(!l)return!1;let S=A.HY.empty;for(let n=l.length-1;n>=0;n--)S=A.HY.from(l[n].createAndFill(null,S));let M=n.state.tr.replace(a.pos,a.pos,new A.p2(S,0,0));return M.setSelection(m.Bs.near(M.doc.resolve(a.pos+1))),n.dispatch(M),!1}function drawGapCursor(n){if(!(n.selection instanceof GapCursor))return null;let o=document.createElement("div");return o.className="ProseMirror-gapcursor",M.EH.create(n.doc,[M.p.widget(n.selection.head,o,{key:"gapcursor"})])}var RopeSequence=function(){};RopeSequence.prototype.append=function(n){return n.length?(n=RopeSequence.from(n),!this.length&&n||n.length<200&&this.leafAppend(n)||this.length<200&&n.leafPrepend(this)||this.appendInner(n)):this},RopeSequence.prototype.prepend=function(n){return n.length?RopeSequence.from(n).append(this):this},RopeSequence.prototype.appendInner=function(n){return new O(this,n)},RopeSequence.prototype.slice=function(n,o){return(void 0===n&&(n=0),void 0===o&&(o=this.length),n>=o)?RopeSequence.empty:this.sliceInner(Math.max(0,n),Math.min(this.length,o))},RopeSequence.prototype.get=function(n){if(!(n<0)&&!(n>=this.length))return this.getInner(n)},RopeSequence.prototype.forEach=function(n,o,a){void 0===o&&(o=0),void 0===a&&(a=this.length),o<=a?this.forEachInner(n,o,a,0):this.forEachInvertedInner(n,o,a,0)},RopeSequence.prototype.map=function(n,o,a){void 0===o&&(o=0),void 0===a&&(a=this.length);var l=[];return this.forEach(function(o,a){return l.push(n(o,a))},o,a),l},RopeSequence.from=function(n){return n instanceof RopeSequence?n:n&&n.length?new R(n):RopeSequence.empty};var R=function(n){function Leaf(o){n.call(this),this.values=o}n&&(Leaf.__proto__=n),Leaf.prototype=Object.create(n&&n.prototype),Leaf.prototype.constructor=Leaf;var o={length:{configurable:!0},depth:{configurable:!0}};return Leaf.prototype.flatten=function(){return this.values},Leaf.prototype.sliceInner=function(n,o){return 0==n&&o==this.length?this:new Leaf(this.values.slice(n,o))},Leaf.prototype.getInner=function(n){return this.values[n]},Leaf.prototype.forEachInner=function(n,o,a,l){for(var m=o;m<a;m++)if(!1===n(this.values[m],l+m))return!1},Leaf.prototype.forEachInvertedInner=function(n,o,a,l){for(var m=o-1;m>=a;m--)if(!1===n(this.values[m],l+m))return!1},Leaf.prototype.leafAppend=function(n){if(this.length+n.length<=200)return new Leaf(this.values.concat(n.flatten()))},Leaf.prototype.leafPrepend=function(n){if(this.length+n.length<=200)return new Leaf(n.flatten().concat(this.values))},o.length.get=function(){return this.values.length},o.depth.get=function(){return 0},Object.defineProperties(Leaf.prototype,o),Leaf}(RopeSequence);RopeSequence.empty=new R([]);var O=function(n){function Append(o,a){n.call(this),this.left=o,this.right=a,this.length=o.length+a.length,this.depth=Math.max(o.depth,a.depth)+1}return n&&(Append.__proto__=n),Append.prototype=Object.create(n&&n.prototype),Append.prototype.constructor=Append,Append.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},Append.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},Append.prototype.forEachInner=function(n,o,a,l){var m=this.left.length;if(o<m&&!1===this.left.forEachInner(n,o,Math.min(a,m),l)||a>m&&!1===this.right.forEachInner(n,Math.max(o-m,0),Math.min(this.length,a)-m,l+m))return!1},Append.prototype.forEachInvertedInner=function(n,o,a,l){var m=this.left.length;if(o>m&&!1===this.right.forEachInvertedInner(n,o-m,Math.max(a,m)-m,l+m)||a<m&&!1===this.left.forEachInvertedInner(n,Math.min(o,m),a,l))return!1},Append.prototype.sliceInner=function(n,o){if(0==n&&o==this.length)return this;var a=this.left.length;return o<=a?this.left.slice(n,o):n>=a?this.right.slice(n-a,o-a):this.left.slice(n,a).append(this.right.slice(0,o-a))},Append.prototype.leafAppend=function(n){var o=this.right.leafAppend(n);if(o)return new Append(this.left,o)},Append.prototype.leafPrepend=function(n){var o=this.left.leafPrepend(n);if(o)return new Append(o,this.right)},Append.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new Append(this.left,new Append(this.right,n)):new Append(this,n)},Append}(RopeSequence);let Branch=class Branch{constructor(n,o){this.items=n,this.eventCount=o}popEvent(n,o){let a,l,m,S;if(0==this.eventCount)return null;let M=this.items.length;for(;;M--)if(this.items.get(M-1).selection){--M;break}o&&(l=(a=this.remapping(M,this.items.length)).maps.length);let T=n.tr,A=[],E=[];return this.items.forEach((n,o)=>{if(!n.step){a||(l=(a=this.remapping(M,o+1)).maps.length),l--,E.push(n);return}if(a){E.push(new Item(n.map));let o=n.step.map(a.slice(l)),m;o&&T.maybeStep(o).doc&&(m=T.mapping.maps[T.mapping.maps.length-1],A.push(new Item(m,void 0,void 0,A.length+E.length))),l--,m&&a.appendMap(m,l)}else T.maybeStep(n.step);if(n.selection)return m=a?n.selection.map(a.slice(l)):n.selection,S=new Branch(this.items.slice(0,M).append(E.reverse().concat(A)),this.eventCount-1),!1},this.items.length,0),{remaining:S,transform:T,selection:m}}addTransform(n,o,a,l){var m,S;let M,T=[],A=this.eventCount,E=this.items,R=!l&&E.length?E.get(E.length-1):null;for(let a=0;a<n.steps.length;a++){let m=n.steps[a].invert(n.docs[a]),S=new Item(n.mapping.maps[a],m,o),M;(M=R&&R.merge(S))&&(S=M,a?T.pop():E=E.slice(0,E.length-1)),T.push(S),o&&(A++,o=void 0),l||(R=S)}let O=A-a.depth;return O>N&&(m=E,S=O,m.forEach((n,o)=>{if(n.selection&&0==S--)return M=o,!1}),E=m.slice(M),A-=O),new Branch(E.append(T),A)}remapping(n,o){let a=new S.vs;return this.items.forEach((o,l)=>{let m=null!=o.mirrorOffset&&l-o.mirrorOffset>=n?a.maps.length-o.mirrorOffset:void 0;a.appendMap(o.map,m)},n,o),a}addMaps(n){return 0==this.eventCount?this:new Branch(this.items.append(n.map(n=>new Item(n))),this.eventCount)}rebased(n,o){if(!this.eventCount)return this;let a=[],l=Math.max(0,this.items.length-o),m=n.mapping,S=n.steps.length,M=this.eventCount;this.items.forEach(n=>{n.selection&&M--},l);let T=o;this.items.forEach(o=>{let l=m.getMirror(--T);if(null==l)return;S=Math.min(S,l);let A=m.maps[l];if(o.step){let S=n.steps[l].invert(n.docs[l]),E=o.selection&&o.selection.map(m.slice(T+1,l));E&&M++,a.push(new Item(A,S,E))}else a.push(new Item(A))},l);let A=[];for(let n=o;n<S;n++)A.push(new Item(m.maps[n]));let E=this.items.slice(0,l).append(A).append(a),R=new Branch(E,M);return R.emptyItemCount()>500&&(R=R.compress(this.items.length-a.length)),R}emptyItemCount(){let n=0;return this.items.forEach(o=>{!o.step&&n++}),n}compress(n=this.items.length){let o=this.remapping(0,n),a=o.maps.length,l=[],m=0;return this.items.forEach((S,M)=>{if(M>=n)l.push(S),S.selection&&m++;else if(S.step){let n=S.step.map(o.slice(a)),M=n&&n.getMap();if(a--,M&&o.appendMap(M,a),n){let T=S.selection&&S.selection.map(o.slice(a));T&&m++;let A=new Item(M.invert(),n,T),E,R=l.length-1;(E=l.length&&l[R].merge(A))?l[R]=E:l.push(A)}}else S.map&&a--},this.items.length,0),new Branch(RopeSequence.from(l.reverse()),m)}};Branch.empty=new Branch(RopeSequence.empty,0);let Item=class Item{constructor(n,o,a,l){this.map=n,this.step=o,this.selection=a,this.mirrorOffset=l}merge(n){if(this.step&&n.step&&!n.selection){let o=n.step.merge(this.step);if(o)return new Item(o.getMap().invert(),o,this.selection)}}};let HistoryState=class HistoryState{constructor(n,o,a,l,m){this.done=n,this.undone=o,this.prevRanges=a,this.prevTime=l,this.prevComposition=m}};let N=20;function rangesFor(n){let o=[];for(let a=n.length-1;a>=0&&0==o.length;a--)n[a].forEach((n,a,l,m)=>o.push(l,m));return o}function mapRanges(n,o){if(!n)return null;let a=[];for(let l=0;l<n.length;l+=2){let m=o.map(n[l],1),S=o.map(n[l+1],-1);m<=S&&a.push(m,S)}return a}let j=!1,B=null;function mustPreserveItems(n){let o=n.plugins;if(B!=o){j=!1,B=o;for(let n=0;n<o.length;n++)if(o[n].spec.historyPreserveItems){j=!0;break}}return j}let z=new m.H$("history"),P=new m.H$("closeHistory");function buildCommand(n,o){return(a,l)=>{let m=z.getState(a);if(!m||0==(n?m.undone:m.done).eventCount)return!1;if(l){let S=function(n,o,a){let l=mustPreserveItems(o),m=z.get(o).spec.config,S=(a?n.undone:n.done).popEvent(o,l);if(!S)return null;let M=S.selection.resolve(S.transform.doc),T=(a?n.done:n.undone).addTransform(S.transform,o.selection.getBookmark(),m,l),A=new HistoryState(a?T:S.remaining,a?S.remaining:T,null,0,-1);return S.transform.setSelection(M).setMeta(z,{redo:a,historyState:A})}(m,a,n);S&&l(o?S.scrollIntoView():S)}return!0}}let H=buildCommand(!1,!0),_=buildCommand(!0,!0);buildCommand(!1,!1),buildCommand(!0,!1),l.hj.create({name:"characterCount",addOptions:()=>({limit:null,mode:"textSize",textCounter:n=>n.length,wordCounter:n=>n.split(" ").filter(n=>""!==n).length}),addStorage:()=>({characters:()=>0,words:()=>0}),onBeforeCreate(){this.storage.characters=n=>{let o=(null==n?void 0:n.node)||this.editor.state.doc,a=(null==n?void 0:n.mode)||this.options.mode;if("textSize"===a){let n=o.textBetween(0,o.content.size,void 0," ");return this.options.textCounter(n)}return o.nodeSize},this.storage.words=n=>{let o=(null==n?void 0:n.node)||this.editor.state.doc,a=o.textBetween(0,o.content.size," "," ");return this.options.wordCounter(a)}},addProseMirrorPlugins(){let n=!1;return[new m.Sy({key:new m.H$("characterCount"),appendTransaction:(o,a,l)=>{if(n)return;let m=this.options.limit;if(null==m||0===m){n=!0;return}let S=this.storage.characters({node:l.doc});if(S>m){console.warn(`[CharacterCount] Initial content exceeded limit of ${m} characters. Content was automatically trimmed.`);let o=l.tr.deleteRange(0,S-m);return n=!0,o}n=!0},filterTransaction:(n,o)=>{let a=this.options.limit;if(!n.docChanged||0===a||null==a)return!0;let l=this.storage.characters({node:o.doc}),m=this.storage.characters({node:n.doc});if(m<=a||l>a&&m>a&&m<=l)return!0;if(l>a&&m>a&&m>l)return!1;let S=n.getMeta("paste");if(!S)return!1;let M=n.selection.$head.pos,T=M-(m-a);n.deleteRange(T,M);let A=this.storage.characters({node:n.doc});return!(A>a)}})]}});var $=l.hj.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[function(n={}){return new m.Sy({view:o=>new DropCursorView(o,n)})}(this.options)]}});l.hj.create({name:"focus",addOptions:()=>({className:"has-focus",mode:"all"}),addProseMirrorPlugins(){return[new m.Sy({key:new m.H$("focus"),props:{decorations:({doc:n,selection:o})=>{let{isEditable:a,isFocused:l}=this.editor,{anchor:m}=o,S=[];if(!a||!l)return M.EH.create(n,[]);let T=0;"deepest"===this.options.mode&&n.descendants((n,o)=>{if(n.isText)return;let a=m>=o&&m<=o+n.nodeSize-1;if(!a)return!1;T+=1});let A=0;return n.descendants((n,o)=>{if(n.isText)return!1;let a=m>=o&&m<=o+n.nodeSize-1;if(!a)return!1;A+=1;let l="deepest"===this.options.mode&&T-A>0||"shallowest"===this.options.mode&&A>1;if(l)return"deepest"===this.options.mode;S.push(M.p.node(o,o+n.nodeSize,{class:this.options.className}))}),M.EH.create(n,S)}}})]}});var W=l.hj.create({name:"gapCursor",addProseMirrorPlugins:()=>[new m.Sy({props:{decorations:drawGapCursor,createSelectionBetween:(n,o,a)=>o.pos==a.pos&&GapCursor.valid(a)?new GapCursor(a):null,handleClick,handleKeyDown:E,handleDOMEvents:{beforeinput:beforeinput}}})],extendNodeSchema(n){var o;let a={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:null!=(o=(0,l.nU)((0,l.Nl)(n,"allowGapCursor",a)))?o:null}}}),J=l.hj.create({name:"placeholder",addOptions:()=>({emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something â€¦",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}),addProseMirrorPlugins(){return[new m.Sy({key:new m.H$("placeholder"),props:{decorations:({doc:n,selection:o})=>{let a=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:m}=o,S=[];if(!a)return null;let T=this.editor.isEmpty;return n.descendants((n,o)=>{let a=m>=o&&m<=o+n.nodeSize,A=!n.isLeaf&&(0,l.bR)(n);if((a||!this.options.showOnlyCurrent)&&A){let l=[this.options.emptyNodeClass];T&&l.push(this.options.emptyEditorClass);let m=M.p.node(o,o+n.nodeSize,{class:l.join(" "),"data-placeholder":"function"==typeof this.options.placeholder?this.options.placeholder({editor:this.editor,node:n,pos:o,hasAnchor:a}):this.options.placeholder});S.push(m)}return this.options.includeChildren}),M.EH.create(n,S)}}})]}});function nodeEqualsType({types:n,node:o}){return o&&Array.isArray(n)&&n.includes(o.type)||(null==o?void 0:o.type)===n}l.hj.create({name:"selection",addOptions:()=>({className:"selection"}),addProseMirrorPlugins(){let{editor:n,options:o}=this;return[new m.Sy({key:new m.H$("selection"),props:{decorations:a=>a.selection.empty||n.isFocused||!n.isEditable||(0,l.EG)(a.selection)||n.view.dragging?null:M.EH.create(a.doc,[M.p.inline(a.selection.from,a.selection.to,{class:o.className})])}})]}});var V=l.hj.create({name:"trailingNode",addOptions:()=>({node:"paragraph",notAfter:[]}),addProseMirrorPlugins(){let n=new m.H$(this.name),o=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new m.Sy({key:n,appendTransaction:(o,a,l)=>{let{doc:m,tr:S,schema:M}=l,T=n.getState(l),A=m.content.size,E=M.nodes[this.options.node];if(T)return S.insert(A,E.create())},state:{init:(n,a)=>{let l=a.tr.doc.lastChild;return!nodeEqualsType({node:l,types:o})},apply:(n,a)=>{if(!n.docChanged)return a;let l=n.doc.lastChild;return!nodeEqualsType({node:l,types:o})}}})]}}),Z=l.hj.create({name:"undoRedo",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:n,dispatch:o})=>H(n,o),redo:()=>({state:n,dispatch:o})=>_(n,o)}),addProseMirrorPlugins(){return[function(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new m.Sy({key:z,state:{init:()=>new HistoryState(Branch.empty,Branch.empty,null,0,-1),apply:(o,a,l)=>(function(n,o,a,l){let m=a.getMeta(z),S;if(m)return m.historyState;a.getMeta(P)&&(n=new HistoryState(n.done,n.undone,null,0,-1));let M=a.getMeta("appendedTransaction");if(0==a.steps.length)return n;if(M&&M.getMeta(z))return M.getMeta(z).redo?new HistoryState(n.done.addTransform(a,void 0,l,mustPreserveItems(o)),n.undone,rangesFor(a.mapping.maps),n.prevTime,n.prevComposition):new HistoryState(n.done,n.undone.addTransform(a,void 0,l,mustPreserveItems(o)),null,n.prevTime,n.prevComposition);if(!1===a.getMeta("addToHistory")||M&&!1===M.getMeta("addToHistory"))return(S=a.getMeta("rebased"))?new HistoryState(n.done.rebased(a,S),n.undone.rebased(a,S),mapRanges(n.prevRanges,a.mapping),n.prevTime,n.prevComposition):new HistoryState(n.done.addMaps(a.mapping.maps),n.undone.addMaps(a.mapping.maps),mapRanges(n.prevRanges,a.mapping),n.prevTime,n.prevComposition);{let m=a.getMeta("composition"),S=0==n.prevTime||!M&&n.prevComposition!=m&&(n.prevTime<(a.time||0)-l.newGroupDelay||!function(n,o){if(!o)return!1;if(!n.docChanged)return!0;let a=!1;return n.mapping.maps[0].forEach((n,l)=>{for(let m=0;m<o.length;m+=2)n<=o[m+1]&&l>=o[m]&&(a=!0)}),a}(a,n.prevRanges)),T=M?mapRanges(n.prevRanges,a.mapping):rangesFor(a.mapping.maps);return new HistoryState(n.done.addTransform(a,S?o.selection.getBookmark():void 0,l,mustPreserveItems(o)),Branch.empty,T,a.time,null==m?n.prevComposition:m)}})(a,l,o,n)},config:n,props:{handleDOMEvents:{beforeinput(n,o){let a=o.inputType,l="historyUndo"==a?H:"historyRedo"==a?_:null;return!!l&&(o.preventDefault(),l(n.state,n.dispatch))}}}})}(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-Ñ":()=>this.editor.commands.undo(),"Shift-Mod-Ñ":()=>this.editor.commands.redo()}}})},1284:function(n,o,a){"use strict";a.d(o,{jE:function(){return useEditor},kg:function(){return N}});var l=a(7294),m=a(3935),S=a(1688),M=a(5893),T=a(5865),A=a(1879),E=a(2798),mergeRefs=(...n)=>o=>{n.forEach(n=>{"function"==typeof n?n(o):n&&(n.current=o)})},Portals=({contentComponent:n})=>{let o=(0,S.useSyncExternalStore)(n.subscribe,n.getSnapshot,n.getServerSnapshot);return(0,M.jsx)(M.Fragment,{children:Object.values(o)})},R=class extends l.Component{constructor(n){var o;super(n),this.editorContentRef=l.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(null==(o=n.editor)?void 0:o.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){let n=this.props.editor;if(n&&!n.isDestroyed&&n.options.element){if(n.contentComponent)return;let o=this.editorContentRef.current;o.append(...n.options.element.childNodes),n.setOptions({element:o}),n.contentComponent=function(){let n=new Set,o={};return{subscribe:o=>(n.add(o),()=>{n.delete(o)}),getSnapshot:()=>o,getServerSnapshot:()=>o,setRenderer(a,l){o={...o,[a]:m.createPortal(l.reactElement,l.element,a)},n.forEach(n=>n())},removeRenderer(a){let l={...o};delete l[a],o=l,n.forEach(n=>n())}}}(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=n.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),n.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var n;let o=this.props.editor;if(!o||(this.initialized=!1,o.isDestroyed||o.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),o.contentComponent=null,!(null==(n=o.options.element)?void 0:n.firstChild)))return;let a=document.createElement("div");a.append(...o.options.element.childNodes),o.setOptions({element:a})}render(){let{editor:n,innerRef:o,...a}=this.props;return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)("div",{ref:mergeRefs(o,this.editorContentRef),...a}),(null==n?void 0:n.contentComponent)&&(0,M.jsx)(Portals,{contentComponent:n.contentComponent})]})}},O=(0,l.forwardRef)((n,o)=>{let a=l.useMemo(()=>Math.floor(4294967295*Math.random()).toString(),[n.editor]);return l.createElement(R,{key:a,innerRef:o,...n})}),N=l.memo(O),j="undefined"!=typeof window?l.useLayoutEffect:l.useEffect,B=class{constructor(n){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=n,this.lastSnapshot={editor:n,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber||(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber}),this.lastSnapshot}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(n){return this.subscribers.add(n),()=>{this.subscribers.delete(n)}}watch(n){if(this.editor=n,this.editor){let fn=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},n=this.editor;return n.on("transaction",fn),()=>{n.off("transaction",fn)}}}},z="undefined"==typeof window,P=z||!!("undefined"!=typeof window&&window.next),H=class _EditorInstanceManager{constructor(n){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=n,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(n){this.editor=n,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return void 0===this.options.current.immediatelyRender?z||P?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){let n={...this.options.current,onBeforeCreate:(...n)=>{var o,a;return null==(a=(o=this.options.current).onBeforeCreate)?void 0:a.call(o,...n)},onBlur:(...n)=>{var o,a;return null==(a=(o=this.options.current).onBlur)?void 0:a.call(o,...n)},onCreate:(...n)=>{var o,a;return null==(a=(o=this.options.current).onCreate)?void 0:a.call(o,...n)},onDestroy:(...n)=>{var o,a;return null==(a=(o=this.options.current).onDestroy)?void 0:a.call(o,...n)},onFocus:(...n)=>{var o,a;return null==(a=(o=this.options.current).onFocus)?void 0:a.call(o,...n)},onSelectionUpdate:(...n)=>{var o,a;return null==(a=(o=this.options.current).onSelectionUpdate)?void 0:a.call(o,...n)},onTransaction:(...n)=>{var o,a;return null==(a=(o=this.options.current).onTransaction)?void 0:a.call(o,...n)},onUpdate:(...n)=>{var o,a;return null==(a=(o=this.options.current).onUpdate)?void 0:a.call(o,...n)},onContentError:(...n)=>{var o,a;return null==(a=(o=this.options.current).onContentError)?void 0:a.call(o,...n)},onDrop:(...n)=>{var o,a;return null==(a=(o=this.options.current).onDrop)?void 0:a.call(o,...n)},onPaste:(...n)=>{var o,a;return null==(a=(o=this.options.current).onPaste)?void 0:a.call(o,...n)},onDelete:(...n)=>{var o,a;return null==(a=(o=this.options.current).onDelete)?void 0:a.call(o,...n)}},o=new T.ML(n);return o}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(n){return this.subscriptions.add(n),()=>{this.subscriptions.delete(n)}}static compareOptions(n,o){return Object.keys(n).every(a=>!!["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(a)||("extensions"===a&&n.extensions&&o.extensions?n.extensions.length===o.extensions.length&&n.extensions.every((n,a)=>{var l;return n===(null==(l=o.extensions)?void 0:l[a])}):n[a]===o[a]))}onRender(n){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&0===n.length?_EditorInstanceManager.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(n),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(n){if(this.editor&&!this.editor.isDestroyed){if(null===this.previousDeps){this.previousDeps=n;return}let o=this.previousDeps.length===n.length&&this.previousDeps.every((o,a)=>o===n[a]);if(o)return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=n}scheduleDestroy(){let n=this.instanceId,o=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===n){o&&o.setOptions(this.options.current);return}o&&!o.isDestroyed&&(o.destroy(),this.instanceId===n&&this.setEditor(null))},1)}};function useEditor(n={},o=[]){let a=(0,l.useRef)(n);a.current=n;let[m]=(0,l.useState)(()=>new H(a)),M=(0,S.useSyncExternalStore)(m.subscribe,m.getEditor,m.getServerSnapshot);return(0,l.useDebugValue)(M),(0,l.useEffect)(m.onRender(o)),!function(n){var o;let[a]=(0,l.useState)(()=>new B(n.editor)),m=(0,E.useSyncExternalStoreWithSelector)(a.subscribe,a.getSnapshot,a.getServerSnapshot,n.selector,null!=(o=n.equalityFn)?o:A);j(()=>a.watch(n.editor),[n.editor,a]),(0,l.useDebugValue)(m)}({editor:M,selector:({transactionNumber:o})=>!1===n.shouldRerenderOnTransaction||void 0===n.shouldRerenderOnTransaction?null:n.immediatelyRender&&0===o?0:o+1}),M}(0,l.createContext)({editor:null}).Consumer;var _=(0,l.createContext)({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),useReactNodeView=()=>(0,l.useContext)(_);l.forwardRef((n,o)=>{let{onDragStart:a}=useReactNodeView(),l=n.as||"div";return(0,M.jsx)(l,{...n,ref:o,"data-node-view-wrapper":"",onDragStart:a,style:{whiteSpace:"normal",...n.style}})}),l.createContext({markViewContentRef:()=>{}})},1580:function(n,o,a){"use strict";a.d(o,{Z:function(){return tT}});var l=a(5865),h=(n,o)=>{if("slot"===n)return 0;if(n instanceof Function)return n(o);let{children:a,...l}=null!=o?o:{};if("svg"===n)throw Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[n,l,a]},m=/^\s*>\s$/,S=l.NB.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:n}){return h("blockquote",{...(0,l.P1)(this.options.HTMLAttributes,n),children:h("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[(0,l.S0)({find:m,type:this.type})]}}),M=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,T=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,A=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,E=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,R=l.vc.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>"normal"!==n.style.fontWeight&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return h("strong",{...(0,l.P1)(this.options.HTMLAttributes,n),children:h("slot",{})})},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[(0,l.Cf)({find:M,type:this.type}),(0,l.Cf)({find:A,type:this.type})]},addPasteRules(){return[(0,l.K9)({find:T,type:this.type}),(0,l.K9)({find:E,type:this.type})]}}),O=/(^|[^`])`([^`]+)`(?!`)$/,N=/(^|[^`])`([^`]+)`(?!`)/g,j=l.vc.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:n}){return["code",(0,l.P1)(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[(0,l.Cf)({find:O,type:this.type})]},addPasteRules(){return[(0,l.K9)({find:N,type:this.type})]}}),B=a(2376),z=/^```([a-z]+)?[\s\n]$/,P=/^~~~([a-z]+)?[\s\n]$/,H=l.NB.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var o;let{languageClassPrefix:a}=this.options,l=[...(null==(o=n.firstElementChild)?void 0:o.classList)||[]],m=l.filter(n=>n.startsWith(a)).map(n=>n.replace(a,"")),S=m[0];return S||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:n,HTMLAttributes:o}){return["pre",(0,l.P1)(this.options.HTMLAttributes,o),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:o})=>o.setNode(this.name,n),toggleCodeBlock:n=>({commands:o})=>o.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{let{empty:n,$anchor:o}=this.editor.state.selection,a=1===o.pos;return!!n&&o.parent.type.name===this.name&&(!!a||!o.parent.textContent.length)&&this.editor.commands.clearNodes()},Tab:({editor:n})=>{if(!this.options.enableTabIndentation)return!1;let{state:o}=n,{selection:a}=o,{$from:l,empty:m}=a;if(l.parent.type!==this.type)return!1;let S=" ".repeat(this.options.tabSize);return m?n.commands.insertContent(S):n.commands.command(({tr:n})=>{let{from:l,to:m}=a,M=o.doc.textBetween(l,m,"\n","\n"),T=M.split("\n"),A=T.map(n=>S+n).join("\n");return n.replaceWith(l,m,o.schema.text(A)),!0})},"Shift-Tab":({editor:n})=>{if(!this.options.enableTabIndentation)return!1;let{state:o}=n,{selection:a}=o,{$from:l,empty:m}=a;return l.parent.type===this.type&&(m?n.commands.command(({tr:n})=>{var a;let{pos:m}=l,S=l.start(),M=l.end(),T=o.doc.textBetween(S,M,"\n","\n"),A=T.split("\n"),E=0,R=0,O=m-S;for(let n=0;n<A.length;n+=1){if(R+A[n].length>=O){E=n;break}R+=A[n].length+1}let N=A[E],j=(null==(a=N.match(/^ */))?void 0:a[0])||"",z=Math.min(j.length,this.options.tabSize);if(0===z)return!0;let P=S;for(let n=0;n<E;n+=1)P+=A[n].length+1;n.delete(P,P+z);let H=m-P;return H<=z&&n.setSelection(B.Bs.create(n.doc,P)),!0}):n.commands.command(({tr:n})=>{let{from:l,to:m}=a,S=o.doc.textBetween(l,m,"\n","\n"),M=S.split("\n"),T=M.map(n=>{var o;let a=(null==(o=n.match(/^ */))?void 0:o[0])||"",l=Math.min(a.length,this.options.tabSize);return n.slice(l)}).join("\n");return n.replaceWith(l,m,o.schema.text(T)),!0}))},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;let{state:o}=n,{selection:a}=o,{$from:l,empty:m}=a;if(!m||l.parent.type!==this.type)return!1;let S=l.parentOffset===l.parent.nodeSize-2,M=l.parent.textContent.endsWith("\n\n");return!!S&&!!M&&n.chain().command(({tr:n})=>(n.delete(l.pos-2,l.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;let{state:o}=n,{selection:a,doc:l}=o,{$from:m,empty:S}=a;if(!S||m.parent.type!==this.type)return!1;let M=m.parentOffset===m.parent.nodeSize-2;if(!M)return!1;let T=m.after();if(void 0===T)return!1;let A=l.nodeAt(T);return A?n.commands.command(({tr:n})=>(n.setSelection(B.Y1.near(l.resolve(T))),!0)):n.commands.exitCode()}}},addInputRules(){return[(0,l.zK)({find:z,type:this.type,getAttributes:n=>({language:n[1]})}),(0,l.zK)({find:P,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new B.Sy({key:new B.H$("codeBlockVSCodeHandler"),props:{handlePaste:(n,o)=>{if(!o.clipboardData||this.editor.isActive(this.type.name))return!1;let a=o.clipboardData.getData("text/plain"),l=o.clipboardData.getData("vscode-editor-data"),m=l?JSON.parse(l):void 0,S=null==m?void 0:m.mode;if(!a||!S)return!1;let{tr:M,schema:T}=n.state,A=T.text(a.replace(/\r\n?/g,"\n"));return M.replaceSelectionWith(this.type.create({language:S},A)),M.selection.$from.parent.type!==this.type&&M.setSelection(B.Bs.near(M.doc.resolve(Math.max(0,M.selection.from-2)))),M.setMeta("paste",!0),n.dispatch(M),!0}}})]}}),_=l.NB.create({name:"doc",topNode:!0,content:"block+"}),$=l.NB.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:n}){return["br",(0,l.P1)(this.options.HTMLAttributes,n)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:n,chain:o,state:a,editor:l})=>n.first([()=>n.exitCode(),()=>n.command(()=>{let{selection:n,storedMarks:m}=a;if(n.$from.parent.type.spec.isolating)return!1;let{keepMarks:S}=this.options,{splittableMarks:M}=l.extensionManager,T=m||n.$to.parentOffset&&n.$from.marks();return o().insertContent({type:this.name}).command(({tr:n,dispatch:o})=>{if(o&&T&&S){let o=T.filter(n=>M.includes(n.type.name));n.ensureMarks(o)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),W=l.NB.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:o}){let a=this.options.levels.includes(n.attrs.level),m=a?n.attrs.level:this.options.levels[0];return[`h${m}`,(0,l.P1)(this.options.HTMLAttributes,o),0]},addCommands(){return{setHeading:n=>({commands:o})=>!!this.options.levels.includes(n.level)&&o.setNode(this.name,n),toggleHeading:n=>({commands:o})=>!!this.options.levels.includes(n.level)&&o.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return this.options.levels.reduce((n,o)=>({...n,[`Mod-Alt-${o}`]:()=>this.editor.commands.toggleHeading({level:o})}),{})},addInputRules(){return this.options.levels.map(n=>(0,l.zK)({find:RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}}),J=l.NB.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:n}){return["hr",(0,l.P1)(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:o})=>{if(!(0,l.FZ)(o,o.schema.nodes[this.name]))return!1;let{selection:a}=o,{$to:m}=a,S=n();return(0,l.EG)(a)?S.insertContentAt(m.pos,{type:this.name}):S.insertContent({type:this.name}),S.command(({tr:n,dispatch:o})=>{var a;if(o){let{$to:o}=n.selection,l=o.end();if(o.nodeAfter)o.nodeAfter.isTextblock?n.setSelection(B.Bs.create(n.doc,o.pos+1)):o.nodeAfter.isBlock?n.setSelection(B.qv.create(n.doc,o.pos)):n.setSelection(B.Bs.create(n.doc,o.pos));else{let m=null==(a=o.parent.type.contentMatch.defaultType)?void 0:a.create();m&&(n.insert(l,m),n.setSelection(B.Bs.create(n.doc,l+1)))}n.scrollIntoView()}return!0}).run()}}},addInputRules(){return[(0,l.x2)({find:/^(?:---|â€”-|___\s|\*\*\*\s)$/,type:this.type})]}}),V=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Z=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,G=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,te=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,tn=l.vc.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>"normal"!==n.style.fontStyle&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",(0,l.P1)(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[(0,l.Cf)({find:V,type:this.type}),(0,l.Cf)({find:G,type:this.type})]},addPasteRules(){return[(0,l.K9)({find:Z,type:this.type}),(0,l.K9)({find:te,type:this.type})]}}),to=a(5915),ti=Object.defineProperty,tl="textStyle",tc=/^\s*([-+*])\s$/,tu=l.NB.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:n}){return["ul",(0,l.P1)(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:o})=>this.options.keepAttributes?o().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(tl)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=(0,l.S0)({find:tc,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=(0,l.S0)({find:tc,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(tl),editor:this.editor})),[n]}}),tp=l.NB.create({name:"listItem",addOptions:()=>({HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:n}){return["li",(0,l.P1)(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}});((n,o)=>{for(var a in o)ti(n,a,{get:o[a],enumerable:!0})})({},{findListItemPos:()=>findListItemPos,getNextListDepth:()=>getNextListDepth,handleBackspace:()=>handleBackspace,handleDelete:()=>handleDelete,hasListBefore:()=>hasListBefore,hasListItemAfter:()=>hasListItemAfter,hasListItemBefore:()=>hasListItemBefore,listItemHasSubList:()=>listItemHasSubList,nextListIsDeeper:()=>nextListIsDeeper,nextListIsHigher:()=>nextListIsHigher});var findListItemPos=(n,o)=>{let{$from:a}=o.selection,m=(0,l.jo)(n,o.schema),S=a.depth,M=a.pos,T=null;for(;S>0&&null===T;)a.node(S).type===m?T=S:(S-=1,M-=1);return null===T?null:{$pos:o.doc.resolve(M),depth:T}},getNextListDepth=(n,o)=>{let a=findListItemPos(n,o);if(!a)return!1;let[,m]=(0,l.NY)(o,n,a.$pos.pos+4);return m},hasListBefore=(n,o,a)=>{let{$anchor:l}=n.selection,m=Math.max(0,l.pos-2),S=n.doc.resolve(m).node();return!!(S&&a.includes(S.type.name))},hasListItemBefore=(n,o)=>{var a;let{$anchor:l}=o.selection,m=o.doc.resolve(l.pos-2);return 0!==m.index()&&(null==(a=m.nodeBefore)?void 0:a.type.name)===n},listItemHasSubList=(n,o,a)=>{if(!a)return!1;let m=(0,l.jo)(n,o.schema),S=!1;return a.descendants(n=>{n.type===m&&(S=!0)}),S},handleBackspace=(n,o,a)=>{if(n.commands.undoInputRule())return!0;if(n.state.selection.from!==n.state.selection.to)return!1;if(!(0,l.Ig)(n.state,o)&&hasListBefore(n.state,o,a)){let{$anchor:a}=n.state.selection,l=n.state.doc.resolve(a.before()-1),m=[];l.node().descendants((n,a)=>{n.type.name===o&&m.push({node:n,pos:a})});let S=m.at(-1);if(!S)return!1;let M=n.state.doc.resolve(l.start()+S.pos+1);return n.chain().cut({from:a.start()-1,to:a.end()+1},M.end()).joinForward().run()}if(!(0,l.Ig)(n.state,o)||!(0,l.Sz)(n.state))return!1;let m=findListItemPos(o,n.state);if(!m)return!1;let S=n.state.doc.resolve(m.$pos.pos-2),M=S.node(m.depth),T=listItemHasSubList(o,n.state,M);return hasListItemBefore(o,n.state)&&!T?n.commands.joinItemBackward():n.chain().liftListItem(o).run()},nextListIsDeeper=(n,o)=>{let a=getNextListDepth(n,o),l=findListItemPos(n,o);return!!l&&!!a&&a>l.depth},nextListIsHigher=(n,o)=>{let a=getNextListDepth(n,o),l=findListItemPos(n,o);return!!l&&!!a&&a<l.depth},handleDelete=(n,o)=>{if(!(0,l.Ig)(n.state,o)||!(0,l.rI)(n.state,o))return!1;let{selection:a}=n.state,{$from:m,$to:S}=a;return!(!a.empty&&m.sameParent(S))&&(nextListIsDeeper(o,n.state)?n.chain().focus(n.state.selection.from+4).lift(o).joinBackward().run():nextListIsHigher(o,n.state)?n.chain().joinForward().joinBackward().run():n.commands.joinItemForward())},hasListItemAfter=(n,o)=>{var a;let{$anchor:l}=o.selection,m=o.doc.resolve(l.pos-l.parentOffset-2);return m.index()!==m.parent.childCount-1&&(null==(a=m.nodeAfter)?void 0:a.type.name)===n},th=l.hj.create({name:"listKeymap",addOptions:()=>({listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}),addKeyboardShortcuts(){return{Delete:({editor:n})=>{let o=!1;return this.options.listTypes.forEach(({itemName:a})=>{void 0!==n.state.schema.nodes[a]&&handleDelete(n,a)&&(o=!0)}),o},"Mod-Delete":({editor:n})=>{let o=!1;return this.options.listTypes.forEach(({itemName:a})=>{void 0!==n.state.schema.nodes[a]&&handleDelete(n,a)&&(o=!0)}),o},Backspace:({editor:n})=>{let o=!1;return this.options.listTypes.forEach(({itemName:a,wrapperNames:l})=>{void 0!==n.state.schema.nodes[a]&&handleBackspace(n,a,l)&&(o=!0)}),o},"Mod-Backspace":({editor:n})=>{let o=!1;return this.options.listTypes.forEach(({itemName:a,wrapperNames:l})=>{void 0!==n.state.schema.nodes[a]&&handleBackspace(n,a,l)&&(o=!0)}),o}}}}),td="textStyle",tf=/^(\d+)\.\s$/,tm=l.NB.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:n}){let{start:o,...a}=n;return 1===o?["ol",(0,l.P1)(this.options.HTMLAttributes,a),0]:["ol",(0,l.P1)(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:o})=>this.options.keepAttributes?o().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(td)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=(0,l.S0)({find:tf,type:this.type,getAttributes:n=>({start:+n[1]}),joinPredicate:(n,o)=>o.childCount+o.attrs.start===+n[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=(0,l.S0)({find:tf,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:n=>({start:+n[1],...this.editor.getAttributes(td)}),joinPredicate:(n,o)=>o.childCount+o.attrs.start===+n[1],editor:this.editor})),[n]}}),tg=/^\s*(\[([( |x])?\])\s$/,ty=l.NB.create({name:"taskItem",addOptions:()=>({nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}),content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes:()=>({checked:{default:!1,keepOnSplit:!1,parseHTML:n=>{let o=n.getAttribute("data-checked");return""===o||"true"===o},renderHTML:n=>({"data-checked":n.checked})}}),parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:n,HTMLAttributes:o}){return["li",(0,l.P1)(this.options.HTMLAttributes,o,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){let n={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...n,Tab:()=>this.editor.commands.sinkListItem(this.name)}:n},addNodeView(){return({node:n,HTMLAttributes:o,getPos:a,editor:l})=>{let m=document.createElement("li"),S=document.createElement("label"),M=document.createElement("span"),T=document.createElement("input"),A=document.createElement("div"),updateA11Y=n=>{var o,a;T.ariaLabel=(null==(a=null==(o=this.options.a11y)?void 0:o.checkboxLabel)?void 0:a.call(o,n,T.checked))||`Task item checkbox for ${n.textContent||"empty task item"}`};return updateA11Y(n),S.contentEditable="false",T.type="checkbox",T.addEventListener("mousedown",n=>n.preventDefault()),T.addEventListener("change",o=>{if(!l.isEditable&&!this.options.onReadOnlyChecked){T.checked=!T.checked;return}let{checked:m}=o.target;l.isEditable&&"function"==typeof a&&l.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:n})=>{let o=a();if("number"!=typeof o)return!1;let l=n.doc.nodeAt(o);return n.setNodeMarkup(o,void 0,{...null==l?void 0:l.attrs,checked:m}),!0}).run(),l.isEditable||!this.options.onReadOnlyChecked||this.options.onReadOnlyChecked(n,m)||(T.checked=!T.checked)}),Object.entries(this.options.HTMLAttributes).forEach(([n,o])=>{m.setAttribute(n,o)}),m.dataset.checked=n.attrs.checked,T.checked=n.attrs.checked,S.append(T,M),m.append(S,A),Object.entries(o).forEach(([n,o])=>{m.setAttribute(n,o)}),{dom:m,contentDOM:A,update:n=>n.type===this.type&&(m.dataset.checked=n.attrs.checked,T.checked=n.attrs.checked,updateA11Y(n),!0)}}},addInputRules(){return[(0,l.S0)({find:tg,type:this.type,getAttributes:n=>({checked:"x"===n[n.length-1]})})]}}),tv=l.NB.create({name:"taskList",addOptions:()=>({itemTypeName:"taskItem",HTMLAttributes:{}}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:n}){return["ul",(0,l.P1)(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});l.hj.create({name:"listKit",addExtensions(){let n=[];return!1!==this.options.bulletList&&n.push(tu.configure(this.options.bulletList)),!1!==this.options.listItem&&n.push(tp.configure(this.options.listItem)),!1!==this.options.listKeymap&&n.push(th.configure(this.options.listKeymap)),!1!==this.options.orderedList&&n.push(tm.configure(this.options.orderedList)),!1!==this.options.taskItem&&n.push(ty.configure(this.options.taskItem)),!1!==this.options.taskList&&n.push(tv.configure(this.options.taskList)),n}});var tk=l.NB.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:n}){return["p",(0,l.P1)(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),tb=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,tS=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,tx=l.vc.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>!!n.includes("line-through")&&{}}],renderHTML({HTMLAttributes:n}){return["s",(0,l.P1)(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[(0,l.Cf)({find:tb,type:this.type})]},addPasteRules(){return[(0,l.K9)({find:tS,type:this.type})]}}),tw=l.NB.create({name:"text",group:"inline"}),tC=l.vc.create({name:"underline",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>!!n.includes("underline")&&{}}],renderHTML({HTMLAttributes:n}){return["u",(0,l.P1)(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),tM=a(9273),tT=l.hj.create({name:"starterKit",addExtensions(){var n,o,a,l;let m=[];return!1!==this.options.bold&&m.push(R.configure(this.options.bold)),!1!==this.options.blockquote&&m.push(S.configure(this.options.blockquote)),!1!==this.options.bulletList&&m.push(tu.configure(this.options.bulletList)),!1!==this.options.code&&m.push(j.configure(this.options.code)),!1!==this.options.codeBlock&&m.push(H.configure(this.options.codeBlock)),!1!==this.options.document&&m.push(_.configure(this.options.document)),!1!==this.options.dropcursor&&m.push(tM.m$.configure(this.options.dropcursor)),!1!==this.options.gapcursor&&m.push(tM.fj.configure(this.options.gapcursor)),!1!==this.options.hardBreak&&m.push($.configure(this.options.hardBreak)),!1!==this.options.heading&&m.push(W.configure(this.options.heading)),!1!==this.options.undoRedo&&m.push(tM.QA.configure(this.options.undoRedo)),!1!==this.options.horizontalRule&&m.push(J.configure(this.options.horizontalRule)),!1!==this.options.italic&&m.push(tn.configure(this.options.italic)),!1!==this.options.listItem&&m.push(tp.configure(this.options.listItem)),!1!==this.options.listKeymap&&m.push(th.configure(null==(n=this.options)?void 0:n.listKeymap)),!1!==this.options.link&&m.push(to.rU.configure(null==(o=this.options)?void 0:o.link)),!1!==this.options.orderedList&&m.push(tm.configure(this.options.orderedList)),!1!==this.options.paragraph&&m.push(tk.configure(this.options.paragraph)),!1!==this.options.strike&&m.push(tx.configure(this.options.strike)),!1!==this.options.text&&m.push(tw.configure(this.options.text)),!1!==this.options.underline&&m.push(tC.configure(null==(a=this.options)?void 0:a.underline)),!1!==this.options.trailingNode&&m.push(tM.eh.configure(null==(l=this.options)?void 0:l.trailingNode)),m}})},5804:function(n,o,a){"use strict";a.d(o,{Ig:function(){return joinDown},MI:function(){return joinUp},N0:function(){return selectParentNode},NE:function(){return deleteSelection},QK:function(){return newlineInCode},U9:function(){return T},X0:function(){return liftEmptyBlock},Y_:function(){return joinForward},_M:function(){return selectNodeBackward},al:function(){return joinBackward},cR:function(){return joinTextblockForward},mD:function(){return createParagraphNear},nw:function(){return A},o:function(){return selectNodeForward},rr:function(){return joinTextblockBackward},uJ:function(){return setBlockType},uo:function(){return exitCode},xb:function(){return lift},ym:function(){return wrapIn}});var l,m=a(6560),S=a(2806),M=a(2376);let deleteSelection=(n,o)=>!n.selection.empty&&(o&&o(n.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(n,o){let{$cursor:a}=n.selection;return a&&(o?o.endOfTextblock("backward",n):!(a.parentOffset>0))?a:null}let joinBackward=(n,o,a)=>{let l=atBlockStart(n,a);if(!l)return!1;let T=findCutBefore(l);if(!T){let a=l.blockRange(),S=a&&(0,m.k9)(a);return null!=S&&(o&&o(n.tr.lift(a,S).scrollIntoView()),!0)}let A=T.nodeBefore;if(deleteBarrier(n,T,o,-1))return!0;if(0==l.parent.content.size&&(textblockAt(A,"end")||M.qv.isSelectable(A)))for(let a=l.depth;;a--){let E=(0,m.dR)(n.doc,l.before(a),l.after(a),S.p2.empty);if(E&&E.slice.size<E.to-E.from){if(o){let a=n.tr.step(E);a.setSelection(textblockAt(A,"end")?M.Y1.findFrom(a.doc.resolve(a.mapping.map(T.pos,-1)),-1):M.qv.create(a.doc,T.pos-A.nodeSize)),o(a.scrollIntoView())}return!0}if(1==a||l.node(a-1).childCount>1)break}return!!A.isAtom&&T.depth==l.depth-1&&(o&&o(n.tr.delete(T.pos-A.nodeSize,T.pos).scrollIntoView()),!0)},joinTextblockBackward=(n,o,a)=>{let l=atBlockStart(n,a);if(!l)return!1;let m=findCutBefore(l);return!!m&&joinTextblocksAround(n,m,o)},joinTextblockForward=(n,o,a)=>{let l=atBlockEnd(n,a);if(!l)return!1;let m=findCutAfter(l);return!!m&&joinTextblocksAround(n,m,o)};function joinTextblocksAround(n,o,a){let l=o.nodeBefore,T=o.pos-1;for(;!l.isTextblock;T--){if(l.type.spec.isolating)return!1;let n=l.lastChild;if(!n)return!1;l=n}let A=o.nodeAfter,E=o.pos+1;for(;!A.isTextblock;E++){if(A.type.spec.isolating)return!1;let n=A.firstChild;if(!n)return!1;A=n}let R=(0,m.dR)(n.doc,T,E,S.p2.empty);if(!R||R.from!=T||R instanceof m.Pu&&R.slice.size>=E-T)return!1;if(a){let o=n.tr.step(R);o.setSelection(M.Bs.create(o.doc,T)),a(o.scrollIntoView())}return!0}function textblockAt(n,o,a=!1){for(let l=n;l;l="start"==o?l.firstChild:l.lastChild){if(l.isTextblock)return!0;if(a&&1!=l.childCount)break}return!1}let selectNodeBackward=(n,o,a)=>{let{$head:l,empty:m}=n.selection,S=l;if(!m)return!1;if(l.parent.isTextblock){if(a?!a.endOfTextblock("backward",n):l.parentOffset>0)return!1;S=findCutBefore(l)}let T=S&&S.nodeBefore;return!!(T&&M.qv.isSelectable(T))&&(o&&o(n.tr.setSelection(M.qv.create(n.doc,S.pos-T.nodeSize)).scrollIntoView()),!0)};function findCutBefore(n){if(!n.parent.type.spec.isolating)for(let o=n.depth-1;o>=0;o--){if(n.index(o)>0)return n.doc.resolve(n.before(o+1));if(n.node(o).type.spec.isolating)break}return null}function atBlockEnd(n,o){let{$cursor:a}=n.selection;return a&&(o?o.endOfTextblock("forward",n):!(a.parentOffset<a.parent.content.size))?a:null}let joinForward=(n,o,a)=>{let l=atBlockEnd(n,a);if(!l)return!1;let T=findCutAfter(l);if(!T)return!1;let A=T.nodeAfter;if(deleteBarrier(n,T,o,1))return!0;if(0==l.parent.content.size&&(textblockAt(A,"start")||M.qv.isSelectable(A))){let a=(0,m.dR)(n.doc,l.before(),l.after(),S.p2.empty);if(a&&a.slice.size<a.to-a.from){if(o){let l=n.tr.step(a);l.setSelection(textblockAt(A,"start")?M.Y1.findFrom(l.doc.resolve(l.mapping.map(T.pos)),1):M.qv.create(l.doc,l.mapping.map(T.pos))),o(l.scrollIntoView())}return!0}}return!!A.isAtom&&T.depth==l.depth-1&&(o&&o(n.tr.delete(T.pos,T.pos+A.nodeSize).scrollIntoView()),!0)},selectNodeForward=(n,o,a)=>{let{$head:l,empty:m}=n.selection,S=l;if(!m)return!1;if(l.parent.isTextblock){if(a?!a.endOfTextblock("forward",n):l.parentOffset<l.parent.content.size)return!1;S=findCutAfter(l)}let T=S&&S.nodeAfter;return!!(T&&M.qv.isSelectable(T))&&(o&&o(n.tr.setSelection(M.qv.create(n.doc,S.pos)).scrollIntoView()),!0)};function findCutAfter(n){if(!n.parent.type.spec.isolating)for(let o=n.depth-1;o>=0;o--){let a=n.node(o);if(n.index(o)+1<a.childCount)return n.doc.resolve(n.after(o+1));if(a.type.spec.isolating)break}return null}let joinUp=(n,o)=>{let a=n.selection,l=a instanceof M.qv,S;if(l){if(a.node.isTextblock||!(0,m.Mn)(n.doc,a.from))return!1;S=a.from}else if(null==(S=(0,m.GJ)(n.doc,a.from,-1)))return!1;if(o){let a=n.tr.join(S);l&&a.setSelection(M.qv.create(a.doc,S-n.doc.resolve(S).nodeBefore.nodeSize)),o(a.scrollIntoView())}return!0},joinDown=(n,o)=>{let a=n.selection,l;if(a instanceof M.qv){if(a.node.isTextblock||!(0,m.Mn)(n.doc,a.to))return!1;l=a.to}else if(null==(l=(0,m.GJ)(n.doc,a.to,1)))return!1;return o&&o(n.tr.join(l).scrollIntoView()),!0},lift=(n,o)=>{let{$from:a,$to:l}=n.selection,S=a.blockRange(l),M=S&&(0,m.k9)(S);return null!=M&&(o&&o(n.tr.lift(S,M).scrollIntoView()),!0)},newlineInCode=(n,o)=>{let{$head:a,$anchor:l}=n.selection;return!!(a.parent.type.spec.code&&a.sameParent(l))&&(o&&o(n.tr.insertText("\n").scrollIntoView()),!0)};function defaultBlockAt(n){for(let o=0;o<n.edgeCount;o++){let{type:a}=n.edge(o);if(a.isTextblock&&!a.hasRequiredAttrs())return a}return null}let exitCode=(n,o)=>{let{$head:a,$anchor:l}=n.selection;if(!a.parent.type.spec.code||!a.sameParent(l))return!1;let m=a.node(-1),S=a.indexAfter(-1),T=defaultBlockAt(m.contentMatchAt(S));if(!T||!m.canReplaceWith(S,S,T))return!1;if(o){let l=a.after(),m=n.tr.replaceWith(l,l,T.createAndFill());m.setSelection(M.Y1.near(m.doc.resolve(l),1)),o(m.scrollIntoView())}return!0},createParagraphNear=(n,o)=>{let a=n.selection,{$from:l,$to:m}=a;if(a instanceof M.C1||l.parent.inlineContent||m.parent.inlineContent)return!1;let S=defaultBlockAt(m.parent.contentMatchAt(m.indexAfter()));if(!S||!S.isTextblock)return!1;if(o){let a=(!l.parentOffset&&m.index()<m.parent.childCount?l:m).pos,T=n.tr.insert(a,S.createAndFill());T.setSelection(M.Bs.create(T.doc,a+1)),o(T.scrollIntoView())}return!0},liftEmptyBlock=(n,o)=>{let{$cursor:a}=n.selection;if(!a||a.parent.content.size)return!1;if(a.depth>1&&a.after()!=a.end(-1)){let l=a.before();if((0,m.Ax)(n.doc,l))return o&&o(n.tr.split(l).scrollIntoView()),!0}let l=a.blockRange(),S=l&&(0,m.k9)(l);return null!=S&&(o&&o(n.tr.lift(l,S).scrollIntoView()),!0)},selectParentNode=(n,o)=>{let{$from:a,to:l}=n.selection,m,S=a.sharedDepth(l);return 0!=S&&(m=a.before(S),o&&o(n.tr.setSelection(M.qv.create(n.doc,m))),!0)};function deleteBarrier(n,o,a,l){let T,A,E,R=o.nodeBefore,O=o.nodeAfter,N,j,B=R.type.spec.isolating||O.type.spec.isolating;if(!B&&(T=o.nodeBefore,A=o.nodeAfter,E=o.index(),T&&A&&T.type.compatibleContent(A.type)&&(!T.content.size&&o.parent.canReplace(E-1,E)?(a&&a(n.tr.delete(o.pos-T.nodeSize,o.pos).scrollIntoView()),!0):!!(o.parent.canReplace(E,E+1)&&(A.isTextblock||(0,m.Mn)(n.doc,o.pos)))&&(a&&a(n.tr.join(o.pos).scrollIntoView()),!0))))return!0;let z=!B&&o.parent.canReplace(o.index(),o.index()+1);if(z&&(N=(j=R.contentMatchAt(R.childCount)).findWrapping(O.type))&&j.matchType(N[0]||O.type).validEnd){if(a){let l=o.pos+O.nodeSize,M=S.HY.empty;for(let n=N.length-1;n>=0;n--)M=S.HY.from(N[n].create(null,M));M=S.HY.from(R.copy(M));let T=n.tr.step(new m.FC(o.pos-1,l,o.pos,l,new S.p2(M,1,0),N.length,!0)),A=T.doc.resolve(l+2*N.length);A.nodeAfter&&A.nodeAfter.type==R.type&&(0,m.Mn)(T.doc,A.pos)&&T.join(A.pos),a(T.scrollIntoView())}return!0}let P=O.type.spec.isolating||l>0&&B?null:M.Y1.findFrom(o,1),H=P&&P.$from.blockRange(P.$to),_=H&&(0,m.k9)(H);if(null!=_&&_>=o.depth)return a&&a(n.tr.lift(H,_).scrollIntoView()),!0;if(z&&textblockAt(O,"start",!0)&&textblockAt(R,"end")){let l=R,M=[];for(;M.push(l),!l.isTextblock;)l=l.lastChild;let T=O,A=1;for(;!T.isTextblock;T=T.firstChild)A++;if(l.canReplace(l.childCount,l.childCount,T.content)){if(a){let l=S.HY.empty;for(let n=M.length-1;n>=0;n--)l=S.HY.from(M[n].copy(l));a(n.tr.step(new m.FC(o.pos-M.length,o.pos+O.nodeSize,o.pos+A,o.pos+O.nodeSize-A,new S.p2(l,M.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function selectTextblockSide(n){return function(o,a){let l=o.selection,m=n<0?l.$from:l.$to,S=m.depth;for(;m.node(S).isInline;){if(!S)return!1;S--}return!!m.node(S).isTextblock&&(a&&a(o.tr.setSelection(M.Bs.create(o.doc,n<0?m.start(S):m.end(S)))),!0)}}let T=selectTextblockSide(-1),A=selectTextblockSide(1);function wrapIn(n,o=null){return function(a,l){let{$from:S,$to:M}=a.selection,T=S.blockRange(M),A=T&&(0,m.nd)(T,n,o);return!!A&&(l&&l(a.tr.wrap(T,A).scrollIntoView()),!0)}}function setBlockType(n,o=null){return function(a,l){let m=!1;for(let l=0;l<a.selection.ranges.length&&!m;l++){let{$from:{pos:S},$to:{pos:M}}=a.selection.ranges[l];a.doc.nodesBetween(S,M,(l,S)=>{if(m)return!1;if(!(!l.isTextblock||l.hasMarkup(n,o))){if(l.type==n)m=!0;else{let o=a.doc.resolve(S),l=o.index();m=o.parent.canReplaceWith(l,l+1,n)}}})}if(!m)return!1;if(l){let m=a.tr;for(let l=0;l<a.selection.ranges.length;l++){let{$from:{pos:S},$to:{pos:M}}=a.selection.ranges[l];m.setBlockType(S,M,n,o)}l(m.scrollIntoView())}return!0}}function chainCommands(...n){return function(o,a,l){for(let m=0;m<n.length;m++)if(n[m](o,a,l))return!0;return!1}}let E=chainCommands(deleteSelection,joinBackward,selectNodeBackward),R=chainCommands(deleteSelection,joinForward,selectNodeForward),O={Enter:chainCommands(newlineInCode,createParagraphNear,liftEmptyBlock,(n,o)=>{let{$from:a,$to:S}=n.selection;if(n.selection instanceof M.qv&&n.selection.node.isBlock)return!!(a.parentOffset&&(0,m.Ax)(n.doc,a.pos))&&(o&&o(n.tr.split(a.pos).scrollIntoView()),!0);if(!a.depth)return!1;let T=[],A,E,R=!1,O=!1;for(let n=a.depth;;n--){if(a.node(n).isBlock){R=a.end(n)==a.pos+(a.depth-n),O=a.start(n)==a.pos-(a.depth-n),E=defaultBlockAt(a.node(n-1).contentMatchAt(a.indexAfter(n-1)));let o=l&&l(S.parent,R,a);T.unshift(o||(R&&E?{type:E}:null)),A=n;break}if(1==n)return!1;T.unshift(null)}let N=n.tr;(n.selection instanceof M.Bs||n.selection instanceof M.C1)&&N.deleteSelection();let j=N.mapping.map(a.pos),B=(0,m.Ax)(N.doc,j,T.length,T);if(B||(T[0]=E?{type:E}:null,B=(0,m.Ax)(N.doc,j,T.length,T)),!B)return!1;if(N.split(j,T.length,T),!R&&O&&a.node(A).type!=E){let n=N.mapping.map(a.before(A)),o=N.doc.resolve(n);E&&a.node(A-1).canReplaceWith(o.index(),o.index()+1,E)&&N.setNodeMarkup(N.mapping.map(a.before(A)),E)}return o&&o(N.scrollIntoView()),!0}),"Mod-Enter":exitCode,Backspace:E,"Mod-Backspace":E,"Shift-Backspace":E,Delete:R,"Mod-Delete":R,"Mod-a":(n,o)=>(o&&o(n.tr.setSelection(new M.C1(n.doc))),!0)},N={"Ctrl-h":O.Backspace,"Alt-Backspace":O["Mod-Backspace"],"Ctrl-d":O.Delete,"Ctrl-Alt-Backspace":O["Mod-Delete"],"Alt-Delete":O["Mod-Delete"],"Alt-d":O["Mod-Delete"],"Ctrl-a":T,"Ctrl-e":A};for(let n in O)N[n]=O[n];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform()},2696:function(n,o,a){"use strict";a.d(o,{$:function(){return keydownHandler},h:function(){return keymap}});for(var l={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},m={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},S="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),M="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),T=0;T<10;T++)l[48+T]=l[96+T]=String(T);for(var T=1;T<=24;T++)l[T+111]="F"+T;for(var T=65;T<=90;T++)l[T]=String.fromCharCode(T+32),m[T]=String.fromCharCode(T);for(var A in l)m.hasOwnProperty(A)||(m[A]=l[A]);var E=a(2376);let R="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),O="undefined"!=typeof navigator&&/Win/.test(navigator.platform);function modifiers(n,o,a=!0){return o.altKey&&(n="Alt-"+n),o.ctrlKey&&(n="Ctrl-"+n),o.metaKey&&(n="Meta-"+n),a&&o.shiftKey&&(n="Shift-"+n),n}function keymap(n){return new E.Sy({props:{handleKeyDown:keydownHandler(n)}})}function keydownHandler(n){let o=function(n){let o=Object.create(null);for(let a in n)o[function(n){let o,a,l,m,S=n.split(/-(?!$)/),M=S[S.length-1];"Space"==M&&(M=" ");for(let n=0;n<S.length-1;n++){let M=S[n];if(/^(cmd|meta|m)$/i.test(M))m=!0;else if(/^a(lt)?$/i.test(M))o=!0;else if(/^(c|ctrl|control)$/i.test(M))a=!0;else if(/^s(hift)?$/i.test(M))l=!0;else if(/^mod$/i.test(M))R?m=!0:a=!0;else throw Error("Unrecognized modifier name: "+M)}return o&&(M="Alt-"+M),a&&(M="Ctrl-"+M),m&&(M="Meta-"+M),l&&(M="Shift-"+M),M}(a)]=n[a];return o}(n);return function(n,a){var T;let A=("Esc"==(T=!(S&&a.metaKey&&a.shiftKey&&!a.ctrlKey&&!a.altKey||M&&a.shiftKey&&a.key&&1==a.key.length||"Unidentified"==a.key)&&a.key||(a.shiftKey?m:l)[a.keyCode]||a.key||"Unidentified")&&(T="Escape"),"Del"==T&&(T="Delete"),"Left"==T&&(T="ArrowLeft"),"Up"==T&&(T="ArrowUp"),"Right"==T&&(T="ArrowRight"),"Down"==T&&(T="ArrowDown"),T),E,R=o[modifiers(A,a)];if(R&&R(n.state,n.dispatch,n))return!0;if(1==A.length&&" "!=A){if(a.shiftKey){let l=o[modifiers(A,a,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((a.altKey||a.metaKey||a.ctrlKey)&&!(O&&a.ctrlKey&&a.altKey)&&(E=l[a.keyCode])&&E!=A){let l=o[modifiers(E,a)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}},2806:function(n,o,a){"use strict";function OrderedMap(n){this.content=n}a.d(o,{aw:function(){return DOMParser},PW:function(){return DOMSerializer},HY:function(){return Fragment},vc:function(){return Mark},ZU:function(){return MarkType},NB:function(){return Node},Ts:function(){return NodeRange},e4:function(){return ReplaceError},V_:function(){return Schema},p2:function(){return Slice}}),OrderedMap.prototype={constructor:OrderedMap,find:function(n){for(var o=0;o<this.content.length;o+=2)if(this.content[o]===n)return o;return -1},get:function(n){var o=this.find(n);return -1==o?void 0:this.content[o+1]},update:function(n,o,a){var l=a&&a!=n?this.remove(a):this,m=l.find(n),S=l.content.slice();return -1==m?S.push(a||n,o):(S[m+1]=o,a&&(S[m]=a)),new OrderedMap(S)},remove:function(n){var o=this.find(n);if(-1==o)return this;var a=this.content.slice();return a.splice(o,2),new OrderedMap(a)},addToStart:function(n,o){return new OrderedMap([n,o].concat(this.remove(n).content))},addToEnd:function(n,o){var a=this.remove(n).content.slice();return a.push(n,o),new OrderedMap(a)},addBefore:function(n,o,a){var l=this.remove(o),m=l.content.slice(),S=l.find(n);return m.splice(-1==S?m.length:S,0,o,a),new OrderedMap(m)},forEach:function(n){for(var o=0;o<this.content.length;o+=2)n(this.content[o],this.content[o+1])},prepend:function(n){return(n=OrderedMap.from(n)).size?new OrderedMap(n.content.concat(this.subtract(n).content)):this},append:function(n){return(n=OrderedMap.from(n)).size?new OrderedMap(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var o=this;n=OrderedMap.from(n);for(var a=0;a<n.content.length;a+=2)o=o.remove(n.content[a]);return o},toObject:function(){var n={};return this.forEach(function(o,a){n[o]=a}),n},get size(){return this.content.length>>1}},OrderedMap.from=function(n){if(n instanceof OrderedMap)return n;var o=[];if(n)for(var a in n)o.push(a,n[a]);return new OrderedMap(o)};let Fragment=class Fragment{constructor(n,o){if(this.content=n,this.size=o||0,null==o)for(let o=0;o<n.length;o++)this.size+=n[o].nodeSize}nodesBetween(n,o,a,l=0,m){for(let S=0,M=0;M<o;S++){let T=this.content[S],A=M+T.nodeSize;if(A>n&&!1!==a(T,l+M,m||null,S)&&T.content.size){let m=M+1;T.nodesBetween(Math.max(0,n-m),Math.min(T.content.size,o-m),a,l+m)}M=A}}descendants(n){this.nodesBetween(0,this.size,n)}textBetween(n,o,a,l){let m="",S=!0;return this.nodesBetween(n,o,(M,T)=>{let A=M.isText?M.text.slice(Math.max(n,T)-T,o-T):M.isLeaf?l?"function"==typeof l?l(M):l:M.type.spec.leafText?M.type.spec.leafText(M):"":"";M.isBlock&&(M.isLeaf&&A||M.isTextblock)&&a&&(S?S=!1:m+=a),m+=A},0),m}append(n){if(!n.size)return this;if(!this.size)return n;let o=this.lastChild,a=n.firstChild,l=this.content.slice(),m=0;for(o.isText&&o.sameMarkup(a)&&(l[l.length-1]=o.withText(o.text+a.text),m=1);m<n.content.length;m++)l.push(n.content[m]);return new Fragment(l,this.size+n.size)}cut(n,o=this.size){if(0==n&&o==this.size)return this;let a=[],l=0;if(o>n)for(let m=0,S=0;S<o;m++){let M=this.content[m],T=S+M.nodeSize;T>n&&((S<n||T>o)&&(M=M.isText?M.cut(Math.max(0,n-S),Math.min(M.text.length,o-S)):M.cut(Math.max(0,n-S-1),Math.min(M.content.size,o-S-1))),a.push(M),l+=M.nodeSize),S=T}return new Fragment(a,l)}cutByIndex(n,o){return n==o?Fragment.empty:0==n&&o==this.content.length?this:new Fragment(this.content.slice(n,o))}replaceChild(n,o){let a=this.content[n];if(a==o)return this;let l=this.content.slice(),m=this.size+o.nodeSize-a.nodeSize;return l[n]=o,new Fragment(l,m)}addToStart(n){return new Fragment([n].concat(this.content),this.size+n.nodeSize)}addToEnd(n){return new Fragment(this.content.concat(n),this.size+n.nodeSize)}eq(n){if(this.content.length!=n.content.length)return!1;for(let o=0;o<this.content.length;o++)if(!this.content[o].eq(n.content[o]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(n){let o=this.content[n];if(!o)throw RangeError("Index "+n+" out of range for "+this);return o}maybeChild(n){return this.content[n]||null}forEach(n){for(let o=0,a=0;o<this.content.length;o++){let l=this.content[o];n(l,a,o),a+=l.nodeSize}}findDiffStart(n,o=0){return function findDiffStart(n,o,a){for(let l=0;;l++){if(l==n.childCount||l==o.childCount)return n.childCount==o.childCount?null:a;let m=n.child(l),S=o.child(l);if(m==S){a+=m.nodeSize;continue}if(!m.sameMarkup(S))return a;if(m.isText&&m.text!=S.text){for(let n=0;m.text[n]==S.text[n];n++)a++;return a}if(m.content.size||S.content.size){let n=findDiffStart(m.content,S.content,a+1);if(null!=n)return n}a+=m.nodeSize}}(this,n,o)}findDiffEnd(n,o=this.size,a=n.size){return function findDiffEnd(n,o,a,l){for(let m=n.childCount,S=o.childCount;;){if(0==m||0==S)return m==S?null:{a:a,b:l};let M=n.child(--m),T=o.child(--S),A=M.nodeSize;if(M==T){a-=A,l-=A;continue}if(!M.sameMarkup(T))return{a:a,b:l};if(M.isText&&M.text!=T.text){let n=0,o=Math.min(M.text.length,T.text.length);for(;n<o&&M.text[M.text.length-n-1]==T.text[T.text.length-n-1];)n++,a--,l--;return{a:a,b:l}}if(M.content.size||T.content.size){let n=findDiffEnd(M.content,T.content,a-1,l-1);if(n)return n}a-=A,l-=A}}(this,n,o,a)}findIndex(n){if(0==n)return retIndex(0,n);if(n==this.size)return retIndex(this.content.length,n);if(n>this.size||n<0)throw RangeError(`Position ${n} outside of fragment (${this})`);for(let o=0,a=0;;o++){let l=a+this.child(o).nodeSize;if(l>=n){if(l==n)return retIndex(o+1,l);return retIndex(o,a)}a=l}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(n=>n.toJSON()):null}static fromJSON(n,o){if(!o)return Fragment.empty;if(!Array.isArray(o))throw RangeError("Invalid input for Fragment.fromJSON");return new Fragment(o.map(n.nodeFromJSON))}static fromArray(n){if(!n.length)return Fragment.empty;let o,a=0;for(let l=0;l<n.length;l++){let m=n[l];a+=m.nodeSize,l&&m.isText&&n[l-1].sameMarkup(m)?(o||(o=n.slice(0,l)),o[o.length-1]=m.withText(o[o.length-1].text+m.text)):o&&o.push(m)}return new Fragment(o||n,a)}static from(n){if(!n)return Fragment.empty;if(n instanceof Fragment)return n;if(Array.isArray(n))return this.fromArray(n);if(n.attrs)return new Fragment([n],n.nodeSize);throw RangeError("Can not convert "+n+" to a Fragment"+(n.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};Fragment.empty=new Fragment([],0);let l={index:0,offset:0};function retIndex(n,o){return l.index=n,l.offset=o,l}function compareDeep(n,o){if(n===o)return!0;if(!(n&&"object"==typeof n)||!(o&&"object"==typeof o))return!1;let a=Array.isArray(n);if(Array.isArray(o)!=a)return!1;if(a){if(n.length!=o.length)return!1;for(let a=0;a<n.length;a++)if(!compareDeep(n[a],o[a]))return!1}else{for(let a in n)if(!(a in o)||!compareDeep(n[a],o[a]))return!1;for(let a in o)if(!(a in n))return!1}return!0}let Mark=class Mark{constructor(n,o){this.type=n,this.attrs=o}addToSet(n){let o,a=!1;for(let l=0;l<n.length;l++){let m=n[l];if(this.eq(m))return n;if(this.type.excludes(m.type))o||(o=n.slice(0,l));else{if(m.type.excludes(this.type))return n;!a&&m.type.rank>this.type.rank&&(o||(o=n.slice(0,l)),o.push(this),a=!0),o&&o.push(m)}}return o||(o=n.slice()),a||o.push(this),o}removeFromSet(n){for(let o=0;o<n.length;o++)if(this.eq(n[o]))return n.slice(0,o).concat(n.slice(o+1));return n}isInSet(n){for(let o=0;o<n.length;o++)if(this.eq(n[o]))return!0;return!1}eq(n){return this==n||this.type==n.type&&compareDeep(this.attrs,n.attrs)}toJSON(){let n={type:this.type.name};for(let o in this.attrs){n.attrs=this.attrs;break}return n}static fromJSON(n,o){if(!o)throw RangeError("Invalid input for Mark.fromJSON");let a=n.marks[o.type];if(!a)throw RangeError(`There is no mark type ${o.type} in this schema`);let l=a.create(o.attrs);return a.checkAttrs(l.attrs),l}static sameSet(n,o){if(n==o)return!0;if(n.length!=o.length)return!1;for(let a=0;a<n.length;a++)if(!n[a].eq(o[a]))return!1;return!0}static setFrom(n){if(!n||Array.isArray(n)&&0==n.length)return Mark.none;if(n instanceof Mark)return[n];let o=n.slice();return o.sort((n,o)=>n.type.rank-o.type.rank),o}};Mark.none=[];let ReplaceError=class ReplaceError extends Error{};let Slice=class Slice{constructor(n,o,a){this.content=n,this.openStart=o,this.openEnd=a}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(n,o){let a=function insertInto(n,o,a,l){let{index:m,offset:S}=n.findIndex(o),M=n.maybeChild(m);if(S==o||M.isText)return l&&!l.canReplace(m,m,a)?null:n.cut(0,o).append(a).append(n.cut(o));let T=insertInto(M.content,o-S-1,a,M);return T&&n.replaceChild(m,M.copy(T))}(this.content,n+this.openStart,o);return a&&new Slice(a,this.openStart,this.openEnd)}removeBetween(n,o){return new Slice(function removeRange(n,o,a){let{index:l,offset:m}=n.findIndex(o),S=n.maybeChild(l),{index:M,offset:T}=n.findIndex(a);if(m==o||S.isText){if(T!=a&&!n.child(M).isText)throw RangeError("Removing non-flat range");return n.cut(0,o).append(n.cut(a))}if(l!=M)throw RangeError("Removing non-flat range");return n.replaceChild(l,S.copy(removeRange(S.content,o-m-1,a-m-1)))}(this.content,n+this.openStart,o+this.openStart),this.openStart,this.openEnd)}eq(n){return this.content.eq(n.content)&&this.openStart==n.openStart&&this.openEnd==n.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let n={content:this.content.toJSON()};return this.openStart>0&&(n.openStart=this.openStart),this.openEnd>0&&(n.openEnd=this.openEnd),n}static fromJSON(n,o){if(!o)return Slice.empty;let a=o.openStart||0,l=o.openEnd||0;if("number"!=typeof a||"number"!=typeof l)throw RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(n,o.content),a,l)}static maxOpen(n,o=!0){let a=0,l=0;for(let l=n.firstChild;l&&!l.isLeaf&&(o||!l.type.spec.isolating);l=l.firstChild)a++;for(let a=n.lastChild;a&&!a.isLeaf&&(o||!a.type.spec.isolating);a=a.lastChild)l++;return new Slice(n,a,l)}};function checkJoin(n,o){if(!o.type.compatibleContent(n.type))throw new ReplaceError("Cannot join "+o.type.name+" onto "+n.type.name)}function joinable(n,o,a){let l=n.node(a);return checkJoin(l,o.node(a)),l}function addNode(n,o){let a=o.length-1;a>=0&&n.isText&&n.sameMarkup(o[a])?o[a]=n.withText(o[a].text+n.text):o.push(n)}function addRange(n,o,a,l){let m=(o||n).node(a),S=0,M=o?o.index(a):m.childCount;n&&(S=n.index(a),n.depth>a?S++:n.textOffset&&(addNode(n.nodeAfter,l),S++));for(let n=S;n<M;n++)addNode(m.child(n),l);o&&o.depth==a&&o.textOffset&&addNode(o.nodeBefore,l)}function dist_close(n,o){return n.type.checkContent(o),n.copy(o)}function replaceTwoWay(n,o,a){let l=[];return addRange(null,n,a,l),n.depth>a&&addNode(dist_close(joinable(n,o,a+1),replaceTwoWay(n,o,a+1)),l),addRange(o,null,a,l),new Fragment(l)}Slice.empty=new Slice(Fragment.empty,0,0);let ResolvedPos=class ResolvedPos{constructor(n,o,a){this.pos=n,this.path=o,this.parentOffset=a,this.depth=o.length/3-1}resolveDepth(n){return null==n?this.depth:n<0?this.depth+n:n}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(n){return this.path[3*this.resolveDepth(n)]}index(n){return this.path[3*this.resolveDepth(n)+1]}indexAfter(n){return n=this.resolveDepth(n),this.index(n)+(n!=this.depth||this.textOffset?1:0)}start(n){return 0==(n=this.resolveDepth(n))?0:this.path[3*n-1]+1}end(n){return n=this.resolveDepth(n),this.start(n)+this.node(n).content.size}before(n){if(!(n=this.resolveDepth(n)))throw RangeError("There is no position before the top-level node");return n==this.depth+1?this.pos:this.path[3*n-1]}after(n){if(!(n=this.resolveDepth(n)))throw RangeError("There is no position after the top-level node");return n==this.depth+1?this.pos:this.path[3*n-1]+this.path[3*n].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let n=this.parent,o=this.index(this.depth);if(o==n.childCount)return null;let a=this.pos-this.path[this.path.length-1],l=n.child(o);return a?n.child(o).cut(a):l}get nodeBefore(){let n=this.index(this.depth),o=this.pos-this.path[this.path.length-1];return o?this.parent.child(n).cut(0,o):0==n?null:this.parent.child(n-1)}posAtIndex(n,o){o=this.resolveDepth(o);let a=this.path[3*o],l=0==o?0:this.path[3*o-1]+1;for(let o=0;o<n;o++)l+=a.child(o).nodeSize;return l}marks(){let n=this.parent,o=this.index();if(0==n.content.size)return Mark.none;if(this.textOffset)return n.child(o).marks;let a=n.maybeChild(o-1),l=n.maybeChild(o);if(!a){let n=a;a=l,l=n}let m=a.marks;for(var S=0;S<m.length;S++)!1!==m[S].type.spec.inclusive||l&&m[S].isInSet(l.marks)||(m=m[S--].removeFromSet(m));return m}marksAcross(n){let o=this.parent.maybeChild(this.index());if(!o||!o.isInline)return null;let a=o.marks,l=n.parent.maybeChild(n.index());for(var m=0;m<a.length;m++)!1!==a[m].type.spec.inclusive||l&&a[m].isInSet(l.marks)||(a=a[m--].removeFromSet(a));return a}sharedDepth(n){for(let o=this.depth;o>0;o--)if(this.start(o)<=n&&this.end(o)>=n)return o;return 0}blockRange(n=this,o){if(n.pos<this.pos)return n.blockRange(this);for(let a=this.depth-(this.parent.inlineContent||this.pos==n.pos?1:0);a>=0;a--)if(n.pos<=this.end(a)&&(!o||o(this.node(a))))return new NodeRange(this,n,a);return null}sameParent(n){return this.pos-this.parentOffset==n.pos-n.parentOffset}max(n){return n.pos>this.pos?n:this}min(n){return n.pos<this.pos?n:this}toString(){let n="";for(let o=1;o<=this.depth;o++)n+=(n?"/":"")+this.node(o).type.name+"_"+this.index(o-1);return n+":"+this.parentOffset}static resolve(n,o){if(!(o>=0&&o<=n.content.size))throw RangeError("Position "+o+" out of range");let a=[],l=0,m=o;for(let o=n;;){let{index:n,offset:S}=o.content.findIndex(m),M=m-S;if(a.push(o,n,l+S),!M||(o=o.child(n)).isText)break;m=M-1,l+=S+1}return new ResolvedPos(o,a,m)}static resolveCached(n,o){let a=S.get(n);if(a)for(let n=0;n<a.elts.length;n++){let l=a.elts[n];if(l.pos==o)return l}else S.set(n,a=new ResolveCache);let l=a.elts[a.i]=ResolvedPos.resolve(n,o);return a.i=(a.i+1)%m,l}};let ResolveCache=class ResolveCache{constructor(){this.elts=[],this.i=0}};let m=12,S=new WeakMap;let NodeRange=class NodeRange{constructor(n,o,a){this.$from=n,this.$to=o,this.depth=a}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}};let M=Object.create(null);let Node=class Node{constructor(n,o,a,l=Mark.none){this.type=n,this.attrs=o,this.marks=l,this.content=a||Fragment.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(n){return this.content.child(n)}maybeChild(n){return this.content.maybeChild(n)}forEach(n){this.content.forEach(n)}nodesBetween(n,o,a,l=0){this.content.nodesBetween(n,o,a,l,this)}descendants(n){this.nodesBetween(0,this.content.size,n)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(n,o,a,l){return this.content.textBetween(n,o,a,l)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(n){return this==n||this.sameMarkup(n)&&this.content.eq(n.content)}sameMarkup(n){return this.hasMarkup(n.type,n.attrs,n.marks)}hasMarkup(n,o,a){return this.type==n&&compareDeep(this.attrs,o||n.defaultAttrs||M)&&Mark.sameSet(this.marks,a||Mark.none)}copy(n=null){return n==this.content?this:new Node(this.type,this.attrs,n,this.marks)}mark(n){return n==this.marks?this:new Node(this.type,this.attrs,this.content,n)}cut(n,o=this.content.size){return 0==n&&o==this.content.size?this:this.copy(this.content.cut(n,o))}slice(n,o=this.content.size,a=!1){if(n==o)return Slice.empty;let l=this.resolve(n),m=this.resolve(o),S=a?0:l.sharedDepth(o),M=l.start(S),T=l.node(S).content.cut(l.pos-M,m.pos-M);return new Slice(T,l.depth-S,m.depth-S)}replace(n,o,a){return function(n,o,a){if(a.openStart>n.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(n.depth-a.openStart!=o.depth-a.openEnd)throw new ReplaceError("Inconsistent open depths");return function replaceOuter(n,o,a,l){let m=n.index(l),S=n.node(l);if(m==o.index(l)&&l<n.depth-a.openStart){let M=replaceOuter(n,o,a,l+1);return S.copy(S.content.replaceChild(m,M))}if(!a.content.size)return dist_close(S,replaceTwoWay(n,o,l));if(a.openStart||a.openEnd||n.depth!=l||o.depth!=l){let{start:m,end:M}=function(n,o){let a=o.depth-n.openStart,l=o.node(a).copy(n.content);for(let n=a-1;n>=0;n--)l=o.node(n).copy(Fragment.from(l));return{start:l.resolveNoCache(n.openStart+a),end:l.resolveNoCache(l.content.size-n.openEnd-a)}}(a,n);return dist_close(S,function replaceThreeWay(n,o,a,l,m){let S=n.depth>m&&joinable(n,o,m+1),M=l.depth>m&&joinable(a,l,m+1),T=[];return addRange(null,n,m,T),S&&M&&o.index(m)==a.index(m)?(checkJoin(S,M),addNode(dist_close(S,replaceThreeWay(n,o,a,l,m+1)),T)):(S&&addNode(dist_close(S,replaceTwoWay(n,o,m+1)),T),addRange(o,a,m,T),M&&addNode(dist_close(M,replaceTwoWay(a,l,m+1)),T)),addRange(l,null,m,T),new Fragment(T)}(n,m,M,o,l))}{let l=n.parent,m=l.content;return dist_close(l,m.cut(0,n.parentOffset).append(a.content).append(m.cut(o.parentOffset)))}}(n,o,a,0)}(this.resolve(n),this.resolve(o),a)}nodeAt(n){for(let o=this;;){let{index:a,offset:l}=o.content.findIndex(n);if(!(o=o.maybeChild(a)))return null;if(l==n||o.isText)return o;n-=l+1}}childAfter(n){let{index:o,offset:a}=this.content.findIndex(n);return{node:this.content.maybeChild(o),index:o,offset:a}}childBefore(n){if(0==n)return{node:null,index:0,offset:0};let{index:o,offset:a}=this.content.findIndex(n);if(a<n)return{node:this.content.child(o),index:o,offset:a};let l=this.content.child(o-1);return{node:l,index:o-1,offset:a-l.nodeSize}}resolve(n){return ResolvedPos.resolveCached(this,n)}resolveNoCache(n){return ResolvedPos.resolve(this,n)}rangeHasMark(n,o,a){let l=!1;return o>n&&this.nodesBetween(n,o,n=>(a.isInSet(n.marks)&&(l=!0),!l)),l}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let n=this.type.name;return this.content.size&&(n+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,n)}contentMatchAt(n){let o=this.type.contentMatch.matchFragment(this.content,0,n);if(!o)throw Error("Called contentMatchAt on a node with invalid content");return o}canReplace(n,o,a=Fragment.empty,l=0,m=a.childCount){let S=this.contentMatchAt(n).matchFragment(a,l,m),M=S&&S.matchFragment(this.content,o);if(!M||!M.validEnd)return!1;for(let n=l;n<m;n++)if(!this.type.allowsMarks(a.child(n).marks))return!1;return!0}canReplaceWith(n,o,a,l){if(l&&!this.type.allowsMarks(l))return!1;let m=this.contentMatchAt(n).matchType(a),S=m&&m.matchFragment(this.content,o);return!!S&&S.validEnd}canAppend(n){return n.content.size?this.canReplace(this.childCount,this.childCount,n.content):this.type.compatibleContent(n.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let n=Mark.none;for(let o=0;o<this.marks.length;o++){let a=this.marks[o];a.type.checkAttrs(a.attrs),n=a.addToSet(n)}if(!Mark.sameSet(n,this.marks))throw RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let n={type:this.type.name};for(let o in this.attrs){n.attrs=this.attrs;break}return this.content.size&&(n.content=this.content.toJSON()),this.marks.length&&(n.marks=this.marks.map(n=>n.toJSON())),n}static fromJSON(n,o){let a;if(!o)throw RangeError("Invalid input for Node.fromJSON");if(o.marks){if(!Array.isArray(o.marks))throw RangeError("Invalid mark data for Node.fromJSON");a=o.marks.map(n.markFromJSON)}if("text"==o.type){if("string"!=typeof o.text)throw RangeError("Invalid text node in JSON");return n.text(o.text,a)}let l=Fragment.fromJSON(n,o.content),m=n.nodeType(o.type).create(o.attrs,l,a);return m.type.checkAttrs(m.attrs),m}};Node.prototype.text=void 0;let TextNode=class TextNode extends Node{constructor(n,o,a,l){if(super(n,o,null,l),!a)throw RangeError("Empty text nodes are not allowed");this.text=a}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(n,o){return this.text.slice(n,o)}get nodeSize(){return this.text.length}mark(n){return n==this.marks?this:new TextNode(this.type,this.attrs,this.text,n)}withText(n){return n==this.text?this:new TextNode(this.type,this.attrs,n,this.marks)}cut(n=0,o=this.text.length){return 0==n&&o==this.text.length?this:this.withText(this.text.slice(n,o))}eq(n){return this.sameMarkup(n)&&this.text==n.text}toJSON(){let n=super.toJSON();return n.text=this.text,n}};function wrapMarks(n,o){for(let a=n.length-1;a>=0;a--)o=n[a].type.name+"("+o+")";return o}let ContentMatch=class ContentMatch{constructor(n){this.validEnd=n,this.next=[],this.wrapCache=[]}static parse(n,o){var a;let l,m=new TokenStream(n,o);if(null==m.next)return ContentMatch.empty;let S=function parseExpr(n){let o=[];do o.push(function(n){let o=[];do o.push(function(n){let o=function(n){if(n.eat("(")){let o=parseExpr(n);return n.eat(")")||n.err("Missing closing paren"),o}if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let o=(function(n,o){let a=n.nodeTypes,l=a[o];if(l)return[l];let m=[];for(let n in a){let l=a[n];l.isInGroup(o)&&m.push(l)}return 0==m.length&&n.err("No node type or group '"+o+"' found"),m})(n,n.next).map(o=>(null==n.inline?n.inline=o.isInline:n.inline!=o.isInline&&n.err("Mixing inline and block content"),{type:"name",value:o}));return n.pos++,1==o.length?o[0]:{type:"choice",exprs:o}}}(n);for(;;)if(n.eat("+"))o={type:"plus",expr:o};else if(n.eat("*"))o={type:"star",expr:o};else if(n.eat("?"))o={type:"opt",expr:o};else if(n.eat("{"))o=function(n,o){let a=parseNum(n),l=a;return n.eat(",")&&(l="}"!=n.next?parseNum(n):-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:a,max:l,expr:o}}(n,o);else break;return o}(n));while(n.next&&")"!=n.next&&"|"!=n.next);return 1==o.length?o[0]:{type:"seq",exprs:o}}(n));while(n.eat("|"));return 1==o.length?o[0]:{type:"choice",exprs:o}}(m);m.next&&m.err("Unexpected trailing text");let M=(a=function(n){let o=[[]];return connect(function compile(n,o){if("choice"==n.type)return n.exprs.reduce((n,a)=>n.concat(compile(a,o)),[]);if("seq"==n.type)for(let a=0;;a++){let l=compile(n.exprs[a],o);if(a==n.exprs.length-1)return l;connect(l,o=node())}else if("star"==n.type){let a=node();return edge(o,a),connect(compile(n.expr,a),a),[edge(a)]}else if("plus"==n.type){let a=node();return connect(compile(n.expr,o),a),connect(compile(n.expr,a),a),[edge(a)]}else if("opt"==n.type)return[edge(o)].concat(compile(n.expr,o));else if("range"==n.type){let a=o;for(let o=0;o<n.min;o++){let o=node();connect(compile(n.expr,a),o),a=o}if(-1==n.max)connect(compile(n.expr,a),a);else for(let o=n.min;o<n.max;o++){let o=node();edge(a,o),connect(compile(n.expr,a),o),a=o}return[edge(a)]}else if("name"==n.type)return[edge(o,void 0,n.value)];else throw Error("Unknown expr type")}(n,0),node()),o;function node(){return o.push([])-1}function edge(n,a,l){let m={term:l,to:a};return o[n].push(m),m}function connect(n,o){n.forEach(n=>n.to=o)}}(S),l=Object.create(null),function explore(n){let o=[];n.forEach(n=>{a[n].forEach(({term:n,to:l})=>{let m;if(n){for(let a=0;a<o.length;a++)o[a][0]==n&&(m=o[a][1]);nullFrom(a,l).forEach(a=>{m||o.push([n,m=[]]),-1==m.indexOf(a)&&m.push(a)})}})});let m=l[n.join(",")]=new ContentMatch(n.indexOf(a.length-1)>-1);for(let n=0;n<o.length;n++){let a=o[n][1].sort(cmp);m.next.push({type:o[n][0],next:l[a.join(",")]||explore(a)})}return m}(nullFrom(a,0)));return function(n,o){for(let a=0,l=[n];a<l.length;a++){let n=l[a],m=!n.validEnd,S=[];for(let o=0;o<n.next.length;o++){let{type:a,next:M}=n.next[o];S.push(a.name),m&&!(a.isText||a.hasRequiredAttrs())&&(m=!1),-1==l.indexOf(M)&&l.push(M)}m&&o.err("Only non-generatable nodes ("+S.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(M,m),M}matchType(n){for(let o=0;o<this.next.length;o++)if(this.next[o].type==n)return this.next[o].next;return null}matchFragment(n,o=0,a=n.childCount){let l=this;for(let m=o;l&&m<a;m++)l=l.matchType(n.child(m).type);return l}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let n=0;n<this.next.length;n++){let{type:o}=this.next[n];if(!(o.isText||o.hasRequiredAttrs()))return o}return null}compatible(n){for(let o=0;o<this.next.length;o++)for(let a=0;a<n.next.length;a++)if(this.next[o].type==n.next[a].type)return!0;return!1}fillBefore(n,o=!1,a=0){let l=[this];return function search(m,S){let M=m.matchFragment(n,a);if(M&&(!o||M.validEnd))return Fragment.from(S.map(n=>n.createAndFill()));for(let n=0;n<m.next.length;n++){let{type:o,next:a}=m.next[n];if(!(o.isText||o.hasRequiredAttrs())&&-1==l.indexOf(a)){l.push(a);let n=search(a,S.concat(o));if(n)return n}}return null}(this,[])}findWrapping(n){for(let o=0;o<this.wrapCache.length;o+=2)if(this.wrapCache[o]==n)return this.wrapCache[o+1];let o=this.computeWrapping(n);return this.wrapCache.push(n,o),o}computeWrapping(n){let o=Object.create(null),a=[{match:this,type:null,via:null}];for(;a.length;){let l=a.shift(),m=l.match;if(m.matchType(n)){let n=[];for(let o=l;o.type;o=o.via)n.push(o.type);return n.reverse()}for(let n=0;n<m.next.length;n++){let{type:S,next:M}=m.next[n];S.isLeaf||S.hasRequiredAttrs()||S.name in o||l.type&&!M.validEnd||(a.push({match:S.contentMatch,type:S,via:l}),o[S.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(n){if(n>=this.next.length)throw RangeError(`There's no ${n}th edge in this content match`);return this.next[n]}toString(){let n=[];return!function scan(o){n.push(o);for(let a=0;a<o.next.length;a++)-1==n.indexOf(o.next[a].next)&&scan(o.next[a].next)}(this),n.map((o,a)=>{let l=a+(o.validEnd?"*":" ")+" ";for(let a=0;a<o.next.length;a++)l+=(a?", ":"")+o.next[a].type.name+"->"+n.indexOf(o.next[a].next);return l}).join("\n")}};ContentMatch.empty=new ContentMatch(!0);let TokenStream=class TokenStream{constructor(n,o){this.string=n,this.nodeTypes=o,this.inline=null,this.pos=0,this.tokens=n.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(n){return this.next==n&&(this.pos++||!0)}err(n){throw SyntaxError(n+" (in content expression '"+this.string+"')")}};function parseNum(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let o=Number(n.next);return n.pos++,o}function cmp(n,o){return o-n}function nullFrom(n,o){let a=[];return function scan(o){let l=n[o];if(1==l.length&&!l[0].term)return scan(l[0].to);a.push(o);for(let n=0;n<l.length;n++){let{term:o,to:m}=l[n];o||-1!=a.indexOf(m)||scan(m)}}(o),a.sort(cmp)}function defaultAttrs(n){let o=Object.create(null);for(let a in n){let l=n[a];if(!l.hasDefault)return null;o[a]=l.default}return o}function computeAttrs(n,o){let a=Object.create(null);for(let l in n){let m=o&&o[l];if(void 0===m){let o=n[l];if(o.hasDefault)m=o.default;else throw RangeError("No value supplied for attribute "+l)}a[l]=m}return a}function checkAttrs(n,o,a,l){for(let l in o)if(!(l in n))throw RangeError(`Unsupported attribute ${l} for ${a} of type ${l}`);for(let a in n){let l=n[a];l.validate&&l.validate(o[a])}}function initAttrs(n,o){let a=Object.create(null);if(o)for(let l in o)a[l]=new Attribute(n,l,o[l]);return a}let NodeType=class NodeType{constructor(n,o,a){this.name=n,this.schema=o,this.spec=a,this.markSet=null,this.groups=a.group?a.group.split(" "):[],this.attrs=initAttrs(n,a.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(a.inline||"text"==n),this.isText="text"==n}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(n){return this.groups.indexOf(n)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let n in this.attrs)if(this.attrs[n].isRequired)return!0;return!1}compatibleContent(n){return this==n||this.contentMatch.compatible(n.contentMatch)}computeAttrs(n){return!n&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,n)}create(n=null,o,a){if(this.isText)throw Error("NodeType.create can't construct text nodes");return new Node(this,this.computeAttrs(n),Fragment.from(o),Mark.setFrom(a))}createChecked(n=null,o,a){return o=Fragment.from(o),this.checkContent(o),new Node(this,this.computeAttrs(n),o,Mark.setFrom(a))}createAndFill(n=null,o,a){if(n=this.computeAttrs(n),(o=Fragment.from(o)).size){let n=this.contentMatch.fillBefore(o);if(!n)return null;o=n.append(o)}let l=this.contentMatch.matchFragment(o),m=l&&l.fillBefore(Fragment.empty,!0);return m?new Node(this,n,o.append(m),Mark.setFrom(a)):null}validContent(n){let o=this.contentMatch.matchFragment(n);if(!o||!o.validEnd)return!1;for(let o=0;o<n.childCount;o++)if(!this.allowsMarks(n.child(o).marks))return!1;return!0}checkContent(n){if(!this.validContent(n))throw RangeError(`Invalid content for node ${this.name}: ${n.toString().slice(0,50)}`)}checkAttrs(n){checkAttrs(this.attrs,n,"node",this.name)}allowsMarkType(n){return null==this.markSet||this.markSet.indexOf(n)>-1}allowsMarks(n){if(null==this.markSet)return!0;for(let o=0;o<n.length;o++)if(!this.allowsMarkType(n[o].type))return!1;return!0}allowedMarks(n){let o;if(null==this.markSet)return n;for(let a=0;a<n.length;a++)this.allowsMarkType(n[a].type)?o&&o.push(n[a]):o||(o=n.slice(0,a));return o?o.length?o:Mark.none:n}static compile(n,o){let a=Object.create(null);n.forEach((n,l)=>a[n]=new NodeType(n,o,l));let l=o.spec.topNode||"doc";if(!a[l])throw RangeError("Schema is missing its top node type ('"+l+"')");if(!a.text)throw RangeError("Every schema needs a 'text' type");for(let n in a.text.attrs)throw RangeError("The text node type should not have attributes");return a}};let Attribute=class Attribute{constructor(n,o,a){let l;this.hasDefault=Object.prototype.hasOwnProperty.call(a,"default"),this.default=a.default,this.validate="string"==typeof a.validate?(l=a.validate.split("|"),a=>{let m=null===a?"null":typeof a;if(0>l.indexOf(m))throw RangeError(`Expected value of type ${l} for attribute ${o} on type ${n}, got ${m}`)}):a.validate}get isRequired(){return!this.hasDefault}};let MarkType=class MarkType{constructor(n,o,a,l){this.name=n,this.rank=o,this.schema=a,this.spec=l,this.attrs=initAttrs(n,l.attrs),this.excluded=null;let m=defaultAttrs(this.attrs);this.instance=m?new Mark(this,m):null}create(n=null){return!n&&this.instance?this.instance:new Mark(this,computeAttrs(this.attrs,n))}static compile(n,o){let a=Object.create(null),l=0;return n.forEach((n,m)=>a[n]=new MarkType(n,l++,o,m)),a}removeFromSet(n){for(var o=0;o<n.length;o++)n[o].type==this&&(n=n.slice(0,o).concat(n.slice(o+1)),o--);return n}isInSet(n){for(let o=0;o<n.length;o++)if(n[o].type==this)return n[o]}checkAttrs(n){checkAttrs(this.attrs,n,"mark",this.name)}excludes(n){return this.excluded.indexOf(n)>-1}};let Schema=class Schema{constructor(n){this.linebreakReplacement=null,this.cached=Object.create(null);let o=this.spec={};for(let a in n)o[a]=n[a];o.nodes=OrderedMap.from(n.nodes),o.marks=OrderedMap.from(n.marks||{}),this.nodes=NodeType.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let a=Object.create(null);for(let n in this.nodes){if(n in this.marks)throw RangeError(n+" can not be both a node and a mark");let o=this.nodes[n],l=o.spec.content||"",m=o.spec.marks;if(o.contentMatch=a[l]||(a[l]=ContentMatch.parse(l,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet="_"==m?null:m?gatherMarks(this,m.split(" ")):""!=m&&o.inlineContent?null:[]}for(let n in this.marks){let o=this.marks[n],a=o.spec.excludes;o.excluded=null==a?[o]:""==a?[]:gatherMarks(this,a.split(" "))}this.nodeFromJSON=n=>Node.fromJSON(this,n),this.markFromJSON=n=>Mark.fromJSON(this,n),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(n,o=null,a,l){if("string"==typeof n)n=this.nodeType(n);else if(n instanceof NodeType){if(n.schema!=this)throw RangeError("Node type from different schema used ("+n.name+")")}else throw RangeError("Invalid node type: "+n);return n.createChecked(o,a,l)}text(n,o){let a=this.nodes.text;return new TextNode(a,a.defaultAttrs,n,Mark.setFrom(o))}mark(n,o){return"string"==typeof n&&(n=this.marks[n]),n.create(o)}nodeType(n){let o=this.nodes[n];if(!o)throw RangeError("Unknown node type: "+n);return o}};function gatherMarks(n,o){let a=[];for(let l=0;l<o.length;l++){let m=o[l],S=n.marks[m],M=S;if(S)a.push(S);else for(let o in n.marks){let l=n.marks[o];("_"==m||l.spec.group&&l.spec.group.split(" ").indexOf(m)>-1)&&a.push(M=l)}if(!M)throw SyntaxError("Unknown mark type: '"+o[l]+"'")}return a}let DOMParser=class DOMParser{constructor(n,o){this.schema=n,this.rules=o,this.tags=[],this.styles=[];let a=this.matchedStyles=[];o.forEach(n=>{if(null!=n.tag)this.tags.push(n);else if(null!=n.style){let o=/[^=]*/.exec(n.style)[0];0>a.indexOf(o)&&a.push(o),this.styles.push(n)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let a=n.nodes[o.node];return a.contentMatch.matchType(a)})}parse(n,o={}){let a=new ParseContext(this,o,!1);return a.addAll(n,Mark.none,o.from,o.to),a.finish()}parseSlice(n,o={}){let a=new ParseContext(this,o,!0);return a.addAll(n,Mark.none,o.from,o.to),Slice.maxOpen(a.finish())}matchTag(n,o,a){for(let m=a?this.tags.indexOf(a)+1:0;m<this.tags.length;m++){var l;let a=this.tags[m];if(l=a.tag,(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,l)&&(void 0===a.namespace||n.namespaceURI==a.namespace)&&(!a.context||o.matchesContext(a.context))){if(a.getAttrs){let o=a.getAttrs(n);if(!1===o)continue;a.attrs=o||void 0}return a}}}matchStyle(n,o,a,l){for(let m=l?this.styles.indexOf(l)+1:0;m<this.styles.length;m++){let l=this.styles[m],S=l.style;if(0==S.indexOf(n)&&(!l.context||a.matchesContext(l.context))&&(!(S.length>n.length)||61==S.charCodeAt(n.length)&&S.slice(n.length+1)==o)){if(l.getAttrs){let n=l.getAttrs(o);if(!1===n)continue;l.attrs=n||void 0}return l}}}static schemaRules(n){let o=[];function insert(n){let a=null==n.priority?50:n.priority,l=0;for(;l<o.length;l++){let n=o[l];if((null==n.priority?50:n.priority)<a)break}o.splice(l,0,n)}for(let o in n.marks){let a=n.marks[o].spec.parseDOM;a&&a.forEach(n=>{insert(n=copy(n)),n.mark||n.ignore||n.clearMark||(n.mark=o)})}for(let o in n.nodes){let a=n.nodes[o].spec.parseDOM;a&&a.forEach(n=>{insert(n=copy(n)),n.node||n.ignore||n.mark||(n.node=o)})}return o}static fromSchema(n){return n.cached.domParser||(n.cached.domParser=new DOMParser(n,DOMParser.schemaRules(n)))}};let T={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},A={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},E={ol:!0,ul:!0};function wsOptionsFor(n,o,a){return null!=o?(o?1:0)|("full"===o?2:0):n&&"pre"==n.whitespace?3:-5&a}let NodeContext=class NodeContext{constructor(n,o,a,l,m,S){this.type=n,this.attrs=o,this.marks=a,this.solid=l,this.options=S,this.content=[],this.activeMarks=Mark.none,this.match=m||(4&S?null:n.contentMatch)}findWrapping(n){if(!this.match){if(!this.type)return[];let o=this.type.contentMatch.fillBefore(Fragment.from(n));if(o)this.match=this.type.contentMatch.matchFragment(o);else{let o=this.type.contentMatch,a;return(a=o.findWrapping(n.type))?(this.match=o,a):null}}return this.match.findWrapping(n.type)}finish(n){if(!(1&this.options)){let n=this.content[this.content.length-1],o;n&&n.isText&&(o=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-o[0].length)))}let o=Fragment.from(this.content);return!n&&this.match&&(o=o.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o}inlineContext(n){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:n.parentNode&&!T.hasOwnProperty(n.parentNode.nodeName.toLowerCase())}};let ParseContext=class ParseContext{constructor(n,o,a){this.parser=n,this.options=o,this.isOpen=a,this.open=0,this.localPreserveWS=!1;let l=o.topNode,m,S=wsOptionsFor(null,o.preserveWhitespace,0)|(a?4:0);m=l?new NodeContext(l.type,l.attrs,Mark.none,!0,o.topMatch||l.type.contentMatch,S):a?new NodeContext(null,null,Mark.none,!0,null,S):new NodeContext(n.schema.topNodeType,null,Mark.none,!0,null,S),this.nodes=[m],this.find=o.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(n,o){3==n.nodeType?this.addTextNode(n,o):1==n.nodeType&&this.addElement(n,o)}addTextNode(n,o){let a=n.nodeValue,l=this.top,m=2&l.options?"full":this.localPreserveWS||(1&l.options)>0;if("full"===m||l.inlineContext(n)||/[^ \t\r\n\u000c]/.test(a)){if(m)a="full"!==m?a.replace(/\r?\n|\r/g," "):a.replace(/\r\n?/g,"\n");else if(a=a.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(a)&&this.open==this.nodes.length-1){let o=l.content[l.content.length-1],m=n.previousSibling;(!o||m&&"BR"==m.nodeName||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(a=a.slice(1))}a&&this.insertNode(this.parser.schema.text(a),o,!/\S/.test(a)),this.findInText(n)}else this.findInside(n)}addElement(n,o,a){let l=this.localPreserveWS,m=this.top;("PRE"==n.tagName||/pre/.test(n.style&&n.style.whiteSpace))&&(this.localPreserveWS=!0);let S=n.nodeName.toLowerCase(),M;E.hasOwnProperty(S)&&this.parser.normalizeLists&&function(n){for(let o=n.firstChild,a=null;o;o=o.nextSibling){let n=1==o.nodeType?o.nodeName.toLowerCase():null;n&&E.hasOwnProperty(n)&&a?(a.appendChild(o),o=a):"li"==n?a=o:n&&(a=null)}}(n);let R=this.options.ruleFromNode&&this.options.ruleFromNode(n)||(M=this.parser.matchTag(n,this,a));e:if(R?R.ignore:A.hasOwnProperty(S))this.findInside(n),this.ignoreFallback(n,o);else if(!R||R.skip||R.closeParent){R&&R.closeParent?this.open=Math.max(0,this.open-1):R&&R.skip.nodeType&&(n=R.skip);let a,l=this.needsBlock;if(T.hasOwnProperty(S))m.content.length&&m.content[0].isInline&&this.open&&(this.open--,m=this.top),a=!0,m.type||(this.needsBlock=!0);else if(!n.firstChild){this.leafFallback(n,o);break e}let M=R&&R.skip?o:this.readStyles(n,o);M&&this.addAll(n,M),a&&this.sync(m),this.needsBlock=l}else{let a=this.readStyles(n,o);a&&this.addElementByRule(n,R,a,!1===R.consuming?M:void 0)}this.localPreserveWS=l}leafFallback(n,o){"BR"==n.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(n.ownerDocument.createTextNode("\n"),o)}ignoreFallback(n,o){"BR"!=n.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),o,!0)}readStyles(n,o){let a=n.style;if(a&&a.length)for(let n=0;n<this.parser.matchedStyles.length;n++){let l=this.parser.matchedStyles[n],m=a.getPropertyValue(l);if(m)for(let n;;){let a=this.parser.matchStyle(l,m,this,n);if(!a)break;if(a.ignore)return null;if(o=a.clearMark?o.filter(n=>!a.clearMark(n)):o.concat(this.parser.schema.marks[a.mark].create(a.attrs)),!1===a.consuming)n=a;else break}}return o}addElementByRule(n,o,a,l){let m,S;if(o.node){if((S=this.parser.schema.nodes[o.node]).isLeaf)this.insertNode(S.create(o.attrs),a,"BR"==n.nodeName)||this.leafFallback(n,a);else{let n=this.enter(S,o.attrs||null,a,o.preserveWhitespace);n&&(m=!0,a=n)}}else{let n=this.parser.schema.marks[o.mark];a=a.concat(n.create(o.attrs))}let M=this.top;if(S&&S.isLeaf)this.findInside(n);else if(l)this.addElement(n,a,l);else if(o.getContent)this.findInside(n),o.getContent(n,this.parser.schema).forEach(n=>this.insertNode(n,a,!1));else{let l=n;"string"==typeof o.contentElement?l=n.querySelector(o.contentElement):"function"==typeof o.contentElement?l=o.contentElement(n):o.contentElement&&(l=o.contentElement),this.findAround(n,l,!0),this.addAll(l,a),this.findAround(n,l,!1)}m&&this.sync(M)&&this.open--}addAll(n,o,a,l){let m=a||0;for(let S=a?n.childNodes[a]:n.firstChild,M=null==l?null:n.childNodes[l];S!=M;S=S.nextSibling,++m)this.findAtPoint(n,m),this.addDOM(S,o);this.findAtPoint(n,m)}findPlace(n,o,a){let l,m;for(let o=this.open,S=0;o>=0;o--){let M=this.nodes[o],T=M.findWrapping(n);if(T&&(!l||l.length>T.length+S)&&(l=T,m=M,!T.length))break;if(M.solid){if(a)break;S+=2}}if(!l)return null;this.sync(m);for(let n=0;n<l.length;n++)o=this.enterInner(l[n],null,o,!1);return o}insertNode(n,o,a){if(n.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&(o=this.enterInner(n,null,o))}let l=this.findPlace(n,o,a);if(l){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(n.type));let a=Mark.none;for(let m of l.concat(n.marks))(o.type?o.type.allowsMarkType(m.type):markMayApply(m.type,n.type))&&(a=m.addToSet(a));return o.content.push(n.mark(a)),!0}return!1}enter(n,o,a,l){let m=this.findPlace(n.create(o),a,!1);return m&&(m=this.enterInner(n,o,a,!0,l)),m}enterInner(n,o,a,l=!1,m){this.closeExtra();let S=this.top;S.match=S.match&&S.match.matchType(n);let M=wsOptionsFor(n,m,S.options);4&S.options&&0==S.content.length&&(M|=4);let T=Mark.none;return a=a.filter(o=>(S.type?!S.type.allowsMarkType(o.type):!markMayApply(o.type,n))||(T=o.addToSet(T),!1)),this.nodes.push(new NodeContext(n,o,T,l,null,M)),this.open++,a}closeExtra(n=!1){let o=this.nodes.length-1;if(o>this.open){for(;o>this.open;o--)this.nodes[o-1].content.push(this.nodes[o].finish(n));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(n){for(let o=this.open;o>=0;o--){if(this.nodes[o]==n)return this.open=o,!0;this.localPreserveWS&&(this.nodes[o].options|=1)}return!1}get currentPos(){this.closeExtra();let n=0;for(let o=this.open;o>=0;o--){let a=this.nodes[o].content;for(let o=a.length-1;o>=0;o--)n+=a[o].nodeSize;o&&n++}return n}findAtPoint(n,o){if(this.find)for(let a=0;a<this.find.length;a++)this.find[a].node==n&&this.find[a].offset==o&&(this.find[a].pos=this.currentPos)}findInside(n){if(this.find)for(let o=0;o<this.find.length;o++)null==this.find[o].pos&&1==n.nodeType&&n.contains(this.find[o].node)&&(this.find[o].pos=this.currentPos)}findAround(n,o,a){if(n!=o&&this.find)for(let l=0;l<this.find.length;l++)null==this.find[l].pos&&1==n.nodeType&&n.contains(this.find[l].node)&&o.compareDocumentPosition(this.find[l].node)&(a?2:4)&&(this.find[l].pos=this.currentPos)}findInText(n){if(this.find)for(let o=0;o<this.find.length;o++)this.find[o].node==n&&(this.find[o].pos=this.currentPos-(n.nodeValue.length-this.find[o].offset))}matchesContext(n){if(n.indexOf("|")>-1)return n.split(/\s*\|\s*/).some(this.matchesContext,this);let o=n.split("/"),a=this.options.context,l=!this.isOpen&&(!a||a.parent.type==this.nodes[0].type),m=-(a?a.depth+1:0)+(l?0:1),match=(n,S)=>{for(;n>=0;n--){let M=o[n];if(""==M){if(n==o.length-1||0==n)continue;for(;S>=m;S--)if(match(n-1,S))return!0;return!1}{let n=S>0||0==S&&l?this.nodes[S].type:a&&S>=m?a.node(S-m).type:null;if(!n||n.name!=M&&!n.isInGroup(M))return!1;S--}}return!0};return match(o.length-1,this.open)}textblockFromContext(){let n=this.options.context;if(n)for(let o=n.depth;o>=0;o--){let a=n.node(o).contentMatchAt(n.indexAfter(o)).defaultType;if(a&&a.isTextblock&&a.defaultAttrs)return a}for(let n in this.parser.schema.nodes){let o=this.parser.schema.nodes[n];if(o.isTextblock&&o.defaultAttrs)return o}}};function copy(n){let o={};for(let a in n)o[a]=n[a];return o}function markMayApply(n,o){let a=o.schema.nodes;for(let l in a){let m=a[l];if(!m.allowsMarkType(n))continue;let S=[],scan=n=>{S.push(n);for(let a=0;a<n.edgeCount;a++){let{type:l,next:m}=n.edge(a);if(l==o||0>S.indexOf(m)&&scan(m))return!0}};if(scan(m.contentMatch))return!0}}let DOMSerializer=class DOMSerializer{constructor(n,o){this.nodes=n,this.marks=o}serializeFragment(n,o={},a){a||(a=doc(o).createDocumentFragment());let l=a,m=[];return n.forEach(n=>{if(m.length||n.marks.length){let a=0,S=0;for(;a<m.length&&S<n.marks.length;){let o=n.marks[S];if(!this.marks[o.type.name]){S++;continue}if(!o.eq(m[a][0])||!1===o.type.spec.spanning)break;a++,S++}for(;a<m.length;)l=m.pop()[1];for(;S<n.marks.length;){let a=n.marks[S++],M=this.serializeMark(a,n.isInline,o);M&&(m.push([a,l]),l.appendChild(M.dom),l=M.contentDOM||M.dom)}}l.appendChild(this.serializeNodeInner(n,o))}),a}serializeNodeInner(n,o){let{dom:a,contentDOM:l}=renderSpec(doc(o),this.nodes[n.type.name](n),null,n.attrs);if(l){if(n.isLeaf)throw RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(n.content,o,l)}return a}serializeNode(n,o={}){let a=this.serializeNodeInner(n,o);for(let l=n.marks.length-1;l>=0;l--){let m=this.serializeMark(n.marks[l],n.isInline,o);m&&((m.contentDOM||m.dom).appendChild(a),a=m.dom)}return a}serializeMark(n,o,a={}){let l=this.marks[n.type.name];return l&&renderSpec(doc(a),l(n,o),null,n.attrs)}static renderSpec(n,o,a=null,l){return renderSpec(n,o,a,l)}static fromSchema(n){return n.cached.domSerializer||(n.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(n),this.marksFromSchema(n)))}static nodesFromSchema(n){let o=gatherToDOM(n.nodes);return o.text||(o.text=n=>n.text),o}static marksFromSchema(n){return gatherToDOM(n.marks)}};function gatherToDOM(n){let o={};for(let a in n){let l=n[a].spec.toDOM;l&&(o[a]=l)}return o}function doc(n){return n.document||window.document}let R=new WeakMap;function renderSpec(n,o,a,l){let m,S,M;if("string"==typeof o)return{dom:n.createTextNode(o)};if(null!=o.nodeType)return{dom:o};if(o.dom&&null!=o.dom.nodeType)return o;let T=o[0],A;if("string"!=typeof T)throw RangeError("Invalid array passed to renderSpec");if(l&&(void 0===(S=R.get(l))&&R.set(l,(M=null,function scan(n){if(n&&"object"==typeof n){if(Array.isArray(n)){if("string"==typeof n[0])M||(M=[]),M.push(n);else for(let o=0;o<n.length;o++)scan(n[o])}else for(let o in n)scan(n[o])}}(l),S=M)),A=S)&&A.indexOf(o)>-1)throw RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let E=T.indexOf(" ");E>0&&(a=T.slice(0,E),T=T.slice(E+1));let O=a?n.createElementNS(a,T):n.createElement(T),N=o[1],j=1;if(N&&"object"==typeof N&&null==N.nodeType&&!Array.isArray(N)){for(let n in j=2,N)if(null!=N[n]){let o=n.indexOf(" ");o>0?O.setAttributeNS(n.slice(0,o),n.slice(o+1),N[n]):"style"==n&&O.style?O.style.cssText=N[n]:O.setAttribute(n,N[n])}}for(let S=j;S<o.length;S++){let M=o[S];if(0===M){if(S<o.length-1||S>j)throw RangeError("Content hole must be the only child of its parent node");return{dom:O,contentDOM:O}}{let{dom:o,contentDOM:S}=renderSpec(n,M,a,l);if(O.appendChild(o),S){if(m)throw RangeError("Multiple content holes");m=S}}}return{dom:O,contentDOM:m}}},3833:function(n,o,a){"use strict";a.d(o,{IB:function(){return liftListItem},KI:function(){return wrapInList},bw:function(){return sinkListItem}});var l=a(6560),m=a(2806);function wrapInList(n,o=null){return function(a,S){let{$from:M,$to:T}=a.selection,A=M.blockRange(T);if(!A)return!1;let E=S?a.tr:null;return!!function(n,o,a,S=null){let M=!1,T=o,A=o.$from.doc;if(o.depth>=2&&o.$from.node(o.depth-1).type.compatibleContent(a)&&0==o.startIndex){if(0==o.$from.index(o.depth-1))return!1;let n=A.resolve(o.start-2);T=new m.Ts(n,n,o.depth),o.endIndex<o.parent.childCount&&(o=new m.Ts(o.$from,A.resolve(o.$to.end(o.depth)),o.depth)),M=!0}let E=(0,l.nd)(T,a,S,o);return!!E&&(n&&function(n,o,a,S,M){let T=m.HY.empty;for(let n=a.length-1;n>=0;n--)T=m.HY.from(a[n].type.create(a[n].attrs,T));n.step(new l.FC(o.start-(S?2:0),o.end,o.start,o.end,new m.p2(T,0,0),a.length,!0));let A=0;for(let n=0;n<a.length;n++)a[n].type==M&&(A=n+1);let E=a.length-A,R=o.start+a.length-(S?2:0),O=o.parent;for(let a=o.startIndex,m=o.endIndex,S=!0;a<m;a++,S=!1)!S&&(0,l.Ax)(n.doc,R,E)&&(n.split(R,E),R+=2*E),R+=O.child(a).nodeSize}(n,o,E,M,a),!0)}(E,A,n,o)&&(S&&S(E.scrollIntoView()),!0)}}function liftListItem(n){return function(o,a){let{$from:S,$to:M}=o.selection,T=S.blockRange(M,o=>o.childCount>0&&o.firstChild.type==n);return!!T&&(!a||(S.node(T.depth-1).type==n?function(n,o,a,S){let M=n.tr,T=S.end,A=S.$to.end(S.depth);T<A&&(M.step(new l.FC(T-1,A,T,A,new m.p2(m.HY.from(a.create(null,S.parent.copy())),1,0),1,!0)),S=new m.Ts(M.doc.resolve(S.$from.pos),M.doc.resolve(A),S.depth));let E=(0,l.k9)(S);if(null==E)return!1;M.lift(S,E);let R=M.doc.resolve(M.mapping.map(T,-1)-1);return(0,l.Mn)(M.doc,R.pos)&&R.nodeBefore.type==R.nodeAfter.type&&M.join(R.pos),o(M.scrollIntoView()),!0}(o,a,n,T):function(n,o,a){let S=n.tr,M=a.parent;for(let n=a.end,o=a.endIndex-1,l=a.startIndex;o>l;o--)n-=M.child(o).nodeSize,S.delete(n-1,n+1);let T=S.doc.resolve(a.start),A=T.nodeAfter;if(S.mapping.map(a.end)!=a.start+T.nodeAfter.nodeSize)return!1;let E=0==a.startIndex,R=a.endIndex==M.childCount,O=T.node(-1),N=T.index(-1);if(!O.canReplace(N+(E?0:1),N+1,A.content.append(R?m.HY.empty:m.HY.from(M))))return!1;let j=T.pos,B=j+A.nodeSize;return S.step(new l.FC(j-(E?1:0),B+(R?1:0),j+1,B-1,new m.p2((E?m.HY.empty:m.HY.from(M.copy(m.HY.empty))).append(R?m.HY.empty:m.HY.from(M.copy(m.HY.empty))),E?0:1,R?0:1),E?0:1)),o(S.scrollIntoView()),!0}(o,a,T)))}}function sinkListItem(n){return function(o,a){let{$from:S,$to:M}=o.selection,T=S.blockRange(M,o=>o.childCount>0&&o.firstChild.type==n);if(!T)return!1;let A=T.startIndex;if(0==A)return!1;let E=T.parent,R=E.child(A-1);if(R.type!=n)return!1;if(a){let S=R.lastChild&&R.lastChild.type==E.type,M=m.HY.from(S?n.create():null),A=new m.p2(m.HY.from(n.create(null,m.HY.from(E.type.create(null,M)))),S?3:1,0),O=T.start,N=T.end;a(o.tr.step(new l.FC(O-(S?3:1),N,O,N,A,1,!0)).scrollIntoView())}return!0}}},2376:function(n,o,a){"use strict";a.d(o,{Bs:function(){return TextSelection},C1:function(){return AllSelection},H$:function(){return PluginKey},Sy:function(){return Plugin},Y1:function(){return Selection},qv:function(){return NodeSelection},yy:function(){return EditorState}});var l=a(2806),m=a(6560);let S=Object.create(null);let Selection=class Selection{constructor(n,o,a){this.$anchor=n,this.$head=o,this.ranges=a||[new SelectionRange(n.min(o),n.max(o))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let n=this.ranges;for(let o=0;o<n.length;o++)if(n[o].$from.pos!=n[o].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(n,o=l.p2.empty){let a=o.content.lastChild,m=null;for(let n=0;n<o.openEnd;n++)m=a,a=a.lastChild;let S=n.steps.length,M=this.ranges;for(let T=0;T<M.length;T++){let{$from:A,$to:E}=M[T],R=n.mapping.slice(S);n.replaceRange(R.map(A.pos),R.map(E.pos),T?l.p2.empty:o),0==T&&selectionToInsertionEnd(n,S,(a?a.isInline:m&&m.isTextblock)?-1:1)}}replaceWith(n,o){let a=n.steps.length,l=this.ranges;for(let m=0;m<l.length;m++){let{$from:S,$to:M}=l[m],T=n.mapping.slice(a),A=T.map(S.pos),E=T.map(M.pos);m?n.deleteRange(A,E):(n.replaceRangeWith(A,E,o),selectionToInsertionEnd(n,a,o.isInline?-1:1))}}static findFrom(n,o,a=!1){let l=n.parent.inlineContent?new TextSelection(n):findSelectionIn(n.node(0),n.parent,n.pos,n.index(),o,a);if(l)return l;for(let l=n.depth-1;l>=0;l--){let m=o<0?findSelectionIn(n.node(0),n.node(l),n.before(l+1),n.index(l),o,a):findSelectionIn(n.node(0),n.node(l),n.after(l+1),n.index(l)+1,o,a);if(m)return m}return null}static near(n,o=1){return this.findFrom(n,o)||this.findFrom(n,-o)||new AllSelection(n.node(0))}static atStart(n){return findSelectionIn(n,n,0,0,1)||new AllSelection(n)}static atEnd(n){return findSelectionIn(n,n,n.content.size,n.childCount,-1)||new AllSelection(n)}static fromJSON(n,o){if(!o||!o.type)throw RangeError("Invalid input for Selection.fromJSON");let a=S[o.type];if(!a)throw RangeError(`No selection type ${o.type} defined`);return a.fromJSON(n,o)}static jsonID(n,o){if(n in S)throw RangeError("Duplicate use of selection JSON ID "+n);return S[n]=o,o.prototype.jsonID=n,o}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}};Selection.prototype.visible=!0;let SelectionRange=class SelectionRange{constructor(n,o){this.$from=n,this.$to=o}};let M=!1;function checkTextSelection(n){M||n.parent.inlineContent||(M=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}let TextSelection=class TextSelection extends Selection{constructor(n,o=n){checkTextSelection(n),checkTextSelection(o),super(n,o)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(n,o){let a=n.resolve(o.map(this.head));if(!a.parent.inlineContent)return Selection.near(a);let l=n.resolve(o.map(this.anchor));return new TextSelection(l.parent.inlineContent?l:a,a)}replace(n,o=l.p2.empty){if(super.replace(n,o),o==l.p2.empty){let o=this.$from.marksAcross(this.$to);o&&n.ensureMarks(o)}}eq(n){return n instanceof TextSelection&&n.anchor==this.anchor&&n.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(n,o){if("number"!=typeof o.anchor||"number"!=typeof o.head)throw RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(n.resolve(o.anchor),n.resolve(o.head))}static create(n,o,a=o){let l=n.resolve(o);return new this(l,a==o?l:n.resolve(a))}static between(n,o,a){let l=n.pos-o.pos;if((!a||l)&&(a=l>=0?1:-1),!o.parent.inlineContent){let n=Selection.findFrom(o,a,!0)||Selection.findFrom(o,-a,!0);if(!n)return Selection.near(o,a);o=n.$head}return n.parent.inlineContent||(0==l?n=o:(n=(Selection.findFrom(n,-a,!0)||Selection.findFrom(n,a,!0)).$anchor).pos<o.pos==l<0||(n=o)),new TextSelection(n,o)}};Selection.jsonID("text",TextSelection);let TextBookmark=class TextBookmark{constructor(n,o){this.anchor=n,this.head=o}map(n){return new TextBookmark(n.map(this.anchor),n.map(this.head))}resolve(n){return TextSelection.between(n.resolve(this.anchor),n.resolve(this.head))}};let NodeSelection=class NodeSelection extends Selection{constructor(n){let o=n.nodeAfter;super(n,n.node(0).resolve(n.pos+o.nodeSize)),this.node=o}map(n,o){let{deleted:a,pos:l}=o.mapResult(this.anchor),m=n.resolve(l);return a?Selection.near(m):new NodeSelection(m)}content(){return new l.p2(l.HY.from(this.node),0,0)}eq(n){return n instanceof NodeSelection&&n.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(n,o){if("number"!=typeof o.anchor)throw RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(n.resolve(o.anchor))}static create(n,o){return new NodeSelection(n.resolve(o))}static isSelectable(n){return!n.isText&&!1!==n.type.spec.selectable}};NodeSelection.prototype.visible=!1,Selection.jsonID("node",NodeSelection);let NodeBookmark=class NodeBookmark{constructor(n){this.anchor=n}map(n){let{deleted:o,pos:a}=n.mapResult(this.anchor);return o?new TextBookmark(a,a):new NodeBookmark(a)}resolve(n){let o=n.resolve(this.anchor),a=o.nodeAfter;return a&&NodeSelection.isSelectable(a)?new NodeSelection(o):Selection.near(o)}};let AllSelection=class AllSelection extends Selection{constructor(n){super(n.resolve(0),n.resolve(n.content.size))}replace(n,o=l.p2.empty){if(o==l.p2.empty){n.delete(0,n.doc.content.size);let o=Selection.atStart(n.doc);o.eq(n.selection)||n.setSelection(o)}else super.replace(n,o)}toJSON(){return{type:"all"}}static fromJSON(n){return new AllSelection(n)}map(n){return new AllSelection(n)}eq(n){return n instanceof AllSelection}getBookmark(){return T}};Selection.jsonID("all",AllSelection);let T={map(){return this},resolve:n=>new AllSelection(n)};function findSelectionIn(n,o,a,l,m,S=!1){if(o.inlineContent)return TextSelection.create(n,a);for(let M=l-(m>0?0:1);m>0?M<o.childCount:M>=0;M+=m){let l=o.child(M);if(l.isAtom){if(!S&&NodeSelection.isSelectable(l))return NodeSelection.create(n,a-(m<0?l.nodeSize:0))}else{let o=findSelectionIn(n,l,a+m,m<0?l.childCount:0,m,S);if(o)return o}a+=l.nodeSize*m}return null}function selectionToInsertionEnd(n,o,a){let l,S=n.steps.length-1;if(S<o)return;let M=n.steps[S];(M instanceof m.Pu||M instanceof m.FC)&&(n.mapping.maps[S].forEach((n,o,a,m)=>{null==l&&(l=m)}),n.setSelection(Selection.near(n.doc.resolve(l),a)))}let Transaction=class Transaction extends m.wx{constructor(n){super(n.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=n.selection,this.storedMarks=n.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(n){if(n.$from.doc!=this.doc)throw RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=n,this.curSelectionFor=this.steps.length,this.updated=(1|this.updated)&-3,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(n){return this.storedMarks=n,this.updated|=2,this}ensureMarks(n){return l.vc.sameSet(this.storedMarks||this.selection.$from.marks(),n)||this.setStoredMarks(n),this}addStoredMark(n){return this.ensureMarks(n.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(n){return this.ensureMarks(n.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(n,o){super.addStep(n,o),this.updated=-3&this.updated,this.storedMarks=null}setTime(n){return this.time=n,this}replaceSelection(n){return this.selection.replace(this,n),this}replaceSelectionWith(n,o=!0){let a=this.selection;return o&&(n=n.mark(this.storedMarks||(a.empty?a.$from.marks():a.$from.marksAcross(a.$to)||l.vc.none))),a.replaceWith(this,n),this}deleteSelection(){return this.selection.replace(this),this}insertText(n,o,a){let l=this.doc.type.schema;if(null==o)return n?this.replaceSelectionWith(l.text(n),!0):this.deleteSelection();{if(null==a&&(a=o),a=null==a?o:a,!n)return this.deleteRange(o,a);let m=this.storedMarks;if(!m){let n=this.doc.resolve(o);m=a==o?n.marks():n.marksAcross(this.doc.resolve(a))}return this.replaceRangeWith(o,a,l.text(n,m)),this.selection.empty||this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(n,o){return this.meta["string"==typeof n?n:n.key]=o,this}getMeta(n){return this.meta["string"==typeof n?n:n.key]}get isGeneric(){for(let n in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}};function bind(n,o){return o&&n?n.bind(o):n}let FieldDesc=class FieldDesc{constructor(n,o,a){this.name=n,this.init=bind(o.init,a),this.apply=bind(o.apply,a)}};let A=[new FieldDesc("doc",{init:n=>n.doc||n.schema.topNodeType.createAndFill(),apply:n=>n.doc}),new FieldDesc("selection",{init:(n,o)=>n.selection||Selection.atStart(o.doc),apply:n=>n.selection}),new FieldDesc("storedMarks",{init:n=>n.storedMarks||null,apply:(n,o,a,l)=>l.selection.$cursor?n.storedMarks:null}),new FieldDesc("scrollToSelection",{init:()=>0,apply:(n,o)=>n.scrolledIntoView?o+1:o})];let Configuration=class Configuration{constructor(n,o){this.schema=n,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=A.slice(),o&&o.forEach(n=>{if(this.pluginsByKey[n.key])throw RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new FieldDesc(n.key,n.spec.state,n))})}};let EditorState=class EditorState{constructor(n){this.config=n}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(n){return this.applyTransaction(n).state}filterTransaction(n,o=-1){for(let a=0;a<this.config.plugins.length;a++)if(a!=o){let o=this.config.plugins[a];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,n,this))return!1}return!0}applyTransaction(n){if(!this.filterTransaction(n))return{state:this,transactions:[]};let o=[n],a=this.applyInner(n),l=null;for(;;){let m=!1;for(let S=0;S<this.config.plugins.length;S++){let M=this.config.plugins[S];if(M.spec.appendTransaction){let T=l?l[S].n:0,A=l?l[S].state:this,E=T<o.length&&M.spec.appendTransaction.call(M,T?o.slice(T):o,A,a);if(E&&a.filterTransaction(E,S)){if(E.setMeta("appendedTransaction",n),!l){l=[];for(let n=0;n<this.config.plugins.length;n++)l.push(n<S?{state:a,n:o.length}:{state:this,n:0})}o.push(E),a=a.applyInner(E),m=!0}l&&(l[S]={state:a,n:o.length})}}if(!m)return{state:a,transactions:o}}}applyInner(n){if(!n.before.eq(this.doc))throw RangeError("Applying a mismatched transaction");let o=new EditorState(this.config),a=this.config.fields;for(let l=0;l<a.length;l++){let m=a[l];o[m.name]=m.apply(n,this[m.name],this,o)}return o}get tr(){return new Transaction(this)}static create(n){let o=new Configuration(n.doc?n.doc.type.schema:n.schema,n.plugins),a=new EditorState(o);for(let l=0;l<o.fields.length;l++)a[o.fields[l].name]=o.fields[l].init(n,a);return a}reconfigure(n){let o=new Configuration(this.schema,n.plugins),a=o.fields,l=new EditorState(o);for(let o=0;o<a.length;o++){let m=a[o].name;l[m]=this.hasOwnProperty(m)?this[m]:a[o].init(n,l)}return l}toJSON(n){let o={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(o.storedMarks=this.storedMarks.map(n=>n.toJSON())),n&&"object"==typeof n)for(let a in n){if("doc"==a||"selection"==a)throw RangeError("The JSON fields `doc` and `selection` are reserved");let l=n[a],m=l.spec.state;m&&m.toJSON&&(o[a]=m.toJSON.call(l,this[l.key]))}return o}static fromJSON(n,o,a){if(!o)throw RangeError("Invalid input for EditorState.fromJSON");if(!n.schema)throw RangeError("Required config field 'schema' missing");let m=new Configuration(n.schema,n.plugins),S=new EditorState(m);return m.fields.forEach(m=>{if("doc"==m.name)S.doc=l.NB.fromJSON(n.schema,o.doc);else if("selection"==m.name)S.selection=Selection.fromJSON(S.doc,o.selection);else if("storedMarks"==m.name)o.storedMarks&&(S.storedMarks=o.storedMarks.map(n.schema.markFromJSON));else{if(a)for(let l in a){let M=a[l],T=M.spec.state;if(M.key==m.name&&T&&T.fromJSON&&Object.prototype.hasOwnProperty.call(o,l)){S[m.name]=T.fromJSON.call(M,n,o[l],S);return}}S[m.name]=m.init(n,S)}}),S}};let Plugin=class Plugin{constructor(n){this.spec=n,this.props={},n.props&&function bindProps(n,o,a){for(let l in n){let m=n[l];m instanceof Function?m=m.bind(o):"handleDOMEvents"==l&&(m=bindProps(m,o,{})),a[l]=m}return a}(n.props,this,this.props),this.key=n.key?n.key.key:createKey("plugin")}getState(n){return n[this.key]}};let E=Object.create(null);function createKey(n){return n in E?n+"$"+ ++E[n]:(E[n]=0,n+"$")}let PluginKey=class PluginKey{constructor(n="key"){this.key=createKey(n)}get(n){return n.config.pluginsByKey[this.key]}getState(n){return n[this.key]}}},6560:function(n,o,a){"use strict";a.d(o,{Ax:function(){return canSplit},FC:function(){return ReplaceAroundStep},GJ:function(){return joinPoint},Mn:function(){return canJoin},Pu:function(){return ReplaceStep},dR:function(){return replaceStep},k9:function(){return liftTarget},nd:function(){return findWrapping},nj:function(){return dropPoint},vs:function(){return Mapping},wx:function(){return Transform},xu:function(){return RemoveMarkStep}});var l=a(2806);let MapResult=class MapResult{constructor(n,o,a){this.pos=n,this.delInfo=o,this.recover=a}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}};let StepMap=class StepMap{constructor(n,o=!1){if(this.ranges=n,this.inverted=o,!n.length&&StepMap.empty)return StepMap.empty}recover(n){let o=0,a=65535&n;if(!this.inverted)for(let n=0;n<a;n++)o+=this.ranges[3*n+2]-this.ranges[3*n+1];return this.ranges[3*a]+o+(n-(65535&n))/65536}mapResult(n,o=1){return this._map(n,o,!1)}map(n,o=1){return this._map(n,o,!0)}_map(n,o,a){let l=0,m=this.inverted?2:1,S=this.inverted?1:2;for(let M=0;M<this.ranges.length;M+=3){let T=this.ranges[M]-(this.inverted?l:0);if(T>n)break;let A=this.ranges[M+m],E=this.ranges[M+S],R=T+A;if(n<=R){let m=A?n==T?-1:n==R?1:o:o,S=T+l+(m<0?0:E);if(a)return S;let O=n==(o<0?T:R)?null:M/3+(n-T)*65536,N=n==T?2:n==R?1:4;return(o<0?n!=T:n!=R)&&(N|=8),new MapResult(S,N,O)}l+=E-A}return a?n+l:new MapResult(n+l,0,null)}touches(n,o){let a=0,l=65535&o,m=this.inverted?2:1,S=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let M=this.ranges[o]-(this.inverted?a:0);if(M>n)break;let T=this.ranges[o+m];if(n<=M+T&&o==3*l)return!0;a+=this.ranges[o+S]-T}return!1}forEach(n){let o=this.inverted?2:1,a=this.inverted?1:2;for(let l=0,m=0;l<this.ranges.length;l+=3){let S=this.ranges[l],M=S-(this.inverted?m:0),T=S+(this.inverted?0:m),A=this.ranges[l+o],E=this.ranges[l+a];n(M,M+A,T,T+E),m+=E-A}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(n){return 0==n?StepMap.empty:new StepMap(n<0?[0,-n,0]:[0,0,n])}};StepMap.empty=new StepMap([]);let Mapping=class Mapping{constructor(n,o,a=0,l=n?n.length:0){this.mirror=o,this.from=a,this.to=l,this._maps=n||[],this.ownData=!(n||o)}get maps(){return this._maps}slice(n=0,o=this.maps.length){return new Mapping(this._maps,this.mirror,n,o)}appendMap(n,o){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(n),null!=o&&this.setMirror(this._maps.length-1,o)}appendMapping(n){for(let o=0,a=this._maps.length;o<n._maps.length;o++){let l=n.getMirror(o);this.appendMap(n._maps[o],null!=l&&l<o?a+l:void 0)}}getMirror(n){if(this.mirror){for(let o=0;o<this.mirror.length;o++)if(this.mirror[o]==n)return this.mirror[o+(o%2?-1:1)]}}setMirror(n,o){this.mirror||(this.mirror=[]),this.mirror.push(n,o)}appendMappingInverted(n){for(let o=n.maps.length-1,a=this._maps.length+n._maps.length;o>=0;o--){let l=n.getMirror(o);this.appendMap(n._maps[o].invert(),null!=l&&l>o?a-l-1:void 0)}}invert(){let n=new Mapping;return n.appendMappingInverted(this),n}map(n,o=1){if(this.mirror)return this._map(n,o,!0);for(let a=this.from;a<this.to;a++)n=this._maps[a].map(n,o);return n}mapResult(n,o=1){return this._map(n,o,!1)}_map(n,o,a){let l=0;for(let a=this.from;a<this.to;a++){let m=this._maps[a].mapResult(n,o);if(null!=m.recover){let o=this.getMirror(a);if(null!=o&&o>a&&o<this.to){a=o,n=this._maps[o].recover(m.recover);continue}}l|=m.delInfo,n=m.pos}return a?n:new MapResult(n,l,null)}};let m=Object.create(null);let Step=class Step{getMap(){return StepMap.empty}merge(n){return null}static fromJSON(n,o){if(!o||!o.stepType)throw RangeError("Invalid input for Step.fromJSON");let a=m[o.stepType];if(!a)throw RangeError(`No step type ${o.stepType} defined`);return a.fromJSON(n,o)}static jsonID(n,o){if(n in m)throw RangeError("Duplicate use of step JSON ID "+n);return m[n]=o,o.prototype.jsonID=n,o}};let StepResult=class StepResult{constructor(n,o){this.doc=n,this.failed=o}static ok(n){return new StepResult(n,null)}static fail(n){return new StepResult(null,n)}static fromReplace(n,o,a,m){try{return StepResult.ok(n.replace(o,a,m))}catch(n){if(n instanceof l.e4)return StepResult.fail(n.message);throw n}}};function mapFragment(n,o,a){let m=[];for(let l=0;l<n.childCount;l++){let S=n.child(l);S.content.size&&(S=S.copy(mapFragment(S.content,o,S))),S.isInline&&(S=o(S,a,l)),m.push(S)}return l.HY.fromArray(m)}let AddMarkStep=class AddMarkStep extends Step{constructor(n,o,a){super(),this.from=n,this.to=o,this.mark=a}apply(n){let o=n.slice(this.from,this.to),a=n.resolve(this.from),m=a.node(a.sharedDepth(this.to)),S=new l.p2(mapFragment(o.content,(n,o)=>n.isAtom&&o.type.allowsMarkType(this.mark.type)?n.mark(this.mark.addToSet(n.marks)):n,m),o.openStart,o.openEnd);return StepResult.fromReplace(n,this.from,this.to,S)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(n){let o=n.mapResult(this.from,1),a=n.mapResult(this.to,-1);return o.deleted&&a.deleted||o.pos>=a.pos?null:new AddMarkStep(o.pos,a.pos,this.mark)}merge(n){return n instanceof AddMarkStep&&n.mark.eq(this.mark)&&this.from<=n.to&&this.to>=n.from?new AddMarkStep(Math.min(this.from,n.from),Math.max(this.to,n.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(n,o){if("number"!=typeof o.from||"number"!=typeof o.to)throw RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(o.from,o.to,n.markFromJSON(o.mark))}};Step.jsonID("addMark",AddMarkStep);let RemoveMarkStep=class RemoveMarkStep extends Step{constructor(n,o,a){super(),this.from=n,this.to=o,this.mark=a}apply(n){let o=n.slice(this.from,this.to),a=new l.p2(mapFragment(o.content,n=>n.mark(this.mark.removeFromSet(n.marks)),n),o.openStart,o.openEnd);return StepResult.fromReplace(n,this.from,this.to,a)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(n){let o=n.mapResult(this.from,1),a=n.mapResult(this.to,-1);return o.deleted&&a.deleted||o.pos>=a.pos?null:new RemoveMarkStep(o.pos,a.pos,this.mark)}merge(n){return n instanceof RemoveMarkStep&&n.mark.eq(this.mark)&&this.from<=n.to&&this.to>=n.from?new RemoveMarkStep(Math.min(this.from,n.from),Math.max(this.to,n.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(n,o){if("number"!=typeof o.from||"number"!=typeof o.to)throw RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(o.from,o.to,n.markFromJSON(o.mark))}};Step.jsonID("removeMark",RemoveMarkStep);let AddNodeMarkStep=class AddNodeMarkStep extends Step{constructor(n,o){super(),this.pos=n,this.mark=o}apply(n){let o=n.nodeAt(this.pos);if(!o)return StepResult.fail("No node at mark step's position");let a=o.type.create(o.attrs,null,this.mark.addToSet(o.marks));return StepResult.fromReplace(n,this.pos,this.pos+1,new l.p2(l.HY.from(a),0,o.isLeaf?0:1))}invert(n){let o=n.nodeAt(this.pos);if(o){let n=this.mark.addToSet(o.marks);if(n.length==o.marks.length){for(let a=0;a<o.marks.length;a++)if(!o.marks[a].isInSet(n))return new AddNodeMarkStep(this.pos,o.marks[a]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(n){let o=n.mapResult(this.pos,1);return o.deletedAfter?null:new AddNodeMarkStep(o.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(n,o){if("number"!=typeof o.pos)throw RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(o.pos,n.markFromJSON(o.mark))}};Step.jsonID("addNodeMark",AddNodeMarkStep);let RemoveNodeMarkStep=class RemoveNodeMarkStep extends Step{constructor(n,o){super(),this.pos=n,this.mark=o}apply(n){let o=n.nodeAt(this.pos);if(!o)return StepResult.fail("No node at mark step's position");let a=o.type.create(o.attrs,null,this.mark.removeFromSet(o.marks));return StepResult.fromReplace(n,this.pos,this.pos+1,new l.p2(l.HY.from(a),0,o.isLeaf?0:1))}invert(n){let o=n.nodeAt(this.pos);return o&&this.mark.isInSet(o.marks)?new AddNodeMarkStep(this.pos,this.mark):this}map(n){let o=n.mapResult(this.pos,1);return o.deletedAfter?null:new RemoveNodeMarkStep(o.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(n,o){if("number"!=typeof o.pos)throw RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(o.pos,n.markFromJSON(o.mark))}};Step.jsonID("removeNodeMark",RemoveNodeMarkStep);let ReplaceStep=class ReplaceStep extends Step{constructor(n,o,a,l=!1){super(),this.from=n,this.to=o,this.slice=a,this.structure=l}apply(n){return this.structure&&contentBetween(n,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(n,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(n){return new ReplaceStep(this.from,this.from+this.slice.size,n.slice(this.from,this.to))}map(n){let o=n.mapResult(this.from,1),a=n.mapResult(this.to,-1);return o.deletedAcross&&a.deletedAcross?null:new ReplaceStep(o.pos,Math.max(o.pos,a.pos),this.slice,this.structure)}merge(n){if(!(n instanceof ReplaceStep)||n.structure||this.structure)return null;if(this.from+this.slice.size!=n.from||this.slice.openEnd||n.slice.openStart){if(n.to!=this.from||this.slice.openStart||n.slice.openEnd)return null;{let o=this.slice.size+n.slice.size==0?l.p2.empty:new l.p2(n.slice.content.append(this.slice.content),n.slice.openStart,this.slice.openEnd);return new ReplaceStep(n.from,this.to,o,this.structure)}}{let o=this.slice.size+n.slice.size==0?l.p2.empty:new l.p2(this.slice.content.append(n.slice.content),this.slice.openStart,n.slice.openEnd);return new ReplaceStep(this.from,this.to+(n.to-n.from),o,this.structure)}}toJSON(){let n={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(n.slice=this.slice.toJSON()),this.structure&&(n.structure=!0),n}static fromJSON(n,o){if("number"!=typeof o.from||"number"!=typeof o.to)throw RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(o.from,o.to,l.p2.fromJSON(n,o.slice),!!o.structure)}};Step.jsonID("replace",ReplaceStep);let ReplaceAroundStep=class ReplaceAroundStep extends Step{constructor(n,o,a,l,m,S,M=!1){super(),this.from=n,this.to=o,this.gapFrom=a,this.gapTo=l,this.slice=m,this.insert=S,this.structure=M}apply(n){if(this.structure&&(contentBetween(n,this.from,this.gapFrom)||contentBetween(n,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let o=n.slice(this.gapFrom,this.gapTo);if(o.openStart||o.openEnd)return StepResult.fail("Gap is not a flat range");let a=this.slice.insertAt(this.insert,o.content);return a?StepResult.fromReplace(n,this.from,this.to,a):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(n){let o=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+o,this.from+this.insert,this.from+this.insert+o,n.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(n){let o=n.mapResult(this.from,1),a=n.mapResult(this.to,-1),l=this.from==this.gapFrom?o.pos:n.map(this.gapFrom,-1),m=this.to==this.gapTo?a.pos:n.map(this.gapTo,1);return o.deletedAcross&&a.deletedAcross||l<o.pos||m>a.pos?null:new ReplaceAroundStep(o.pos,a.pos,l,m,this.slice,this.insert,this.structure)}toJSON(){let n={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(n.slice=this.slice.toJSON()),this.structure&&(n.structure=!0),n}static fromJSON(n,o){if("number"!=typeof o.from||"number"!=typeof o.to||"number"!=typeof o.gapFrom||"number"!=typeof o.gapTo||"number"!=typeof o.insert)throw RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(o.from,o.to,o.gapFrom,o.gapTo,l.p2.fromJSON(n,o.slice),o.insert,!!o.structure)}};function contentBetween(n,o,a){let l=n.resolve(o),m=a-o,S=l.depth;for(;m>0&&S>0&&l.indexAfter(S)==l.node(S).childCount;)S--,m--;if(m>0){let n=l.node(S).maybeChild(l.indexAfter(S));for(;m>0;){if(!n||n.isLeaf)return!0;n=n.firstChild,m--}}return!1}function clearIncompatible(n,o,a,m=a.contentMatch,S=!0){let M=n.doc.nodeAt(o),T=[],A=o+1;for(let o=0;o<M.childCount;o++){let E=M.child(o),R=A+E.nodeSize,O=m.matchType(E.type);if(O){m=O;for(let o=0;o<E.marks.length;o++)a.allowsMarkType(E.marks[o].type)||n.step(new RemoveMarkStep(A,R,E.marks[o]));if(S&&E.isText&&"pre"!=a.whitespace){let n,o=/\r?\n|\r/g,m;for(;n=o.exec(E.text);)m||(m=new l.p2(l.HY.from(a.schema.text(" ",a.allowedMarks(E.marks))),0,0)),T.push(new ReplaceStep(A+n.index,A+n.index+n[0].length,m))}}else T.push(new ReplaceStep(A,R,l.p2.empty));A=R}if(!m.validEnd){let o=m.fillBefore(l.HY.empty,!0);n.replace(A,A,new l.p2(o,0,0))}for(let o=T.length-1;o>=0;o--)n.step(T[o])}function liftTarget(n){let o=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let a=n.depth;;--a){let l=n.$from.node(a),m=n.$from.index(a),S=n.$to.indexAfter(a);if(a<n.depth&&l.canReplace(m,S,o))return a;if(0==a||l.type.spec.isolating||!((0==m||l.canReplace(m,l.childCount))&&(S==l.childCount||l.canReplace(0,S))))break}return null}function findWrapping(n,o,a=null,l=n){let m=function(n,o){let{parent:a,startIndex:l,endIndex:m}=n,S=a.contentMatchAt(l).findWrapping(o);if(!S)return null;let M=S.length?S[0]:o;return a.canReplaceWith(l,m,M)?S:null}(n,o),S=m&&function(n,o){let{parent:a,startIndex:l,endIndex:m}=n,S=a.child(l),M=o.contentMatch.findWrapping(S.type);if(!M)return null;let T=(M.length?M[M.length-1]:o).contentMatch;for(let n=l;T&&n<m;n++)T=T.matchType(a.child(n).type);return T&&T.validEnd?M:null}(l,o);return S?m.map(withAttrs).concat({type:o,attrs:a}).concat(S.map(withAttrs)):null}function withAttrs(n){return{type:n,attrs:null}}function replaceNewlines(n,o,a,l){o.forEach((m,S)=>{if(m.isText){let M,T=/\r?\n|\r/g;for(;M=T.exec(m.text);){let m=n.mapping.slice(l).map(a+1+S+M.index);n.replaceWith(m,m+1,o.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(n,o,a,l){o.forEach((m,S)=>{if(m.type==m.type.schema.linebreakReplacement){let m=n.mapping.slice(l).map(a+1+S);n.replaceWith(m,m+1,o.type.schema.text("\n"))}})}function canSplit(n,o,a=1,l){let m=n.resolve(o),S=m.depth-a,M=l&&l[l.length-1]||m.parent;if(S<0||m.parent.type.spec.isolating||!m.parent.canReplace(m.index(),m.parent.childCount)||!M.type.validContent(m.parent.content.cutByIndex(m.index(),m.parent.childCount)))return!1;for(let n=m.depth-1,o=a-2;n>S;n--,o--){let a=m.node(n),S=m.index(n);if(a.type.spec.isolating)return!1;let M=a.content.cutByIndex(S,a.childCount),T=l&&l[o+1];T&&(M=M.replaceChild(0,T.type.create(T.attrs)));let A=l&&l[o]||a;if(!a.canReplace(S+1,a.childCount)||!A.type.validContent(M))return!1}let T=m.indexAfter(S),A=l&&l[0];return m.node(S).canReplaceWith(T,T,A?A.type:m.node(S+1).type)}function canJoin(n,o){let a=n.resolve(o),l=a.index();return joinable(a.nodeBefore,a.nodeAfter)&&a.parent.canReplace(l,l+1)}function joinable(n,o){return!!(n&&o&&!n.isLeaf&&function(n,o){o.content.size||n.type.compatibleContent(o.type);let a=n.contentMatchAt(n.childCount),{linebreakReplacement:l}=n.type.schema;for(let m=0;m<o.childCount;m++){let S=o.child(m),M=S.type==l?n.type.schema.nodes.text:S.type;if(!(a=a.matchType(M))||!n.type.allowsMarks(S.marks))return!1}return a.validEnd}(n,o))}function joinPoint(n,o,a=-1){let l=n.resolve(o);for(let n=l.depth;;n--){let m,S,M=l.index(n);if(n==l.depth?(m=l.nodeBefore,S=l.nodeAfter):a>0?(m=l.node(n+1),M++,S=l.node(n).maybeChild(M)):(m=l.node(n).maybeChild(M-1),S=l.node(n+1)),m&&!m.isTextblock&&joinable(m,S)&&l.node(n).canReplace(M,M+1))return o;if(0==n)break;o=a<0?l.before(n):l.after(n)}}function dropPoint(n,o,a){let l=n.resolve(o);if(!a.content.size)return o;let m=a.content;for(let n=0;n<a.openStart;n++)m=m.firstChild.content;for(let n=1;n<=(0==a.openStart&&a.size?2:1);n++)for(let o=l.depth;o>=0;o--){let a=o==l.depth?0:l.pos<=(l.start(o+1)+l.end(o+1))/2?-1:1,S=l.index(o)+(a>0?1:0),M=l.node(o),T=!1;if(1==n)T=M.canReplace(S,S,m);else{let n=M.contentMatchAt(S).findWrapping(m.firstChild.type);T=n&&M.canReplaceWith(S,S,n[0])}if(T)return 0==a?l.pos:a<0?l.before(o+1):l.after(o+1)}return null}function replaceStep(n,o,a=o,m=l.p2.empty){if(o==a&&!m.size)return null;let S=n.resolve(o),M=n.resolve(a);return fitsTrivially(S,M,m)?new ReplaceStep(o,a,m):new Fitter(S,M,m).fit()}function fitsTrivially(n,o,a){return!a.openStart&&!a.openEnd&&n.start()==o.start()&&n.parent.canReplace(n.index(),o.index(),a.content)}Step.jsonID("replaceAround",ReplaceAroundStep);let Fitter=class Fitter{constructor(n,o,a){this.$from=n,this.$to=o,this.unplaced=a,this.frontier=[],this.placed=l.HY.empty;for(let o=0;o<=n.depth;o++){let a=n.node(o);this.frontier.push({type:a.type,match:a.contentMatchAt(n.indexAfter(o))})}for(let o=n.depth;o>0;o--)this.placed=l.HY.from(n.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let n=this.findFittable();n?this.placeNodes(n):this.openMore()||this.dropNode()}let n=this.mustMoveInline(),o=this.placed.size-this.depth-this.$from.depth,a=this.$from,m=this.close(n<0?this.$to:a.doc.resolve(n));if(!m)return null;let S=this.placed,M=a.depth,T=m.depth;for(;M&&T&&1==S.childCount;)S=S.firstChild.content,M--,T--;let A=new l.p2(S,M,T);return n>-1?new ReplaceAroundStep(a.pos,n,this.$to.pos,this.$to.end(),A,o):A.size||a.pos!=this.$to.pos?new ReplaceStep(a.pos,m.pos,A):null}findFittable(){let n=this.unplaced.openStart;for(let o=this.unplaced.content,a=0,l=this.unplaced.openEnd;a<n;a++){let m=o.firstChild;if(o.childCount>1&&(l=0),m.type.spec.isolating&&l<=a){n=a;break}o=m.content}for(let o=1;o<=2;o++)for(let a=1==o?n:this.unplaced.openStart;a>=0;a--){let n=null,m=(a?(n=contentAt(this.unplaced.content,a-1).firstChild).content:this.unplaced.content).firstChild;for(let S=this.depth;S>=0;S--){let{type:M,match:T}=this.frontier[S],A,E=null;if(1==o&&(m?T.matchType(m.type)||(E=T.fillBefore(l.HY.from(m),!1)):n&&M.compatibleContent(n.type)))return{sliceDepth:a,frontierDepth:S,parent:n,inject:E};if(2==o&&m&&(A=T.findWrapping(m.type)))return{sliceDepth:a,frontierDepth:S,parent:n,wrap:A};if(n&&T.matchType(n.type))break}}}openMore(){let{content:n,openStart:o,openEnd:a}=this.unplaced,m=contentAt(n,o);return!!m.childCount&&!m.firstChild.isLeaf&&(this.unplaced=new l.p2(n,o+1,Math.max(a,m.size+o>=n.size-a?o+1:0)),!0)}dropNode(){let{content:n,openStart:o,openEnd:a}=this.unplaced,m=contentAt(n,o);if(m.childCount<=1&&o>0){let S=n.size-o<=o+m.size;this.unplaced=new l.p2(dropFromFragment(n,o-1,1),o-1,S?o-1:a)}else this.unplaced=new l.p2(dropFromFragment(n,o,1),o,a)}placeNodes({sliceDepth:n,frontierDepth:o,parent:a,inject:m,wrap:S}){for(;this.depth>o;)this.closeFrontierNode();if(S)for(let n=0;n<S.length;n++)this.openFrontierNode(S[n]);let M=this.unplaced,T=a?a.content:M.content,A=M.openStart-n,E=0,R=[],{match:O,type:N}=this.frontier[o];if(m){for(let n=0;n<m.childCount;n++)R.push(m.child(n));O=O.matchFragment(m)}let j=T.size+n-(M.content.size-M.openEnd);for(;E<T.childCount;){let n=T.child(E),o=O.matchType(n.type);if(!o)break;(++E>1||0==A||n.content.size)&&(O=o,R.push(function closeNodeStart(n,o,a){if(o<=0)return n;let m=n.content;return o>1&&(m=m.replaceChild(0,closeNodeStart(m.firstChild,o-1,1==m.childCount?a-1:0))),o>0&&(m=n.type.contentMatch.fillBefore(m).append(m),a<=0&&(m=m.append(n.type.contentMatch.matchFragment(m).fillBefore(l.HY.empty,!0)))),n.copy(m)}(n.mark(N.allowedMarks(n.marks)),1==E?A:0,E==T.childCount?j:-1)))}let B=E==T.childCount;B||(j=-1),this.placed=addToFragment(this.placed,o,l.HY.from(R)),this.frontier[o].match=O,B&&j<0&&a&&a.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let n=0,o=T;n<j;n++){let n=o.lastChild;this.frontier.push({type:n.type,match:n.contentMatchAt(n.childCount)}),o=n.content}this.unplaced=B?0==n?l.p2.empty:new l.p2(dropFromFragment(M.content,n-1,1),n-1,j<0?M.openEnd:n-1):new l.p2(dropFromFragment(M.content,n,E),M.openStart,M.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return -1;let n=this.frontier[this.depth],o;if(!n.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,n.type,n.match,!1)||this.$to.depth==this.depth&&(o=this.findCloseLevel(this.$to))&&o.depth==this.depth)return -1;let{depth:a}=this.$to,l=this.$to.after(a);for(;a>1&&l==this.$to.end(--a);)++l;return l}findCloseLevel(n){n:for(let o=Math.min(this.depth,n.depth);o>=0;o--){let{match:a,type:l}=this.frontier[o],m=o<n.depth&&n.end(o+1)==n.pos+(n.depth-(o+1)),S=contentAfterFits(n,o,l,a,m);if(S){for(let a=o-1;a>=0;a--){let{match:o,type:l}=this.frontier[a],m=contentAfterFits(n,a,l,o,!0);if(!m||m.childCount)continue n}return{depth:o,fit:S,move:m?n.doc.resolve(n.after(o+1)):n}}}}close(n){let o=this.findCloseLevel(n);if(!o)return null;for(;this.depth>o.depth;)this.closeFrontierNode();o.fit.childCount&&(this.placed=addToFragment(this.placed,o.depth,o.fit)),n=o.move;for(let a=o.depth+1;a<=n.depth;a++){let o=n.node(a),l=o.type.contentMatch.fillBefore(o.content,!0,n.index(a));this.openFrontierNode(o.type,o.attrs,l)}return n}openFrontierNode(n,o=null,a){let m=this.frontier[this.depth];m.match=m.match.matchType(n),this.placed=addToFragment(this.placed,this.depth,l.HY.from(n.create(o,a))),this.frontier.push({type:n,match:n.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(l.HY.empty,!0);n.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,n))}};function dropFromFragment(n,o,a){return 0==o?n.cutByIndex(a,n.childCount):n.replaceChild(0,n.firstChild.copy(dropFromFragment(n.firstChild.content,o-1,a)))}function addToFragment(n,o,a){return 0==o?n.append(a):n.replaceChild(n.childCount-1,n.lastChild.copy(addToFragment(n.lastChild.content,o-1,a)))}function contentAt(n,o){for(let a=0;a<o;a++)n=n.firstChild.content;return n}function contentAfterFits(n,o,a,l,m){let S=n.node(o),M=m?n.indexAfter(o):n.index(o);if(M==S.childCount&&!a.compatibleContent(S.type))return null;let T=l.fillBefore(S.content,!0,M);return T&&!function(n,o,a){for(let l=a;l<o.childCount;l++)if(!n.allowsMarks(o.child(l).marks))return!0;return!1}(a,S.content,M)?T:null}function coveredDepths(n,o){let a=[],l=Math.min(n.depth,o.depth);for(let m=l;m>=0;m--){let l=n.start(m);if(l<n.pos-(n.depth-m)||o.end(m)>o.pos+(o.depth-m)||n.node(m).type.spec.isolating||o.node(m).type.spec.isolating)break;(l==o.start(m)||m==n.depth&&m==o.depth&&n.parent.inlineContent&&o.parent.inlineContent&&m&&o.start(m-1)==l-1)&&a.push(m)}return a}let AttrStep=class AttrStep extends Step{constructor(n,o,a){super(),this.pos=n,this.attr=o,this.value=a}apply(n){let o=n.nodeAt(this.pos);if(!o)return StepResult.fail("No node at attribute step's position");let a=Object.create(null);for(let n in o.attrs)a[n]=o.attrs[n];a[this.attr]=this.value;let m=o.type.create(a,null,o.marks);return StepResult.fromReplace(n,this.pos,this.pos+1,new l.p2(l.HY.from(m),0,o.isLeaf?0:1))}getMap(){return StepMap.empty}invert(n){return new AttrStep(this.pos,this.attr,n.nodeAt(this.pos).attrs[this.attr])}map(n){let o=n.mapResult(this.pos,1);return o.deletedAfter?null:new AttrStep(o.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(n,o){if("number"!=typeof o.pos||"string"!=typeof o.attr)throw RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(o.pos,o.attr,o.value)}};Step.jsonID("attr",AttrStep);let DocAttrStep=class DocAttrStep extends Step{constructor(n,o){super(),this.attr=n,this.value=o}apply(n){let o=Object.create(null);for(let a in n.attrs)o[a]=n.attrs[a];o[this.attr]=this.value;let a=n.type.create(o,n.content,n.marks);return StepResult.ok(a)}getMap(){return StepMap.empty}invert(n){return new DocAttrStep(this.attr,n.attrs[this.attr])}map(n){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(n,o){if("string"!=typeof o.attr)throw RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(o.attr,o.value)}};Step.jsonID("docAttr",DocAttrStep);let S=class extends Error{};(S=function TransformError(n){let o=Error.call(this,n);return o.__proto__=TransformError.prototype,o}).prototype=Object.create(Error.prototype),S.prototype.constructor=S,S.prototype.name="TransformError";let Transform=class Transform{constructor(n){this.doc=n,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(n){let o=this.maybeStep(n);if(o.failed)throw new S(o.failed);return this}maybeStep(n){let o=n.apply(this.doc);return o.failed||this.addStep(n,o.doc),o}get docChanged(){return this.steps.length>0}addStep(n,o){this.docs.push(this.doc),this.steps.push(n),this.mapping.appendMap(n.getMap()),this.doc=o}replace(n,o=n,a=l.p2.empty){let m=replaceStep(this.doc,n,o,a);return m&&this.step(m),this}replaceWith(n,o,a){return this.replace(n,o,new l.p2(l.HY.from(a),0,0))}delete(n,o){return this.replace(n,o,l.p2.empty)}insert(n,o){return this.replaceWith(n,n,o)}replaceRange(n,o,a){return!function(n,o,a,m){if(!m.size)return n.deleteRange(o,a);let S=n.doc.resolve(o),M=n.doc.resolve(a);if(fitsTrivially(S,M,m))return n.step(new ReplaceStep(o,a,m));let T=coveredDepths(S,n.doc.resolve(a));0==T[T.length-1]&&T.pop();let A=-(S.depth+1);T.unshift(A);for(let n=S.depth,o=S.pos-1;n>0;n--,o--){let a=S.node(n).type.spec;if(a.defining||a.definingAsContext||a.isolating)break;T.indexOf(n)>-1?A=n:S.before(n)==o&&T.splice(1,0,-n)}let E=T.indexOf(A),R=[],O=m.openStart;for(let n=m.content,o=0;;o++){let a=n.firstChild;if(R.push(a),o==m.openStart)break;n=a.content}for(let n=O-1;n>=0;n--){var N;let o=R[n],a=(N=o.type).spec.defining||N.spec.definingForContent;if(a&&!o.sameMarkup(S.node(Math.abs(A)-1)))O=n;else if(a||!o.type.isTextblock)break}for(let o=m.openStart;o>=0;o--){let A=(o+O+1)%(m.openStart+1),N=R[A];if(N)for(let o=0;o<T.length;o++){let R=T[(o+E)%T.length],O=!0;R<0&&(O=!1,R=-R);let j=S.node(R-1),B=S.index(R-1);if(j.canReplaceWith(B,B,N.type,N.marks))return n.replace(S.before(R),O?M.after(R):a,new l.p2(function closeFragment(n,o,a,m,S){if(o<a){let l=n.firstChild;n=n.replaceChild(0,l.copy(closeFragment(l.content,o+1,a,m,l)))}if(o>m){let o=S.contentMatchAt(0),a=o.fillBefore(n).append(n);n=a.append(o.matchFragment(a).fillBefore(l.HY.empty,!0))}return n}(m.content,0,m.openStart,A),A,m.openEnd))}}let j=n.steps.length;for(let l=T.length-1;l>=0&&(n.replace(o,a,m),!(n.steps.length>j));l--){let n=T[l];n<0||(o=S.before(n),a=M.after(n))}}(this,n,o,a),this}replaceRangeWith(n,o,a){return!function(n,o,a,m){if(!m.isInline&&o==a&&n.doc.resolve(o).parent.content.size){let l=function(n,o,a){let l=n.resolve(o);if(l.parent.canReplaceWith(l.index(),l.index(),a))return o;if(0==l.parentOffset)for(let n=l.depth-1;n>=0;n--){let o=l.index(n);if(l.node(n).canReplaceWith(o,o,a))return l.before(n+1);if(o>0)return null}if(l.parentOffset==l.parent.content.size)for(let n=l.depth-1;n>=0;n--){let o=l.indexAfter(n);if(l.node(n).canReplaceWith(o,o,a))return l.after(n+1);if(o<l.node(n).childCount)break}return null}(n.doc,o,m.type);null!=l&&(o=a=l)}n.replaceRange(o,a,new l.p2(l.HY.from(m),0,0))}(this,n,o,a),this}deleteRange(n,o){return!function(n,o,a){let l=n.doc.resolve(o),m=n.doc.resolve(a),S=coveredDepths(l,m);for(let o=0;o<S.length;o++){let a=S[o],M=o==S.length-1;if(M&&0==a||l.node(a).type.contentMatch.validEnd)return n.delete(l.start(a),m.end(a));if(a>0&&(M||l.node(a-1).canReplace(l.index(a-1),m.indexAfter(a-1))))return n.delete(l.before(a),m.after(a))}for(let S=1;S<=l.depth&&S<=m.depth;S++)if(o-l.start(S)==l.depth-S&&a>l.end(S)&&m.end(S)-a!=m.depth-S&&l.start(S-1)==m.start(S-1)&&l.node(S-1).canReplace(l.index(S-1),m.index(S-1)))return n.delete(l.before(S),a);n.delete(o,a)}(this,n,o),this}lift(n,o){return!function(n,o,a){let{$from:m,$to:S,depth:M}=o,T=m.before(M+1),A=S.after(M+1),E=T,R=A,O=l.HY.empty,N=0;for(let n=M,o=!1;n>a;n--)o||m.index(n)>0?(o=!0,O=l.HY.from(m.node(n).copy(O)),N++):E--;let j=l.HY.empty,B=0;for(let n=M,o=!1;n>a;n--)o||S.after(n+1)<S.end(n)?(o=!0,j=l.HY.from(S.node(n).copy(j)),B++):R++;n.step(new ReplaceAroundStep(E,R,T,A,new l.p2(O.append(j),N,B),O.size-N,!0))}(this,n,o),this}join(n,o=1){return!function(n,o,a){let m=null,{linebreakReplacement:S}=n.doc.type.schema,M=n.doc.resolve(o-a),T=M.node().type;if(S&&T.inlineContent){let n="pre"==T.whitespace,o=!!T.contentMatch.matchType(S);n&&!o?m=!1:!n&&o&&(m=!0)}let A=n.steps.length;if(!1===m){let l=n.doc.resolve(o+a);replaceLinebreaks(n,l.node(),l.before(),A)}T.inlineContent&&clearIncompatible(n,o+a-1,T,M.node().contentMatchAt(M.index()),null==m);let E=n.mapping.slice(A),R=E.map(o-a);if(n.step(new ReplaceStep(R,E.map(o+a,-1),l.p2.empty,!0)),!0===m){let o=n.doc.resolve(R);replaceNewlines(n,o.node(),o.before(),n.steps.length)}}(this,n,o),this}wrap(n,o){return!function(n,o,a){let m=l.HY.empty;for(let n=a.length-1;n>=0;n--){if(m.size){let o=a[n].type.contentMatch.matchFragment(m);if(!o||!o.validEnd)throw RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}m=l.HY.from(a[n].type.create(a[n].attrs,m))}let S=o.start,M=o.end;n.step(new ReplaceAroundStep(S,M,S,M,new l.p2(m,0,0),a.length,!0))}(this,n,o),this}setBlockType(n,o=n,a,m=null){return!function(n,o,a,m,S){if(!m.isTextblock)throw RangeError("Type given to setBlockType should be a textblock");let M=n.steps.length;n.doc.nodesBetween(o,a,(o,a)=>{var T,A;let E,R,O="function"==typeof S?S(o):S;if(o.isTextblock&&!o.hasMarkup(m,O)&&(T=n.doc,A=n.mapping.slice(M).map(a),R=(E=T.resolve(A)).index(),E.parent.canReplaceWith(R,R+1,m))){let S=null;if(m.schema.linebreakReplacement){let n="pre"==m.whitespace,o=!!m.contentMatch.matchType(m.schema.linebreakReplacement);n&&!o?S=!1:!n&&o&&(S=!0)}!1===S&&replaceLinebreaks(n,o,a,M),clearIncompatible(n,n.mapping.slice(M).map(a,1),m,void 0,null===S);let T=n.mapping.slice(M),A=T.map(a,1),E=T.map(a+o.nodeSize,1);return n.step(new ReplaceAroundStep(A,E,A+1,E-1,new l.p2(l.HY.from(m.create(O,null,o.marks)),0,0),1,!0)),!0===S&&replaceNewlines(n,o,a,M),!1}})}(this,n,o,a,m),this}setNodeMarkup(n,o,a=null,m){return!function(n,o,a,m,S){let M=n.doc.nodeAt(o);if(!M)throw RangeError("No node at given position");a||(a=M.type);let T=a.create(m,null,S||M.marks);if(M.isLeaf)return n.replaceWith(o,o+M.nodeSize,T);if(!a.validContent(M.content))throw RangeError("Invalid content for node type "+a.name);n.step(new ReplaceAroundStep(o,o+M.nodeSize,o+1,o+M.nodeSize-1,new l.p2(l.HY.from(T),0,0),1,!0))}(this,n,o,a,m),this}setNodeAttribute(n,o,a){return this.step(new AttrStep(n,o,a)),this}setDocAttribute(n,o){return this.step(new DocAttrStep(n,o)),this}addNodeMark(n,o){return this.step(new AddNodeMarkStep(n,o)),this}removeNodeMark(n,o){let a=this.doc.nodeAt(n);if(!a)throw RangeError("No node at position "+n);if(o instanceof l.vc)o.isInSet(a.marks)&&this.step(new RemoveNodeMarkStep(n,o));else{let l=a.marks,m,S=[];for(;m=o.isInSet(l);)S.push(new RemoveNodeMarkStep(n,m)),l=m.removeFromSet(l);for(let n=S.length-1;n>=0;n--)this.step(S[n])}return this}split(n,o=1,a){return!function(n,o,a=1,m){let S=n.doc.resolve(o),M=l.HY.empty,T=l.HY.empty;for(let n=S.depth,o=S.depth-a,A=a-1;n>o;n--,A--){M=l.HY.from(S.node(n).copy(M));let o=m&&m[A];T=l.HY.from(o?o.type.create(o.attrs,T):S.node(n).copy(T))}n.step(new ReplaceStep(o,o,new l.p2(M.append(T),a,a),!0))}(this,n,o,a),this}addMark(n,o,a){var l;let m,S,M,T;return l=this,M=[],T=[],l.doc.nodesBetween(n,o,(l,A,E)=>{if(!l.isInline)return;let R=l.marks;if(!a.isInSet(R)&&E.type.allowsMarkType(a.type)){let E=Math.max(A,n),O=Math.min(A+l.nodeSize,o),N=a.addToSet(R);for(let n=0;n<R.length;n++)R[n].isInSet(N)||(m&&m.to==E&&m.mark.eq(R[n])?m.to=O:M.push(m=new RemoveMarkStep(E,O,R[n])));S&&S.to==E?S.to=O:T.push(S=new AddMarkStep(E,O,a))}}),M.forEach(n=>l.step(n)),T.forEach(n=>l.step(n)),this}removeMark(n,o,a){var m;let S,M;return m=this,S=[],M=0,m.doc.nodesBetween(n,o,(m,T)=>{if(!m.isInline)return;M++;let A=null;if(a instanceof l.ZU){let n=m.marks,o;for(;o=a.isInSet(n);)(A||(A=[])).push(o),n=o.removeFromSet(n)}else a?a.isInSet(m.marks)&&(A=[a]):A=m.marks;if(A&&A.length){let a=Math.min(T+m.nodeSize,o);for(let o=0;o<A.length;o++){let l=A[o],m;for(let n=0;n<S.length;n++){let o=S[n];o.step==M-1&&l.eq(S[n].style)&&(m=o)}m?(m.to=a,m.step=M):S.push({style:l,from:Math.max(T,n),to:a,step:M})}}}),S.forEach(n=>m.step(new RemoveMarkStep(n.from,n.to,n.style))),this}clearIncompatible(n,o,a){return clearIncompatible(this,n,o,a),this}}}}]);