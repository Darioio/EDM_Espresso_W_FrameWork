(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1126)}])},1126:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Home}});var r=n(2729),i=n(5893),l=n(7294),o=n(9008),a=n.n(o),d=n(1320),s=n(7243),c=n(824),p=n(1266),u=n(426),m=n(9258),g=n(2468),h=n(7106);function AppLayout(e){let{title:t="EDM Espresso",left:n,right:r,rightOpen:o=!1,onRightClose:a,onRightToggle:x,progress:f=-1,buffer:b=-1,loading:y=!1,children:v}=e,[j,w]=(0,l.useState)(380),[S,C]=(0,l.useState)(380),[Z,k]=(0,l.useState)(null),clamp=e=>Math.min(800,Math.max(260,e)),F=(0,l.useCallback)(e=>{if("left"===Z)w(clamp(e.clientX));else if("right"===Z){let t=window.innerWidth-e.clientX;C(clamp(t))}},[Z]),T=(0,l.useCallback)(()=>k(null),[]);return(0,l.useEffect)(()=>{if(Z)return window.addEventListener("mousemove",F),window.addEventListener("mouseup",T),document.body.style.cursor="col-resize",document.body.style.userSelect="none",()=>{window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",T),document.body.style.cursor="",document.body.style.userSelect=""}},[Z,F,T]),(0,i.jsxs)(m.Z,{sx:{display:"flex"},children:[(y||"number"==typeof f&&f>=0&&f<100)&&(0,i.jsx)(h.Z,{variant:"determinate",value:Math.max(0,f||0),sx:{position:"fixed",top:0,left:0,right:0,height:4,zIndex:e=>e.zIndex.modal+1}}),(0,i.jsx)(d.Z,{position:"fixed",color:"default",elevation:0,sx:{zIndex:e=>e.zIndex.drawer+1,backgroundColor:"#F5F6FA",boxShadow:"none",borderBottom:e=>"1px solid ".concat(e.palette.divider)},children:(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(c.Z,{variant:"h6",noWrap:!0,sx:{flex:1},children:t}),(0,i.jsx)(p.Z,{"aria-label":"Brand customisation",onClick:x,children:(0,i.jsx)(u.Z,{})})]})}),(0,i.jsxs)(g.ZP,{variant:"permanent",anchor:"left",sx:{width:j,flexShrink:0,"& .MuiDrawer-paper":{width:j,boxSizing:"border-box",display:"flex",flexDirection:"column"}},children:[(0,i.jsx)(s.Z,{}),(0,i.jsx)(m.Z,{sx:{p:1,overflow:"auto",flex:1,display:"flex",flexDirection:"column"},children:n})]}),(0,i.jsx)("div",{onMouseDown:()=>k("left"),style:{position:"fixed",left:j-3,top:64,height:"calc(100vh - 64px)",width:6,cursor:"col-resize",zIndex:2e3}}),(0,i.jsx)(m.Z,{component:"main",sx:{flexGrow:1,width:{sm:"calc(100% - ".concat(j,"px)")},mr:o?"".concat(S,"px"):0,paddingTop:"64px"},children:v}),(0,i.jsxs)(g.ZP,{variant:o?"persistent":"temporary",anchor:"right",open:o,onClose:a,ModalProps:{keepMounted:!0},sx:{"& .MuiDrawer-paper":{width:S,boxSizing:"border-box"}},children:[(0,i.jsx)(s.Z,{}),(0,i.jsxs)(m.Z,{sx:{position:"relative"},children:[(0,i.jsx)("div",{onMouseDown:()=>k("right"),style:{position:"absolute",left:0,top:0,bottom:0,width:6,cursor:"col-resize",zIndex:1}}),(0,i.jsx)(m.Z,{sx:{p:2,height:"100%",display:"flex",flexDirection:"column"},children:r})]})]})]})}var x=n(4923),f=n(7958),b=n(1005),y=n(1687),v=n(4881),j=n(1722),w=n(4697),S=n(199),C=n(4937),Z=n(800),k=n(89),F=n(855),T=n(5777),I=n(7548),E=n(6521),B=n(3631),z=n(1395),M=n(2467),L=n(7318),A=n(359),H=n(7097),R=n(2178),P=n(94),N=n(206),W=n(9971),D=n(2218),O=n(6917),U=n(9001),_=n(3278),q=n(287),G=n(2007);let J=[{id:"product-image-left-copy-right",name:"Image left / Copy right",html:'<!-- === Start: Product Feature Module (Image Left / Copy Right) === -->\n<table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" align="center" style="margin:0;padding:0;">\n  <tr>\n    <td align="center" style="margin:0;padding:0;">\n      <!-- Wrapper -->\n      <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="max-width:600px;margin:0 auto;background:#FFFFFF;">\n        <tr>\n          <td style="padding:25px">\n            <!-- Two Columns -->\n            <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="width:100%;margin:0;padding:0;">\n              <tr>\n                <!-- Left: Image -->\n                <td class="stack-cols" width="50%" valign="top" style="padding:0 8px;">\n                  <a href="{{cta}}" target="_blank" style="text-decoration:none;">\n                    <img src="{{image}}" alt="{{title}}" style="display:block;width:100%;height:auto;border:0;outline:0;text-decoration:none;-ms-interpolation-mode:bicubic;">\n                  </a>\n                </td>\n\n                <!-- Right: Copy -->\n                <td class="stack-cols" width="50%" valign="top" style="padding:0 8px;">\n                  <!-- Title -->\n                  <h2 style="margin:0 0 10px 0;font-family:\'Montserrat\',Arial,Helvetica,sans-serif;font-size:26px;line-height:1.2;color:#111111;font-weight:300;">\n                    {{title}}\n                  </h2>\n\n                  <!-- Price (supports original price via priceHtml) -->\n                  <p style="margin:0 0 10px 0;font-family:\'Montserrat\',Arial,Helvetica,sans-serif;font-size:16px;line-height:1;color:#111111;font-weight:600;">\n                    {{priceHtml}}\n                  </p>\n\n                  <!-- Description -->\n                  <p style="margin:0 0 16px 0;font-family:\'Montserrat\',Arial,Helvetica,sans-serif;font-size:14px;line-height:1.6;color:#333333;">\n                    {{description}}\n                  </p>\n\n                  <!-- CTA + Colours row -->\n                  <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="margin:0;padding:0;">\n                    <tr>\n                      <!-- CTA (left) -->\n                      <td align="left" valign="middle" style="padding:0;">\n                        <table role="presentation" cellpadding="0" cellspacing="0" border="0" style="margin:0;padding:0;">\n                          <tr>\n                            <td align="center" bgcolor="{{ctaBg}}" style="background:{{ctaBg}};">\n                              <a href="{{cta}}" target="_blank" style="display:inline-block;padding:12px 22px;font-family:\'Montserrat\',Arial,Helvetica,sans-serif;font-size:14px;line-height:14px;color:{{ctaText}};text-decoration:none;">\n                                {{ctaLabel}}\n                              </a>\n                            </td>\n                          </tr>\n                        </table>\n                      </td>\n                      <!-- Spacer -->\n                      <td width="12" style="font-size:0;line-height:0;">&nbsp;</td>\n                      <!-- Colours (right aligned) -->\n                      <td align="right" valign="middle" class="color-swatches" style="padding:0;">\n                        {{coloursHtml}}\n                      </td>\n                    </tr>\n                  </table>\n                  <!-- /CTA + Colours row -->\n\n                </td>\n              </tr>\n            </table>\n            <!-- /Two Columns -->\n          </td>\n        </tr>\n      </table>\n      <!-- /Wrapper -->\n    </td>\n  </tr>\n</table>\n<!-- === End: Product Feature Module === -->\n\n<!-- Mobile Stacking -->\n<style>\n@media only screen and (max-width: 600px) {\n  .stack-cols {\n    display:block !important;\n    width:100% !important;\n    padding:0 0 16px 0 !important;\n  }\n  .color-swatches {\n    text-align:right !important;\n  }\n}\n</style>'},{id:"grid",name:"Grid",html:'<!-- === Start: Product Grid Module === -->\n<table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" align="center" style="margin:0;padding:0;">\n  <tr>\n    <td align="center" style="margin:0;padding:0;">\n      <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="max-width:600px;margin:0 auto;background:#FFFFFF;">\n        <tr>\n          <td style="padding:0px;">\n            <!-- Product Images Grid -->\n            <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="width:100%;margin:0;padding:0;">\n              <tr>\n                {{#each images}}\n                <td align="center" valign="top" style="padding:0px;">\n                  <img src="{{.}}" alt="Product image" style="display:block;width:100%;height:auto;border:0;outline:0;text-decoration:none;-ms-interpolation-mode:bicubic;">\n                </td>\n                {{/each}}\n              </tr>\n            </table>\n            <!-- /Product Images Grid -->\n          </td>\n        </tr>\n      </table>\n    </td>\n  </tr>\n</table>\n<!-- === End: Product Grid Module === -->\n<style>\n@media only screen and (max-width: 600px) {\n  .product-grid-img {\n    width: 80px !important;\n    padding: 4px !important;\n  }\n}\n</style>'},{id:"product-copy-left-image-right",name:"Copy left / Image right",html:'<!-- === Start: Product Feature Module (Copy Left / Image Right) === -->\n<table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" align="center" style="margin:0;padding:0;">\n  <tr>\n    <td align="center" style="margin:0;padding:0;">\n      <!-- Wrapper -->\n      <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="max-width:600px;margin:0 auto;background:#FFFFFF;">\n        <tr>\n          <td style="padding:25px;">\n            <!-- Two Columns -->\n            <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="width:100%;margin:0;padding:0;">\n              <tr>\n                <!-- Left: Copy -->\n                <td class="stack-cols" width="50%" valign="top" style="padding:0 8px;">\n                  <!-- Title -->\n                  <h2 style="margin:0 0 10px 0;font-family:\'Montserrat\',Arial,Helvetica,sans-serif;font-size:26px;line-height:1.2;color:#111111;font-weight:300;">\n                    {{title}}\n                  </h2>\n\n                  <!-- Price -->\n                  <p style="margin:0 0 10px 0;font-family:\'Montserrat\',Arial,Helvetica,sans-serif;font-size:16px;line-height:1;color:#111111;font-weight:600;">\n                    {{priceHtml}}\n                  </p>\n\n                  <!-- Description -->\n                  <p style="margin:0 0 16px 0;font-family:\'Montserrat\',Arial,Helvetica,sans-serif;font-size:14px;line-height:1.6;color:#333333;">\n                    {{description}}\n                  </p>\n\n                  <!-- CTA + Colours row -->\n                  <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="margin:0;padding:0;">\n                    <tr>\n                      <!-- CTA (left) -->\n                      <td align="left" valign="middle" style="padding:0;">\n                        <table role="presentation" cellpadding="0" cellspacing="0" border="0" style="margin:0;padding:0;">\n                          <tr>\n                            <td align="center" bgcolor="{{ctaBg}}" style="background:{{ctaBg}};">\n                              <a href="{{cta}}" target="_blank" style="display:inline-block;padding:12px 22px;font-family:\'Montserrat\',Arial,Helvetica,sans-serif;font-size:14px;line-height:14px;color:{{ctaText}};text-decoration:none;">\n                                {{ctaLabel}}\n                              </a>\n                            </td>\n                          </tr>\n                        </table>\n                      </td>\n                      <!-- Spacer -->\n                      <td width="12" style="font-size:0;line-height:0;">&nbsp;</td>\n                      <!-- Colours (right aligned) -->\n                      <td align="right" valign="middle" class="color-swatches" style="padding:0;">\n                        {{coloursHtml}}\n                      </td>\n                    </tr>\n                  </table>\n                  <!-- /CTA + Colours row -->\n\n                </td>\n\n                <!-- Right: Image -->\n                <td class="stack-cols" width="50%" valign="top" style="padding:0 8px;">\n                  <a href="{{cta}}" target="_blank" style="text-decoration:none;">\n                    <img src="{{image}}" alt="{{title}}" style="display:block;width:100%;height:auto;border:0;outline:0;text-decoration:none;-ms-interpolation-mode:bicubic;">\n                  </a>\n                </td>\n              </tr>\n            </table>\n            <!-- /Two Columns -->\n          </td>\n        </tr>\n      </table>\n      <!-- /Wrapper -->\n    </td>\n  </tr>\n</table>\n<!-- === End: Product Feature Module === -->\n\n<!-- Mobile Stacking -->\n<style>\n@media only screen and (max-width: 600px) {\n  .stack-cols {\n    display:block !important;\n    width:100% !important;\n    padding:0 0 16px 0 !important;\n  }\n  .color-swatches {\n    text-align:right !important;\n  }\n}\n</style>'}];function renderTemplate(e,t){let n=e.html;return(n=n.replace(/\{\{#each\s+([a-zA-Z0-9_]+)\}}([\s\S]*?)\{\{\/each\}}/g,(e,n,r)=>{let i=Array.isArray(t[n])?t[n]:[];return i.map(e=>r.replace(/\{\{\.\}\}/g,String(e))).join("")})).replace(/\{\{\s*([a-zA-Z0-9_]+)\s*\}\}/g,(e,n)=>{let r=t[n];return null!=r?String(r):""})}let Y=[{id:"default-header",name:"Default Header",html:'<!-- === BEGIN: Belle & Bloom Header Module (Inline Styles Only) === -->\n<table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" align="center" style="margin:0;padding:0;">\n  <tr>\n    <td align="center" style="margin:0;padding:0;">\n      \n      <!-- Preheader (hidden) -->\n      <div style="display:none;max-height:0;overflow:hidden;mso-hide:all;line-height:1px;font-size:1px;color:#ffffff;">\n        Fast local shipping on $99+ and easy returns (AU, US &amp; CA).\n      </div>\n\n      <!-- Wrapper -->\n      <!--[if mso]><table role="presentation" width="600" cellpadding="0" cellspacing="0" border="0"><tr><td><![endif]-->\n      <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%" style="max-width:600px;margin:0 auto;background:#FFFFFF;">\n        \n        <!-- Announcement Bar -->\n        <tr>\n          <td align="center" bgcolor="#F0C3C7" style="background:#F0C3C7;padding-top:8px;padding-bottom:8px;padding-left:24px;padding-right:24px;font-family:Montserrat,Arial,\'Helvetica Neue\',Helvetica,sans-serif;font-size:14px;line-height:20px;color:#000000;">\n            *Fast Local Free Shipping on $99+ Orders and Easy Returns for AU, US &amp; CA\n          </td>\n        </tr>\n\n        <!-- Brand Lockup -->\n        <tr>\n          <td align="left" style="background:#FFFFFF;padding-top:16px;padding-bottom:16px;padding-left:24px;padding-right:24px;">\n            <a href="https://www.belleandbloom.com/" target="_blank" aria-label="Belle &amp; Bloom" style="text-decoration:none;">\n              <img src="https://d3k81ch9hvuctc.cloudfront.net/company/Wu2wqB/images/7a47a18a-d0a8-41cf-a82a-feaba5de5d77.gif" width="440" alt="belle &amp; bloom | b+b studio" style="display:block;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;width:80%;max-width:80%;height:auto;margin:auto;">\n            </a>\n          </td>\n        </tr>\n\n      </table>\n      <!--[if mso]></td></tr></table><![endif]-->\n\n    </td>\n  </tr>\n</table>\n<!-- === END: Belle & Bloom Header Module === -->'}],K=[{id:"default-footer",name:"Default Footer",html:'<!-- === BEGIN: Belle & Bloom Footer + Menu Module (Inline Styles Only) === -->\n<table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" align="center" style="margin:0;padding:0;">\n  <tr>\n    <td align="center" style="margin:0;padding:0;">\n\n      <!-- Hidden preheader -->\n      <div style="display:none;max-height:0;overflow:hidden;mso-hide:all;line-height:1px;font-size:1px;color:#ffffff;">\n        Fast local shipping on $99+ and easy returns (AU, US &amp; CA).\n      </div>\n\n      <!--[if mso]><table role="presentation" width="600" cellpadding="0" cellspacing="0" border="0"><tr><td><![endif]-->\n      <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="max-width:600px;margin:0 auto;background:#FFFFFF;">\n\n        <!-- ===== CATEGORY MENU ===== -->\n        <tr>\n          <td align="center" style="background:#FFFFFF;padding:0;margin:0;">\n            <table role="presentation" cellpadding="0" cellspacing="0" border="0" align="center" width="100%" style="width:100%;margin:0 auto 0 auto;background:#FFFFFF;">\n              <tr>\n                <td style="background:#FFFFFF;padding:0;margin:0;">\n                  <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="width:100%;margin:0;padding:0;">\n                    <tr>\n                      <td style="padding-left:24px;padding-right:24px;margin:0;">\n\n                        <!-- Item: NEW ARRIVALS -->\n                        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="width:100%;">\n                          <tr>\n                            <td align="center" valign="middle" style="padding-top:12px;padding-bottom:12px;font-family:Montserrat,Arial,\'Helvetica Neue\',Helvetica,sans-serif;font-size:14px;line-height:20px;">\n                              <a href="https://www.belleandbloom.com/collections/new" target="_blank" style="display:block;color:#000000;text-decoration:none;">\n                                NEW ARRIVALS &gt;\n                              </a>\n                            </td>\n                          </tr>\n                        </table>\n                        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" aria-hidden="true" style="width:100%;">\n                          <tr><td style="border-top:1px solid #999999;height:1px;line-height:1px;font-size:0;">&nbsp;</td></tr>\n                        </table>\n\n                        <!-- Item: BLAZERS, JACKETS & COATS -->\n                        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="width:100%;">\n                          <tr>\n                            <td align="center" valign="middle" style="padding-top:12px;padding-bottom:12px;font-family:Montserrat,Arial,\'Helvetica Neue\',Helvetica,sans-serif;font-size:14px;line-height:20px;">\n                              <a href="https://www.belleandbloom.com/collections/womens-coats" target="_blank" style="display:block;color:#000000;text-decoration:none;">\n                                BLAZERS, JACKETS &amp; COATS &gt;\n                              </a>\n                            </td>\n                          </tr>\n                        </table>\n                        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" aria-hidden="true" style="width:100%;">\n                          <tr><td style="border-top:1px solid #999999;height:1px;line-height:1px;font-size:0;">&nbsp;</td></tr>\n                        </table>\n\n                        <!-- Item: DRESSES -->\n                        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="width:100%;">\n                          <tr>\n                            <td align="center" valign="middle" style="padding-top:12px;padding-bottom:12px;font-family:Montserrat,Arial,\'Helvetica Neue\',Helvetica,sans-serif;font-size:14px;line-height:20px;">\n                              <a href="https://www.belleandbloom.com/collections/all-dresses" target="_blank" style="display:block;color:#000000;text-decoration:none;">\n                                DRESSES &gt;\n                              </a>\n                            </td>\n                          </tr>\n                        </table>\n                        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" aria-hidden="true" style="width:100%;">\n                          <tr><td style="border-top:1px solid #999999;height:1px;line-height:1px;font-size:0;">&nbsp;</td></tr>\n                        </table>\n\n                        <!-- Item: BAGS & ACCESSORIES -->\n                        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="width:100%;">\n                          <tr>\n                            <td align="center" valign="middle" style="padding-top:12px;padding-bottom:12px;font-family:Montserrat,Arial,\'Helvetica Neue\',Helvetica,sans-serif;font-size:14px;line-height:20px;">\n                              <a href="https://www.belleandbloom.com/collections/bags-accessories" target="_blank" style="display:block;color:#000000;text-decoration:none;">\n                                BAGS &amp; ACCESSORIES &gt;\n                              </a>\n                            </td>\n                          </tr>\n                        </table>\n                        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" aria-hidden="true" style="width:100%;">\n                          <tr><td style="border-top:1px solid #999999;height:1px;line-height:1px;font-size:0;">&nbsp;</td></tr>\n                        </table>\n\n                        <!-- Item: SHOES -->\n                        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="width:100%;">\n                          <tr>\n                            <td align="center" valign="middle" style="padding-top:12px;padding-bottom:12px;font-family:Montserrat,Arial,\'Helvetica Neue\',Helvetica,sans-serif;font-size:14px;line-height:20px;">\n                              <a href="https://www.belleandbloom.com/collections/shoes" target="_blank" style="display:block;color:#000000;text-decoration:none;">\n                                SHOES &gt;\n                              </a>\n                            </td>\n                          </tr>\n                        </table>\n                        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" aria-hidden="true" style="width:100%;">\n                          <tr><td style="border-top:1px solid #999999;height:1px;line-height:1px;font-size:0;">&nbsp;</td></tr>\n                        </table>\n\n                        <!-- Item: SALE -->\n                        <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="width:100%;">\n                          <tr>\n                            <td align="center" valign="middle" style="padding-top:12px;padding-bottom:12px;font-family:Montserrat,Arial,\'Helvetica Neue\',Helvetica,sans-serif;font-size:14px;line-height:20px;">\n                              <a href="https://www.belleandbloom.com/collections/sale" target="_blank" style="display:block;color:#000000;text-decoration:none;">\n                                SALE &gt;\n                              </a>\n                            </td>\n                          </tr>\n                        </table>\n\n                      </td>\n                    </tr>\n                  </table>\n                </td>\n              </tr>\n            </table>\n          </td>\n        </tr>\n\n        <!-- ===== 4-IMAGE ROW ===== -->\n        <tr>\n          <td align="center" style="background:#FFFFFF;padding-top:16px;padding-bottom:16px;padding-left:24px;padding-right:24px;">\n            <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="width:100%;margin:0;padding:0;">\n              <tr>\n                <td align="center" style="padding:0;margin:0;font-size:0;">\n                  \n  \n\n                  <table role="presentation" cellpadding="0" cellspacing="0" border="0" style="display:inline-block;vertical-align:top;width:25%;max-width:150px;">\n                    <tr>\n                      <td align="center" style="padding-left:6px;padding-right:6px;">\n                        <img src="https://d3k81ch9hvuctc.cloudfront.net/company/Wu2wqB/images/1f3a26d0-9a18-4cbf-8043-a9814b06c75d.jpeg" width="150" alt="Footer image 1" style="display:block;width:100%;max-width:150px;height:auto;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;">\n                      </td>\n                    </tr>\n                  </table>\n\n                  <table role="presentation" cellpadding="0" cellspacing="0" border="0" style="display:inline-block;vertical-align:top;width:25%;max-width:150px;">\n                    <tr>\n                      <td align="center" style="padding-left:6px;padding-right:6px;">\n                        <img src="https://d3k81ch9hvuctc.cloudfront.net/company/Wu2wqB/images/5826e529-cfa2-4c07-8418-b8d1dd703391.jpeg" width="150" alt="Footer image 2" style="display:block;width:100%;max-width:150px;height:auto;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;">\n                      </td>\n                    </tr>\n                  </table>\n\n                  <table role="presentation" cellpadding="0" cellspacing="0" border="0" style="display:inline-block;vertical-align:top;width:25%;max-width:150px;">\n                    <tr>\n                      <td align="center" style="padding-left:6px;padding-right:6px;">\n                        <img src="https://d3k81ch9hvuctc.cloudfront.net/company/Wu2wqB/images/3929f73d-a329-44c6-a3da-f898aa9c80ab.jpeg" width="150" alt="Footer image 3" style="display:block;width:100%;max-width:150px;height:auto;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;">\n                      </td>\n                    </tr>\n                  </table>\n\n                  <table role="presentation" cellpadding="0" cellspacing="0" border="0" style="display:inline-block;vertical-align:top;width:25%;max-width:150px;">\n                    <tr>\n                      <td align="center" style="padding-left:6px;padding-right:6px;">\n                        <img src="https://d3k81ch9hvuctc.cloudfront.net/company/Wu2wqB/images/ee153f13-a66b-4672-9f00-41829a6218d3.jpeg" width="150" alt="Footer image 4" style="display:block;width:100%;max-width:150px;height:auto;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;">\n                      </td>\n                    </tr>\n                  </table>\n\n                </td>\n              </tr>\n            </table>\n          </td>\n        </tr>\n        <!-- ===== END 4-IMAGE ROW ===== -->\n\n        <!-- ===== MONOGRAM + SOCIAL + ADDRESS ===== -->\n        <tr>\n          <td align="center" style="background:#FFFFFF;padding:0;margin:0;">\n            <!-- Monogram -->\n            <img src="https://d3k81ch9hvuctc.cloudfront.net/company/Wu2wqB/images/8b460d10-1a28-4c2d-9395-d4bab5e1622d.jpeg" alt="Belle &amp; Bloom mark" style="width:100%;height:auto;margin:0 auto 12px auto;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;display:block;">\n\n            <!-- Social icons -->\n            <table role="presentation" cellpadding="0" cellspacing="0" border="0" align="center" style="margin:0 auto 12px auto;">\n              <tr>\n                <td style="padding-left:12px;padding-right:12px;">\n                  <a href="https://www.facebook.com/BelleandBloom" target="_blank" aria-label="Facebook" style="text-decoration:none;">\n                    <img src="https://d3k81ch9hvuctc.cloudfront.net/assets/email/buttons/black/facebook_96.png" width="32" height="32" alt="Facebook" style="display:block;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;">\n                  </a>\n                </td>\n                <td style="padding-left:12px;padding-right:12px;">\n                  <a href="https://www.instagram.com/belleandbloomofficial/" target="_blank" aria-label="Instagram" style="text-decoration:none;">\n                    <img src="https://d3k81ch9hvuctc.cloudfront.net/assets/email/buttons/black/instagram_96.png" width="32" height="32" alt="Instagram" style="display:block;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;">\n                  </a>\n                </td>\n                <td style="padding-left:12px;padding-right:12px;">\n                  <a href="https://www.tiktok.com/@belleandbloomofficial?_t=8atlV2GLXgA&_r=1" target="_blank" aria-label="TikTok" style="text-decoration:none;">\n                    <img src="https://d3k81ch9hvuctc.cloudfront.net/assets/email/buttons/black/tiktok_96.png" width="32" height="32" alt="TikTok" style="display:block;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;">\n                  </a>\n                </td>\n                <td style="padding-left:12px;padding-right:12px;">\n                  <a href="https://www.pinterest.com.au/belleandbloom_/" target="_blank" aria-label="Pinterest" style="text-decoration:none;">\n                    <img src="https://d3k81ch9hvuctc.cloudfront.net/assets/email/buttons/black/pinterest_96.png" width="32" height="32" alt="Pinterest" style="display:block;border:0;outline:none;text-decoration:none;-ms-interpolation-mode:bicubic;">\n                  </a>\n                </td>\n              </tr>\n            </table>\n\n            <!-- Address + legal -->\n            <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="width:100%;margin:0;padding:0;">\n              <tr>\n                <td align="center" style="padding-left:24px;padding-right:24px;">\n                  <p style="margin:0 0 6px 0;font-family:Montserrat,Arial,\'Helvetica Neue\',Helvetica,sans-serif;font-size:14px;line-height:20px;font-weight:700;color:#1D1D1D;">\n                    Our mailing address is <a href="mailto:info@belleandbloom.com" style="color:inherit;text-decoration:underline;">info@belleandbloom.com</a>\n                  </p>\n                  <p style="margin:0 0 6px 0;font-family:Montserrat,Arial,\'Helvetica Neue\',Helvetica,sans-serif;font-size:12px;line-height:18px;color:#666666;">\n                    17 Chuter St, McMahon\'s Point, NSW 2060 Australia\n                  </p>\n                  <p style="margin:0 0 10px 0;font-family:Montserrat,Arial,\'Helvetica Neue\',Helvetica,sans-serif;font-size:12px;line-height:18px;color:#666666;">\n                    \xa9 All rights reserved &nbsp;|&nbsp; <a href="https://www.belleandbloom.com/pages/privacy-policy" target="_blank" style="color:inherit;text-decoration:underline;">Privacy</a> &nbsp;|&nbsp; Copyright \xa9 2025 belle &amp; bloom\n                  </p>\n                  <p style="margin:0 0 12px 0;font-family:Montserrat,Arial,\'Helvetica Neue\',Helvetica,sans-serif;font-size:12px;line-height:18px;color:#666666;">\n                    You received this email from belle &amp; bloom.\n                  </p>\n\n                  <!-- Unsubscribe (Klaviyo) -->\n                  <p style="margin:0;font-family:Montserrat,Arial,\'Helvetica Neue\',Helvetica,sans-serif;font-size:12px;line-height:18px;text-decoration:underline;color:#666666;">\n                    {% unsubscribe %}\n                  </p>\n                </td>\n              </tr>\n            </table>\n\n          </td>\n        </tr>\n        <!-- ===== END MONOGRAM + SOCIAL + ADDRESS ===== -->\n\n      </table>\n      <!--[if mso]></td></tr></table><![endif]-->\n\n    </td>\n  </tr>\n</table>\n<!-- === END: Belle & Bloom Footer + Menu Module === -->'}],V=[{id:"hero-default",name:"Default Hero",html:'<!-- === Start: Hero Section === -->\n<table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" align="center" style="margin:0;padding:0;">\n  <tr>\n    <td align="center" style="margin:0;padding:0;">\n      <!-- Wrapper -->\n      <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="max-width:600px;margin:0 auto;background:#FFFFFF;">\n        <tr>\n          <td style="padding:0;">\n            <a href="{{heroHref}}" target="_blank" style="display:block;text-decoration:none;">\n              <img src="{{heroImage}}" alt="{{heroAlt}}" style="display:block;width:100%;height:auto;border:0;outline:0;text-decoration:none;-ms-interpolation-mode:bicubic;" />\n            </a>\n          </td>\n        </tr>\n      </table>\n    </td>\n  </tr>\n</table>\n<!-- === End: Hero Section === -->\n\n<!-- Mobile Stacking for Hero -->\n<style>\n@media only screen and (max-width: 600px) {\n  /* Ensure hero image stacks full width on mobile */\n  .hero-image {\n    width:100% !important;\n    height:auto !important;\n  }\n}\n</style>'},{id:"hero-margins",name:"Hero with Margins",html:'<!-- === Start: Hero Section === -->\n<table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" align="center" style="margin:0;padding:0px;">\n  <tr>\n    <td align="center" style="margin:0;padding:0;">\n      <!-- Wrapper -->\n      <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="max-width:600px;margin:0 auto;background:#FFFFFF;padding:0px 25px 0px 25px;">\n        <tr>\n          <td style="padding:0;">\n            <a href="{{heroHref}}" target="_blank" style="display:block;text-decoration:none;">\n              <img src="{{heroImage}}" alt="{{heroAlt}}" style="display:block;width:100%;height:auto;border:0;outline:0;text-decoration:none;-ms-interpolation-mode:bicubic;" />\n            </a>\n          </td>\n        </tr>\n      </table>\n    </td>\n  </tr>\n</table>\n<!-- === End: Hero Section === -->\n\n<!-- Mobile Stacking for Hero -->\n<style>\n@media only screen and (max-width: 600px) {\n  /* Ensure hero image stacks full width on mobile */\n  .hero-image {\n    width:100% !important;\n    height:auto !important;\n  }\n}\n</style>'}],$=[{id:"banner-default",name:"Default Banner",html:'<!-- === Start: Banner Section === -->\n<table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" align="center" style="margin:0;padding:0;">\n  <tr>\n    <td align="center" style="margin:0;padding:0;">\n      <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="max-width:600px;margin:0 auto;background:#FFFFFF;">\n        <tr>\n          <td style="padding:0;">\n            <a href="{{bannerHref}}" target="_blank" style="display:block;text-decoration:none;">\n              <img src="{{bannerImage}}" alt="{{bannerAlt}}" style="display:block;width:100%;height:auto;border:0;outline:0;text-decoration:none;-ms-interpolation-mode:bicubic;" />\n            </a>\n          </td>\n        </tr>\n      </table>\n    </td>\n  </tr>\n</table>\n<!-- === End: Banner Section === -->'}];var X=n(2307),Q=n(1829),ee=n(570),et=n(7920),en=n(9575),er=n(305),ei=n(1641),el=n(8630),eo=n(9175),ea=n(9116);function normalizeImage(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(e||"").trim(),n=t.indexOf("?");n>=0&&(t=t.slice(0,n));let r=t.indexOf("#");r>=0&&(t=t.slice(0,r)),t=t.replace(/^https?:\/\//i,"");let i=t.split("/").filter(Boolean),l=i.length?i[i.length-1]:t;try{l=decodeURIComponent(l)}catch(e){}return l.toLowerCase()}function uniqueImages(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new Map;return e.forEach(e=>{let n=normalizeImage(e);n&&!t.has(n)&&t.set(n,e)}),Array.from(t.values())}let ImageSelector=e=>{let{images:t,selected:n,open:r,onSelect:o,onClose:a,anchorRect:d}=e,[s,c]=(0,l.useState)(null!=d?d:void 0);(0,l.useEffect)(()=>{if(!r)return;let getTarget=()=>{let e=document.querySelector(".right-panel");if(e)return e;let t=document.querySelector("main");return t},updateRect=()=>{let e=getTarget();e?c(e.getBoundingClientRect()):d&&c(d)};updateRect(),window.addEventListener("resize",updateRect);let e=getTarget();null==e||e.addEventListener("scroll",updateRect,{passive:!0}),document.addEventListener("scroll",updateRect,{passive:!0});let t=null;if("undefined"!=typeof ResizeObserver){t=new ResizeObserver(()=>updateRect());let e=getTarget();e&&t.observe(e)}return()=>{window.removeEventListener("resize",updateRect),null==e||e.removeEventListener("scroll",updateRect),document.removeEventListener("scroll",updateRect),null==t||t.disconnect()}},[r,d]);let p=uniqueImages(t),u=s?{left:s.left,top:s.top,width:s.width,height:s.height,zIndex:1200,backgroundColor:"rgba(0,0,0,0.6)",position:"fixed"}:{};return(0,i.jsx)(ea.Z,{open:r,sx:u,onClick:a,children:(0,i.jsxs)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",background:"#fff",borderRadius:6,minWidth:320,maxWidth:580,width:"100%",boxShadow:"0 8px 32px rgba(0,0,0,0.18)"},onClick:e=>e.stopPropagation(),children:[(0,i.jsx)(j.Z,{sx:{bgcolor:"#F9FAFB",borderRadius:1},children:"Select Product Image"}),(0,i.jsx)(w.Z,{dividers:!0,children:(0,i.jsx)(U.Z,{cols:6,gap:6,sx:{m:.5},children:p.map(e=>{let t=e===n;return(0,i.jsx)(_.Z,{sx:{cursor:"pointer",overflow:"hidden",borderRadius:1,border:t?"2px solid var(--color-primary)":"2px solid #e0e0e0",transition:"opacity .15s ease, border-color .15s ease, box-shadow .15s ease","& img":{transition:"transform .4s ease"},"&:hover":{opacity:1,borderColor:"var(--color-primary)",boxShadow:"0 0 0 1px rgba(0,0,0,0.02)"},"&:hover img":{transform:"scale(1.075)"}},children:(0,i.jsx)("img",{src:e,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"},onClick:()=>o(e)})},e)})})}),(0,i.jsx)(S.Z,{children:(0,i.jsx)(M.Z,{onClick:a,variant:"outlined",children:"Close"})})]})})};function FloatingToolbar(e){let{anchorRect:t,onFormat:n}=e;if(!t)return null;let r={position:"fixed",top:t.top-44>0?t.top-44:t.bottom+8,left:t.left+t.width/2-90,zIndex:9999,background:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.12)",borderRadius:8,padding:4,display:"flex",gap:2,minWidth:180,alignItems:"center"};return(0,i.jsxs)(R.Z,{elevation:3,style:r,children:[(0,i.jsx)(P.Z,{title:"Font Size",children:(0,i.jsx)(p.Z,{size:"small",onMouseDown:e=>{e.preventDefault(),n("fontSize")},children:(0,i.jsx)(er.Z,{fontSize:"small"})})}),(0,i.jsx)(P.Z,{title:"Text Color",children:(0,i.jsx)(p.Z,{size:"small",onMouseDown:e=>{e.preventDefault(),n("foreColor")},children:(0,i.jsx)(en.Z,{fontSize:"small"})})}),(0,i.jsx)(P.Z,{title:"Bold",children:(0,i.jsx)(p.Z,{size:"small",onMouseDown:e=>{e.preventDefault(),n("bold")},children:(0,i.jsx)(ee.Z,{fontSize:"small"})})}),(0,i.jsx)(P.Z,{title:"Italic",children:(0,i.jsx)(p.Z,{size:"small",onMouseDown:e=>{e.preventDefault(),n("italic")},children:(0,i.jsx)(et.Z,{fontSize:"small"})})}),(0,i.jsx)(P.Z,{title:"Bullet List",children:(0,i.jsx)(p.Z,{size:"small",onMouseDown:e=>{e.preventDefault(),n("insertUnorderedList")},children:(0,i.jsx)(ei.Z,{fontSize:"small"})})}),(0,i.jsx)(P.Z,{title:"Numbered List",children:(0,i.jsx)(p.Z,{size:"small",onMouseDown:e=>{e.preventDefault(),n("insertOrderedList")},children:(0,i.jsx)(el.Z,{fontSize:"small"})})}),(0,i.jsx)(P.Z,{title:"Link",children:(0,i.jsx)(p.Z,{size:"small",onMouseDown:e=>{e.preventDefault(),n("createLink")},children:(0,i.jsx)(eo.Z,{fontSize:"small"})})})]})}var components_ProductTableModule=function(e){var t;let[n,r]=l.useState(null),[o,a]=l.useState(!1),d=l.useRef(null);l.useEffect(()=>{function handleMouseDown(e){let t=e.target,n=null==t?void 0:t.closest('table[role="presentation"]'),i=n?null==t?void 0:t.closest("h2, .sale-price, p, .cta-label"):null,l=!!(null==t?void 0:t.closest(".MuiPaper-root"));i?(d.current=i,a(!0),r(i.getBoundingClientRect())):l||(a(!1),d.current=null)}return document.addEventListener("mousedown",handleMouseDown),()=>document.removeEventListener("mousedown",handleMouseDown)},[]),l.useEffect(()=>{function handleSelection(){if(!o||!d.current)return;let e=window.getSelection();if(!e||!e.rangeCount)return;let t=e.getRangeAt(0),n=t.startContainer instanceof Element?t.startContainer:t.startContainer.parentElement;if(n&&d.current.contains(n)){let e=t.getBoundingClientRect();e&&(e.width||e.height)?r(e):r(d.current.getBoundingClientRect())}}return document.addEventListener("selectionchange",handleSelection),()=>document.removeEventListener("selectionchange",handleSelection)},[o]),l.useEffect(()=>{function updatePos(){d.current&&o&&r(d.current.getBoundingClientRect())}return window.addEventListener("resize",updatePos),document.addEventListener("scroll",updatePos,{passive:!0}),()=>{window.removeEventListener("resize",updatePos),document.removeEventListener("scroll",updatePos)}},[o]),l.useEffect(()=>{function handleFocusOut(e){let t=e.relatedTarget||document.activeElement,n=!!(null==t?void 0:t.closest(".MuiPaper-root")),r=null==t?void 0:t.closest('table[role="presentation"]'),i=!!(r&&(null==t?void 0:t.closest("h2, .sale-price, p, .cta-label")));n||i||(a(!1),d.current=null)}return document.addEventListener("focusout",handleFocusOut),()=>document.removeEventListener("focusout",handleFocusOut)},[]),l.useEffect(()=>{function handleFocusIn(e){let t=e.target,n=null==t?void 0:t.closest('table[role="presentation"]'),i=n?null==t?void 0:t.closest("h2, .sale-price, p, .cta-label"):null;i&&(d.current=i,a(!0),r(i.getBoundingClientRect()))}return document.addEventListener("focusin",handleFocusIn),()=>document.removeEventListener("focusin",handleFocusIn)},[]);let s=o?(0,i.jsx)(FloatingToolbar,{anchorRect:n,onFormat:function(e){if("bold"===e&&document.execCommand("bold"),"italic"===e&&document.execCommand("italic"),"fontSize"===e&&document.execCommand("fontSize",!1,"4"),"foreColor"===e&&document.execCommand("foreColor",!1,"#e91e63"),"insertUnorderedList"===e&&document.execCommand("insertUnorderedList"),"insertOrderedList"===e&&document.execCommand("insertOrderedList"),"createLink"===e){let e=window.prompt("Enter the URL");e&&document.execCommand("createLink",!1,e)}}}):null,{product:c,index:p,orientation:u,updateProduct:m,ctaBg:g,brandName:h,descSource:x,onChangeDescSource:f,...b}=e;function renderSanitizedHtml(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e?{__html:e}:{__html:t}}let renderCopy=()=>(0,i.jsxs)("td",{className:"stack-cols",width:"50%",valign:"top",style:{padding:"0 8px"},children:[(0,i.jsx)("h2",{style:{margin:"0 0 10px 0",fontFamily:"'Montserrat',Arial,Helvetica,sans-serif",fontSize:"26px",lineHeight:"1.2",color:"#111111",fontWeight:300,whiteSpace:"pre-wrap",transition:"opacity 0.2s ease-in-out"},contentEditable:!0,tabIndex:0,suppressContentEditableWarning:!0,onBlur:e=>{let t=e.currentTarget.innerText.replace(/\n$/,"");m(p,"title",t)},onMouseEnter:e=>{e.currentTarget.style.opacity="0.5"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},dangerouslySetInnerHTML:renderSanitizedHtml(c.title,!0,"Product title")}),(0,i.jsxs)("p",{style:{margin:"0 0 10px 0",fontFamily:"'Montserrat',Arial,Helvetica,sans-serif",fontSize:"16px",lineHeight:"1",color:"#111111",fontWeight:600},children:[c.originalPrice&&(0,i.jsxs)("span",{style:{textDecoration:"line-through",marginRight:"8px",fontWeight:400},children:["$",c.originalPrice]}),(0,i.jsx)("span",{contentEditable:!0,tabIndex:0,suppressContentEditableWarning:!0,style:{transition:"opacity 0.2s ease-in-out"},onBlur:e=>{let t=e.currentTarget.innerText.replace(/\$/g,"").trim();m(p,"price",t)},onMouseEnter:e=>{e.currentTarget.style.opacity="0.5"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},dangerouslySetInnerHTML:renderSanitizedHtml(c.price?"$".concat(c.price):"",!0,"Price")})]}),(0,i.jsxs)("div",{style:{position:"relative",overflow:"hidden"},onMouseEnter:e=>{let t=e.currentTarget.querySelector("p"),n=e.currentTarget.querySelector(".edit-desc-icon");t&&(t.style.opacity="0.5"),n&&(n.style.transform="translateY(-38px)")},onMouseLeave:e=>{let t=e.currentTarget.querySelector("p"),n=e.currentTarget.querySelector(".edit-desc-icon");t&&(t.style.opacity="1"),n&&(n.style.transform="translateY(0)")},children:[(()=>{let e=c.description||"",t=/<\s*(ul|ol)(\s|>)/i.test(e);return(0,i.jsx)("p",{style:{margin:"0 0 16px 0",fontFamily:"'Montserrat',Arial,Helvetica,sans-serif",fontSize:"14px",lineHeight:"1.6",color:"#333333",whiteSpace:t?"normal":"pre-wrap",transition:"opacity 0.2s ease-in-out"},contentEditable:!0,tabIndex:0,suppressContentEditableWarning:!0,onBlur:e=>{let t=e.currentTarget.innerText.replace(/\n$/,"");m(p,"description",t)},onMouseEnter:e=>{e.currentTarget.style.opacity="0.5"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},dangerouslySetInnerHTML:renderSanitizedHtml(c.description||"",!1,"Description")})})(),(0,i.jsx)("div",{className:"edit-desc-icon",onClick:e=>{e.stopPropagation(),F(!0)},style:{position:"absolute",bottom:-30,right:8,backgroundColor:"rgba(0,0,0,0.5)",color:"#ffffff",borderRadius:"50%",padding:4,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transform:"translateY(0)",transition:"transform 0.3s ease-in-out"},"aria-label":"Change description source",title:"Change description source",children:(0,i.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor",children:(0,i.jsx)("path",{d:"M3 17.25V21h3.75l11.06-11.06-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a1 1 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})})]}),(0,i.jsx)("table",{role:"presentation",width:"100%",cellPadding:0,cellSpacing:0,border:0,style:{margin:0,padding:0},children:(0,i.jsx)("tbody",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{align:"left",valign:"middle",style:{padding:0,whiteSpace:"nowrap"},children:(0,i.jsx)("table",{role:"presentation",cellPadding:0,cellSpacing:0,border:0,style:{margin:0,padding:0},children:(0,i.jsx)("tbody",{children:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{align:"center",style:{background:g},children:(0,i.jsx)("a",{href:c.cta||c.url,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"12px 22px",fontFamily:"'Montserrat',Arial,Helvetica,sans-serif",fontSize:"14px",lineHeight:"14px",color:"#ffffff",textDecoration:"none",transition:"opacity 0.2s ease-in-out"},contentEditable:!0,className:"cta-label",tabIndex:0,suppressContentEditableWarning:!0,onBlur:e=>{let t=e.currentTarget.innerHTML.trim();m(p,"ctaLabel",t||"SHOP NOW")},onMouseEnter:e=>{e.currentTarget.style.opacity="0.5"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},dangerouslySetInnerHTML:{__html:c.ctaLabel||"SHOP NOW"}})})})})})}),(0,i.jsx)("td",{width:"12",style:{fontSize:0,lineHeight:0},children:"\xa0"})]})})})]}),[y,C]=l.useState(!1),Z=Array.isArray(null==c?void 0:c.images)&&((null===(t=c.images)||void 0===t?void 0:t.length)||0)>0,openImageSelector=()=>{Z&&C(!0)},renderImage=()=>(0,i.jsx)("td",{className:"stack-cols",width:"50%",valign:"top",style:{padding:"0 8px"},children:(0,i.jsxs)("div",{className:"product-image-wrapper".concat(Z?" selectable":""),style:{position:"relative",cursor:Z?"pointer":"default",overflow:"hidden"},onClick:openImageSelector,onMouseEnter:e=>{let t=e.currentTarget.querySelector("img"),n=e.currentTarget.querySelector(".edit-icon");t&&(t.style.opacity="0.7"),n&&(n.style.transform="translateY(-38px)")},onMouseLeave:e=>{let t=e.currentTarget.querySelector("img"),n=e.currentTarget.querySelector(".edit-icon");t&&(t.style.opacity="1"),n&&(n.style.transform="translateY(0)")},children:[(0,i.jsx)("img",{src:c.image,alt:c.title||h||"",style:{display:"block",width:"100%",height:"auto",outline:0,textDecoration:"none",transition:"opacity 0.2s ease-in-out"}}),Z&&(0,i.jsx)("div",{className:"edit-icon",onClick:e=>{e.stopPropagation(),openImageSelector()},style:{position:"absolute",bottom:-30,right:8,backgroundColor:"rgba(0,0,0,0.5)",color:"#ffffff",borderRadius:"50%",padding:4,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transform:"translateY(0)",transition:"transform 0.3s ease-in-out"},"aria-label":"Select product image",title:"Select product image",children:(0,i.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor",children:(0,i.jsx)("path",{d:"M14.69 3.1l6.2 6.2c.27.27.27.7 0 .97l-8.2 8.2c-.17.17-.39.26-.62.26H6.5c-.55 0-1-.45-1-1v-5.57c0-.23.09-.45.26-.62l8.2-8.2c.27-.27.7-.27.97 0zM5 20h14v2H5v-2z"})})})]})}),[k,F]=l.useState(!1),[I,E]=l.useState(x||"metadata");return(0,i.jsxs)(i.Fragment,{children:[s,(0,i.jsx)("table",{role:"presentation",width:"100%",cellPadding:0,cellSpacing:0,border:0,align:"center",style:{margin:"0",padding:"0"},children:(0,i.jsx)("tbody",{children:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{align:"center",style:{margin:0,padding:0},children:(0,i.jsx)("table",{role:"presentation",width:"100%",cellPadding:0,cellSpacing:0,border:0,style:{maxWidth:"600px",margin:"0 auto",background:"#FFFFFF"},children:(0,i.jsx)("tbody",{children:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{style:{padding:"24px 16px"},children:(0,i.jsx)("table",{role:"presentation",width:"100%",cellPadding:0,cellSpacing:0,border:0,style:{width:"100%",margin:0,padding:0},children:(0,i.jsx)("tbody",{children:(0,i.jsx)("tr",{children:"left-image"===u?(0,i.jsxs)(i.Fragment,{children:[renderImage(),renderCopy()]}):(0,i.jsxs)(i.Fragment,{children:[renderCopy(),renderImage()]})})})})})})})})})})})}),(0,i.jsxs)(v.Z,{open:k,onClose:()=>F(!1),children:[(0,i.jsx)(j.Z,{children:"Choose description source"}),(0,i.jsx)(w.Z,{children:(0,i.jsxs)(X.Z,{value:I,onChange:e=>E(e.target.value),children:[(0,i.jsx)(T.Z,{value:"metadata",control:(0,i.jsx)(Q.Z,{}),label:"Page metadata"}),(0,i.jsx)(T.Z,{value:"p",control:(0,i.jsx)(Q.Z,{}),label:"First paragraph"}),(0,i.jsx)(T.Z,{value:"ul",control:(0,i.jsx)(Q.Z,{}),label:"Bullet list"})]})}),(0,i.jsxs)(S.Z,{children:[(0,i.jsx)(M.Z,{onClick:()=>F(!1),children:"Cancel"}),(0,i.jsx)(M.Z,{variant:"contained",onClick:()=>{f&&f(I),F(!1)},children:"Apply"})]})]}),(0,i.jsx)(ImageSelector,{images:c.images||[],selected:c.image,open:y,onSelect:e=>{m(p,"image",e),C(!1)},onClose:()=>C(!1)})]})},ed=n(5152),es=n.n(ed);let ec=es()(()=>Promise.all([n.e(911),n.e(509),n.e(497),n.e(105)]).then(n.bind(n,6105)),{loadableGenerated:{webpack:()=>[6105]},ssr:!1});function RichTextField(e){let{label:t,value:n,onChange:r,placeholder:l,minHeight:o=80}=e;return(0,i.jsxs)(m.Z,{children:[t?(0,i.jsx)(c.Z,{variant:"subtitle2",sx:{color:"text.secondary",mb:.5},children:t}):null,(0,i.jsx)(R.Z,{variant:"outlined",sx:{p:1,borderRadius:1},children:(0,i.jsx)(ec,{label:void 0,value:n,onChange:r,placeholder:l,minHeight:o})})]})}var ep=l.memo(e=>{let{heroImage:t,heroAlt:n,heroHref:r,heroImages:o,updateHero:a,templateId:d,onActivate:s,wrapperPadding:c}=e,[p,u]=(0,l.useState)(!1),[m,g]=(0,l.useState)(null),h=uniqueImages(o);(0,l.useEffect)(()=>{if(!p)return;let getTarget=()=>{let e=document.querySelector(".right-panel");if(e)return e;let t=document.querySelector("main");return t},updateRect=()=>{let e=getTarget();e&&g(e.getBoundingClientRect())};updateRect(),window.addEventListener("resize",updateRect);let e=getTarget();null==e||e.addEventListener("scroll",updateRect,{passive:!0}),document.addEventListener("scroll",updateRect,{passive:!0});let t=null;if("undefined"!=typeof ResizeObserver){t=new ResizeObserver(()=>updateRect());let e=getTarget();e&&t.observe(e)}return()=>{window.removeEventListener("resize",updateRect),null==e||e.removeEventListener("scroll",updateRect),document.removeEventListener("scroll",updateRect),null==t||t.disconnect()}},[p]);let openSelector=()=>{h.length>0&&u(!0)},closeSelector=()=>{u(!1)},handleSelect=e=>{a("image",e),u(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("table",{role:"presentation",width:"100%",cellPadding:0,cellSpacing:0,border:0,align:"center",style:{margin:"0",padding:0},onClick:s,children:(0,i.jsx)("tbody",{children:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{align:"center",style:{margin:0,padding:0},children:(0,i.jsx)("table",{role:"presentation",width:"100%",cellPadding:0,cellSpacing:0,border:0,style:{maxWidth:"600px",margin:"0 auto",padding:c?"".concat(c.top,"px ").concat(c.right,"px ").concat(c.bottom,"px ").concat(c.left,"px"):"hero-margins"===d?"0 25px":"0",background:"#FFFFFF"},children:(0,i.jsx)("tbody",{children:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{style:{padding:0},children:(0,i.jsxs)("div",{className:"hero-image-wrapper".concat(h.length>0?" selectable":""),style:{position:"relative",cursor:h.length>0?"pointer":"default",overflow:"hidden"},onClick:()=>{h.length>0&&openSelector()},onMouseEnter:e=>{let t=e.currentTarget.querySelector("img"),n=e.currentTarget.querySelector(".edit-icon");t&&(t.style.opacity="0.7"),n&&(n.style.transform="translateY(-38px)")},onMouseLeave:e=>{let t=e.currentTarget.querySelector("img"),n=e.currentTarget.querySelector(".edit-icon");t&&(t.style.opacity="1"),n&&(n.style.transform="translateY(0)")},children:[(0,i.jsx)("img",{src:t||"",alt:n||"",style:{display:"block",width:"100%",height:"auto",border:0,outline:0,textDecoration:"none",transition:"opacity 0.2s ease-in-out"}}),o&&o.length>0&&(0,i.jsx)("div",{className:"edit-icon",onClick:e=>{e.stopPropagation(),null==s||s(),openSelector()},style:{position:"absolute",bottom:-30,right:8,backgroundColor:"rgba(0,0,0,0.5)",color:"#ffffff",borderRadius:"50%",padding:4,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transform:"translateY(0)",transition:"transform 0.3s ease-in-out"},"aria-label":"Select hero image",title:"Select hero image",children:(0,i.jsx)("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"currentColor",children:(0,i.jsx)("path",{d:"M14.69 3.1l6.2 6.2c.27.27.27.7 0 .97l-8.2 8.2c-.17.17-.39.26-.62.26H6.5c-.55 0-1-.45-1-1v-5.57c0-.23.09-.45.26-.62l8.2-8.2c.27-.27.7-.27.97 0zM5 20h14v2H5v-2z"})})})]})})})})})})})})}),p&&m&&(0,i.jsx)(ea.Z,{open:p,sx:{left:m.left,top:m.top,width:m.width,height:m.height,zIndex:1200,backgroundColor:"rgba(0,0,0,0.6)"},onClick:closeSelector,children:(0,i.jsxs)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",background:"#fff",borderRadius:6,minWidth:320,maxWidth:580,width:"100%",boxShadow:"0 8px 32px rgba(0,0,0,0.18)"},onClick:e=>e.stopPropagation(),children:[(0,i.jsx)(j.Z,{sx:{bgcolor:"#F9FAFB",borderRadius:1},children:"Select Hero Image"}),(0,i.jsx)(w.Z,{dividers:!0,children:(0,i.jsx)(U.Z,{cols:4,gap:6,sx:{mb:.5},children:h.map(e=>(0,i.jsx)(_.Z,{sx:{cursor:"pointer",overflow:"hidden",borderRadius:1,border:e===t?"2px solid var(--color-primary)":"2px solid #e0e0e0",transition:"opacity .15s ease, border-color .15s ease, box-shadow .15s ease","& img":{transition:"transform .4s ease"},"&:hover":{opacity:1,borderColor:"var(--color-primary)",boxShadow:"0 0 0 1px rgba(0,0,0,0.02)"},"&:hover img":{transform:"scale(1.075)"}},children:(0,i.jsx)("img",{src:e,alt:"",style:{width:"100%",height:"100%",objectFit:"cover"},onClick:()=>handleSelect(e)})},e))})}),(0,i.jsx)(S.Z,{children:(0,i.jsx)(M.Z,{onClick:closeSelector,variant:"outlined",children:"Close"})})]})})]})}),eu=n(24);let em=new Map,eg=new Map,eh=l.memo(e=>{var t,n,r,o;let{label:a="Padding",value:d,onChange:s,persistKey:c}=e,u=l.useMemo(()=>c&&em.get(c)||{v:!0,h:!0},[c]),[m,g]=l.useState(u.v),[h,x]=l.useState(u.h),[f,y]=l.useState(d);l.useEffect(()=>{(d.top!==f.top||d.right!==f.right||d.bottom!==f.bottom||d.left!==f.left)&&y(d)},[d.top,d.right,d.bottom,d.left]);let updateAndSync=(e,t)=>{let n={...f,[e]:t};"top"===e&&m&&(n.bottom=t),"bottom"===e&&m&&(n.top=t),"left"===e&&h&&(n.right=t),"right"===e&&h&&(n.left=t),y(n),s(n)},v=l.useRef(null),j=l.useRef(null),w=l.useRef(null),S=l.useRef(null);l.useLayoutEffect(()=>{if(!c)return;let e=eg.get(c);if(!e)return;let t={top:v,bottom:j,left:w,right:S}[e.field],n=t.current;n&&requestAnimationFrame(()=>{try{if(n.focus({preventScroll:!0}),"number"==typeof e.selStart&&"number"==typeof e.selEnd)n.setSelectionRange(e.selStart,e.selEnd);else{var t,r;let e=null!==(r=null===(t=n.value)||void 0===t?void 0:t.length)&&void 0!==r?r:0;n.setSelectionRange(e,e)}}catch(e){}})},[c]);let handleFocusRecord=e=>t=>{if(!c)return;let n=t.currentTarget;try{var r,i;eg.set(c,{field:e,selStart:null!==(r=n.selectionStart)&&void 0!==r?r:void 0,selEnd:null!==(i=n.selectionEnd)&&void 0!==i?i:void 0})}catch(t){eg.set(c,{field:e})}},handleSelectRecord=e=>t=>{var n,r;if(!c)return;let i=t.currentTarget;eg.set(c,{field:e,selStart:null!==(n=i.selectionStart)&&void 0!==n?n:void 0,selEnd:null!==(r=i.selectionEnd)&&void 0!==r?r:void 0})};return(0,i.jsxs)("div",{style:{marginTop:"1rem"},children:[(0,i.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:(0,i.jsx)("span",{style:{fontWeight:600},children:a})}),(0,i.jsxs)(b.Z,{direction:"row",spacing:1,alignItems:"center",flexWrap:"nowrap",children:[(0,i.jsx)(z.Z,{style:{marginLeft:0,marginRight:0},label:"Top",type:"number",size:"small",sx:{width:100},value:null!==(t=f.top)&&void 0!==t?t:0,onChange:e=>updateAndSync("top",Number(e.target.value)),inputProps:{min:0},inputRef:v,onFocus:handleFocusRecord("top"),onSelect:handleSelectRecord("top")}),(0,i.jsx)(p.Z,{style:{marginLeft:0,marginRight:0},"aria-label":m?"Unlink top/bottom":"Link top/bottom",onClick:()=>{let e=!m;if(g(e),c&&em.set(c,{v:e,h:h}),e){let e={...f,bottom:f.top};y(e),s(e)}},size:"small",children:m?(0,i.jsx)(eo.Z,{fontSize:"small"}):(0,i.jsx)(eu.Z,{fontSize:"small"})}),(0,i.jsx)(z.Z,{style:{marginLeft:0,marginRight:0},label:"Bottom",type:"number",size:"small",sx:{width:100},value:null!==(n=f.bottom)&&void 0!==n?n:0,onChange:e=>updateAndSync("bottom",Number(e.target.value)),inputProps:{min:0},inputRef:j,onFocus:handleFocusRecord("bottom"),onSelect:handleSelectRecord("bottom")}),(0,i.jsx)("div",{style:{width:12}}),(0,i.jsx)(z.Z,{style:{marginLeft:0,marginRight:0},label:"Left",type:"number",size:"small",sx:{width:100},value:null!==(r=f.left)&&void 0!==r?r:0,onChange:e=>updateAndSync("left",Number(e.target.value)),inputProps:{min:0},inputRef:w,onFocus:handleFocusRecord("left"),onSelect:handleSelectRecord("left")}),(0,i.jsx)(p.Z,{style:{marginLeft:0,marginRight:0},"aria-label":h?"Unlink left/right":"Link left/right",onClick:()=>{let e=!h;if(x(e),c&&em.set(c,{v:m,h:e}),e){let e={...f,right:f.left};y(e),s(e)}},size:"small",children:h?(0,i.jsx)(eo.Z,{fontSize:"small"}):(0,i.jsx)(eu.Z,{fontSize:"small"})}),(0,i.jsx)(z.Z,{style:{marginLeft:0,marginRight:0},label:"Right",type:"number",size:"small",sx:{width:100},value:null!==(o=f.right)&&void 0!==o?o:0,onChange:e=>updateAndSync("right",Number(e.target.value)),inputProps:{min:0},inputRef:S,onFocus:handleFocusRecord("right"),onSelect:handleSelectRecord("right")})]})]})},(e,t)=>e.label===t.label&&e.persistKey===t.persistKey&&e.onChange===t.onChange),ex=["strong","em","ul","ol","li","a","p","br"],ef={a:["href","title"]};function sanitizeEmailHtml(e,t){var n;if(!e)return"";if("undefined"==typeof document)return e;let r=(null==t?void 0:t.allowedTags)&&t.allowedTags.length>0?t.allowedTags.map(e=>e.toLowerCase()):ex,i=null!==(n=null==t?void 0:t.allowedAttrs)&&void 0!==n?n:ef,l=document.createElement("div");l.innerHTML=e;let walk=e=>{let t=Array.from(e.childNodes);for(let n of t)if(n.nodeType===Node.ELEMENT_NODE){let t=n.tagName.toLowerCase();if(!r.includes(t)){let t=Array.from(n.childNodes);for(let r of t)e.insertBefore(r,n);e.removeChild(n);continue}let l=new Set((i[t]||[]).map(e=>e.toLowerCase())),o=Array.from(n.attributes);for(let e of o){let t=e.name.toLowerCase();l.has(t)||n.removeAttribute(e.name)}if("a"===t){let e=n.getAttribute("href")||"";!function(e){try{let t=(e||"").trim();if(!t)return!1;let n=t.toLowerCase();if(n.startsWith("http://")||n.startsWith("https://")||n.startsWith("mailto:")||n.startsWith("tel:"))return!0;return!1}catch(e){return!1}}(e)?n.removeAttribute("href"):n.setAttribute("rel","noopener noreferrer nofollow")}walk(n)}else n.nodeType===Node.COMMENT_NODE&&e.removeChild(n)};return walk(l),l.innerHTML.trim()}function sanitizeInlineHtml(e){return sanitizeEmailHtml(e,{allowedTags:["strong","em","a","br"],allowedAttrs:{a:["href","title"]}})}function normalizeListHtml(e){if(!e)return"";if("undefined"==typeof document)return e;let t=document.createElement("div");t.innerHTML=e;let n=Array.from(t.querySelectorAll("ul, ol"));for(let e of n){let t=Array.from(e.querySelectorAll("li"));for(let e of t){let t=Array.from(e.children);if(1===t.length&&"p"===t[0].tagName.toLowerCase()){let n=t[0];for(;n.firstChild;)e.insertBefore(n.firstChild,n);e.removeChild(n)}let n=Array.from(e.querySelectorAll("p"));for(let e of n)e.style.marginTop="0",e.style.marginBottom="0";e.style.marginTop="0",e.style.marginBottom="0",e.style.padding=e.style.padding||"0",e.style.whiteSpace="normal"}}return t.innerHTML.trim()}var eb=n(2186),ey=n(9117),ev=n(6541),ej=n(4545),ew=n(567),eS=n(7157),eC=n(6866),eZ=n(1959),ek=n(5375),eF=n(2478),eT=n(382),eI=n(887),eE=n(5587),eB=n(2339),ez=n(4285),eM=n(6293),shared_HtmlThumbnail=e=>{let{html:t,width:n=320,height:r=0,forceAutoHeight:o=!1}=e,a=(0,l.useRef)(null),[d,s]=(0,l.useState)(null),[c,p]=(0,l.useState)(!0),[u,m]=(0,l.useState)(void 0),[g,h]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let convert=()=>{if(a.current){let e=a.current.offsetHeight;console.log("[HtmlThumbnail] Detected template height:",e),m(e),(0,eM.YM)(a.current,{width:n,height:e,cacheBust:!0,skipFonts:!0,backgroundColor:"#fff"}).then(e=>{s(e),p(!1),h(null),o&&m(void 0)}).catch(e=>{s(null),h("Failed to generate image: "+((null==e?void 0:e.message)||"Unknown error")),console.error("[HtmlThumbnail] Error generating image:",e)})}};if("complete"!==document.readyState)return window.addEventListener("load",convert),()=>window.removeEventListener("load",convert);convert()},[t,n,r,o]),(0,i.jsxs)("div",{style:{width:"100%",height:o?"auto":null!=u?u:"auto",position:"relative",overflow:"hidden",margin:0,background:"#fff"},children:[c&&(0,i.jsx)("div",{ref:a,style:{position:"absolute",left:"0px",top:0,width:n,pointerEvents:"none",zIndex:-1},dangerouslySetInnerHTML:{__html:t}}),d&&(0,i.jsx)("img",{src:d||void 0,alt:"HTML Thumbnail",style:{width:"100%",height:o?"auto":null!=u?u:"auto",objectFit:"contain",borderRadius:0,margin:0}}),g&&(0,i.jsx)("div",{style:{color:"red",fontSize:14,marginTop:8},children:g})]})};function _templateObject(){let e=(0,r._)(["\n    clip: rect(0 0 0 0);\n    clip-path: inset(50%);\n    height: 1px;\n    overflow: hidden;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    white-space: nowrap;\n    width: 1px;\n  "]);return _templateObject=function(){return e},e}let eL={"product-image-left-copy-right":"product-copy-left-image-right","product-copy-left-image-right":"product-image-left-copy-right"};function Home(){var e,t,r,o,d,s,u,g,h,X,Q,ea,ed,es;let ec=(0,O.ZP)("input")(_templateObject()),eu=(0,l.useRef)(!1),[em,eg]=(0,l.useState)(null),[ex,ef]=(0,l.useState)("body-1"),[eM,eA]=(0,l.useState)(!0),handleAccordionToggle=e=>{ef(t=>t===e?"":e)},[eH,eR]=(0,l.useState)("preview"),[eP,eN]=(0,l.useState)([]),[eW,eD]=(0,l.useState)({}),eO=(0,l.useCallback)(e=>{let t=eW[e];if(t)return t;let n=eP.find(t=>t.id===e);return n?n.urls:[]},[eW,eP]),[eU,e_]=(0,l.useState)(!0),[eq,eG]=(0,l.useState)(!0),[eJ,eY]=(0,l.useState)(!0),[eK,eV]=(0,l.useState)(!0),[e$,eX]=(0,l.useState)(["hero",...eP.map(e=>"body-".concat(e.id)),"banner"]);(0,l.useEffect)(()=>{eX(e=>{let t=e.filter(e=>("hero"!==e||!!eq)&&("banner"!==e||!!eJ)&&(!e.startsWith("body-")||eP.some(t=>"body-".concat(t.id)===e))),n=[...eq?["hero"]:[],...eP.map(e=>"body-".concat(e.id)),...eJ?["banner"]:[]];return n.forEach(e=>{t.includes(e)||(e.startsWith("body-")&&t.includes("banner")?t.splice(t.indexOf("banner"),0,e):t.push(e))}),t})},[eP,eq,eJ]);let eQ=(0,eI.Dy)((0,eI.VT)(eI.we)),e0=l.memo(e=>{let{sectionId:t,urls:n,onUrlChange:r,onAddField:o,onRemoveField:a,addNotification:d}=e,[s,u]=(0,l.useState)(()=>n.length>0?n:[""]),g=(0,l.useRef)([]);(0,l.useEffect)(()=>{let e=n.length!==g.current.length||n.some((e,t)=>e!==g.current[t]);e&&(u(n.length>0?n:[""]),g.current=[...n])},[n]);let isValidUrl=e=>{try{let t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(e){return!1}},updateLocalValue=(e,t)=>{u(n=>{let r=[...n];return r[e]=t,r})},syncToParent=e=>{let n=sanitizeUrl(s[e]||"");n&&!isValidUrl(n)&&d((0,i.jsxs)("span",{children:["Invalid product URL: ",(0,i.jsx)("span",{style:{fontWeight:"bold"},children:n}),"\xa0|\xa0Please enter a valid http(s) link."]})),r(t,e,n)};return(0,i.jsxs)("div",{style:{width:"100%",paddingRight:"0px"},children:[(0,i.jsx)(c.Z,{variant:"subtitle1",sx:{mb:1,mt:1,fontWeight:"600"},children:"Product URLs"}),s.map((e,n)=>(0,i.jsxs)(m.Z,{sx:{mb:2,position:"relative",width:"100%",overflow:"visible",pr:"44px"},children:[(0,i.jsx)(z.Z,{id:"url-".concat(t,"-").concat(n),type:"url",label:"Product URL ".concat(n+1),value:e,fullWidth:!0,onChange:e=>updateLocalValue(n,e.target.value),onBlur:()=>syncToParent(n),InputProps:{endAdornment:s.length>1?(0,i.jsx)(W.Z,{position:"end",children:(0,i.jsx)(p.Z,{onClick:()=>a(t,n),title:"Remove URL",edge:"end",children:(0,i.jsx)(ew.Z,{fontSize:"medium"})})}):null},inputProps:{onKeyDown:e=>{let r=e.currentTarget,i=r.value.trim();"Enter"===e.key?(e.preventDefault(),syncToParent(n),i&&n===s.length-1&&o(t,n+1),r.blur()):"Tab"!==e.key||e.shiftKey||n!==s.length-1||(e.preventDefault(),syncToParent(n),o(t,n+1))}},variant:"standard",sx:{"& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}}}),n===s.length-1&&(0,i.jsx)(p.Z,{onClick:()=>o(t,n+1),title:"Add URL",edge:"end",sx:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)"},children:(0,i.jsx)(ej.Z,{fontSize:"medium"})})]},n))]})}),e1=l.memo(e=>{let{section:t,isOpen:n}=e,{attributes:r,listeners:o,setNodeRef:a,transform:d,transition:s}=(0,eE.nB)({id:"body-".concat(t.id)}),{"aria-describedby":c,...u}=r,m={transform:ez.ux.Transform.toString(d),transition:s},g=(0,l.useCallback)(e=>nx(t.id,e),[t.id,nx]);return(0,i.jsxs)("div",{className:"accordion-section".concat(n?" open":""),ref:a,style:m,children:[(0,i.jsxs)("div",{className:"accordion-header".concat(n?" open":""),onClick:()=>handleAccordionToggle("body-".concat(t.id)),children:[(0,i.jsx)(p.Z,{size:"medium",...u,...o,onClick:e=>e.stopPropagation(),title:"Reorder section",children:(0,i.jsx)(eT.Z,{fontSize:"medium"})}),(0,i.jsx)("span",{children:t.name}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--gap-2)",marginLeft:"auto"},children:[(0,i.jsx)(p.Z,{size:"medium",onClick:e=>{e.stopPropagation(),removeBodySection(t.id)},title:"Remove section",children:(0,i.jsx)(eZ.Z,{fontSize:"medium"})}),(0,i.jsx)(p.Z,{size:"medium",onClick:e=>{e.stopPropagation(),handleAccordionToggle("body-".concat(t.id))},title:n?"Collapse section":"Expand section",children:n?(0,i.jsx)(ek.Z,{fontSize:"medium"}):(0,i.jsx)(eF.Z,{fontSize:"medium"})})]})]}),n&&(0,i.jsxs)("div",{className:"accordion-content",children:[(0,i.jsxs)("div",{className:"template-row",style:{display:"flex",gap:"var(--gap-2)",alignItems:"center",marginTop:"0.5rem"},children:[(0,i.jsxs)(y.Z,{fullWidth:!0,variant:"outlined",children:[(0,i.jsx)(I.Z,{id:"body-template-".concat(t.id),children:"Template"}),(0,i.jsx)(E.Z,{labelId:"body-template-".concat(t.id),id:"body-template-select-".concat(t.id),label:"Template",value:t.selectedBodyId,onChange:e=>setSectionTemplate(t.id,e.target.value),children:e5.map(e=>(0,i.jsx)(B.Z,{value:e.id,children:e.name},e.id))})]}),(0,i.jsx)(p.Z,{onClick:()=>e7(e=>!e),title:e9?"Close editor":"Edit template",children:(0,i.jsx)(eC.Z,{fontSize:"medium"})}),(0,i.jsx)(p.Z,{onClick:()=>tM(e=>!e),title:tz?"Cancel new template":"Add new template",children:(0,i.jsx)(ej.Z,{fontSize:"medium"})})]}),e9&&(0,i.jsxs)("div",{children:[(0,i.jsx)(z.Z,{id:"body-draft-html-".concat(t.id),label:"Template HTML",value:te,onChange:e=>tt(e.target.value),rows:8,fullWidth:!0,multiline:!0,variant:"standard",sx:{fontFamily:"monospace","& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}}}),(0,i.jsxs)("div",{className:"new-template-actions",style:{display:"flex",gap:"var(--gap-2)",marginTop:"0.5rem"},children:[(0,i.jsx)(p.Z,{onClick:()=>e7(!1),title:"Cancel edit",children:(0,i.jsx)(ew.Z,{fontSize:"medium"})}),(0,i.jsx)(p.Z,{onClick:()=>{saveBodyEdits(),e7(!1)},title:"Save edits",children:(0,i.jsx)(eS.Z,{fontSize:"medium"})})]})]}),tz&&(0,i.jsxs)("div",{className:"new-template-form",children:[(0,i.jsx)(z.Z,{id:"body-new-name-".concat(t.id),label:"Template name",type:"text",value:tn,onChange:e=>tr(e.target.value),fullWidth:!0,variant:"standard",sx:{mb:1,"& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}}}),(0,i.jsx)(z.Z,{id:"body-new-html-".concat(t.id),label:"Template HTML",value:ti,onChange:e=>tl(e.target.value),rows:6,fullWidth:!0,multiline:!0,variant:"standard",sx:{fontFamily:"monospace","& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}}}),(0,i.jsxs)("div",{className:"new-template-actions",style:{display:"flex",gap:"var(--gap-2)",marginTop:"0.5rem"},children:[(0,i.jsx)(p.Z,{onClick:()=>{tM(!1),tr(""),tl("")},title:"Cancel new template",children:(0,i.jsx)(ew.Z,{fontSize:"medium"})}),(0,i.jsx)(p.Z,{onClick:()=>{addNewBodyTemplate(),tM(!1)},title:"Save new template",children:(0,i.jsx)(eS.Z,{fontSize:"medium"})})]})]}),(0,i.jsx)(e0,{sectionId:t.id,urls:eO(t.id),onUrlChange:handleUrlChange,onAddField:addUrlField,onRemoveField:removeUrlField,addNotification:nO}),(0,i.jsx)("div",{style:{marginTop:"1rem",display:"flex",alignItems:"center",gap:"var(--gap-2)"},children:(0,i.jsx)(M.Z,{onClick:()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur(),setTimeout(()=>generateSection(t.id),0)},disabled:t.loading,children:t.loading?"Generating":"Update"})}),(0,i.jsx)(eh,{label:"Section padding (px)",value:getBodySectionPadding(t.id),onChange:g,persistKey:"body:".concat(t.id,":padding")})]})]})},(e,t)=>e.section===t.section&&e.isOpen===t.isOpen),e2=l.memo(e=>{let{isOpen:t}=e,{attributes:n,listeners:r,setNodeRef:l,transform:o,transition:a}=(0,eE.nB)({id:"hero"}),{"aria-describedby":d,...s}=n,c={transform:ez.ux.Transform.toString(o),transition:a};return(0,i.jsxs)("div",{className:"accordion-section".concat(t?" open":""),ref:l,style:c,children:[(0,i.jsxs)("div",{className:"accordion-header".concat(t?" open":""),onClick:()=>handleAccordionToggle("hero"),children:[(0,i.jsx)(p.Z,{size:"medium",...s,...r,onClick:e=>e.stopPropagation(),title:"Reorder section",children:(0,i.jsx)(eT.Z,{fontSize:"medium"})}),(0,i.jsx)("span",{children:"Hero"}),(0,i.jsxs)("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"var(--gap-2)"},children:[(0,i.jsx)(p.Z,{size:"medium",onClick:e=>{e.stopPropagation(),removeHeroSection()},title:"Remove section",children:(0,i.jsx)(eZ.Z,{fontSize:"medium"})}),(0,i.jsx)(p.Z,{size:"medium",onClick:e=>{e.stopPropagation(),handleAccordionToggle("hero")},title:t?"Collapse section":"Expand section",children:t?(0,i.jsx)(ek.Z,{fontSize:"medium"}):(0,i.jsx)(eF.Z,{fontSize:"medium"})})]})]}),t&&(0,i.jsxs)("div",{className:"accordion-content",children:[nX?(0,i.jsx)("div",{style:{marginBottom:"0.5rem"},children:(0,i.jsx)("img",{src:nX,alt:n0||"",style:{width:"100%",height:"auto",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:"6px",overflow:"hidden"}})}):(0,i.jsx)("p",{children:"No hero image selected."}),(0,i.jsxs)("div",{className:"template-row",style:{display:"flex",gap:"var(--gap-2)",alignItems:"center",marginTop:"1.5rem"},children:[(0,i.jsxs)(y.Z,{fullWidth:!0,variant:"outlined",children:[(0,i.jsx)(I.Z,{id:"hero-template-label",children:"Template"}),(0,i.jsx)(E.Z,{labelId:"hero-template-label",id:"hero-template-select",label:"Template",value:nV,onChange:e=>n$(e.target.value),children:nY.map(e=>(0,i.jsx)(B.Z,{value:e.id,children:e.name},e.id))})]}),(0,i.jsx)(p.Z,{onClick:()=>n8(e=>!e),title:n3?"Close editor":"Edit template",children:(0,i.jsx)(eC.Z,{fontSize:"medium"})}),(0,i.jsx)(p.Z,{onClick:()=>rl(e=>!e),title:ri?"Cancel new template":"Add new template",children:(0,i.jsx)(ej.Z,{fontSize:"medium"})})]}),n3&&(0,i.jsxs)("div",{children:[(0,i.jsx)(z.Z,{id:"hero-draft-html",label:"Template HTML",value:n9,onChange:e=>n7(e.target.value),rows:6,fullWidth:!0,multiline:!0,variant:"standard",sx:{fontFamily:"monospace","& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}}}),(0,i.jsxs)("div",{className:"new-template-actions",style:{display:"flex",gap:"var(--gap-2)",marginTop:"0.5rem"},children:[(0,i.jsx)(p.Z,{onClick:()=>n8(!1),title:"Cancel edit",children:(0,i.jsx)(ew.Z,{fontSize:"medium"})}),(0,i.jsx)(p.Z,{onClick:()=>{saveHeroEdits(),n8(!1)},title:"Save edits",children:(0,i.jsx)(eS.Z,{fontSize:"medium"})})]})]}),(0,i.jsx)(z.Z,{id:"hero-href",label:"Hero Link URL",defaultValue:n2,onBlur:e=>n6(sanitizeUrl(e.currentTarget.value)),fullWidth:!0,variant:"standard",sx:{mt:2,"& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}},inputProps:{onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.currentTarget.blur())}}}),(0,i.jsx)(z.Z,{id:"hero-alt",label:"Hero Alt Text",defaultValue:n0,onBlur:e=>n1(e.currentTarget.value),fullWidth:!0,variant:"standard",sx:{mt:2,"& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}},inputProps:{onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.currentTarget.blur())}}}),ri&&(0,i.jsxs)("div",{className:"new-template-form",children:[(0,i.jsx)(z.Z,{id:"hero-new-name",label:"Template name",type:"text",value:re,onChange:e=>rt(e.target.value),fullWidth:!0,variant:"standard",sx:{mb:1,"& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}}}),(0,i.jsx)(z.Z,{id:"hero-new-html",label:"Template HTML",value:rn,onChange:e=>rr(e.target.value),rows:6,fullWidth:!0,multiline:!0,variant:"standard",sx:{fontFamily:"monospace","& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}}}),(0,i.jsxs)("div",{className:"new-template-actions",style:{display:"flex",gap:"var(--gap-2)",marginTop:"0.5rem"},children:[(0,i.jsx)(p.Z,{onClick:()=>{rl(!1),rt(""),rr("")},title:"Cancel new template",children:(0,i.jsx)(ew.Z,{fontSize:"medium"})}),(0,i.jsx)(p.Z,{onClick:()=>{addNewHeroTemplate(),rl(!1)},title:"Save new template",children:(0,i.jsx)(eS.Z,{fontSize:"medium"})})]})]}),(0,i.jsx)(eh,{label:"Section padding (px)",value:no,onChange:ng,persistKey:"hero:padding"})]})]})}),e6=l.memo(e=>{let{isOpen:t}=e,{attributes:n,listeners:r,setNodeRef:l,transform:o,transition:a}=(0,eE.nB)({id:"banner"}),{"aria-describedby":d,...s}=n,c={transform:ez.ux.Transform.toString(o),transition:a};return(0,i.jsxs)("div",{className:"accordion-section".concat(t?" open":""),ref:l,style:c,children:[(0,i.jsxs)("div",{className:"accordion-header".concat(t?" open":""),onClick:()=>handleAccordionToggle("banner"),children:[(0,i.jsx)(p.Z,{size:"medium",...s,...r,onClick:e=>e.stopPropagation(),title:"Reorder section",children:(0,i.jsx)(eT.Z,{fontSize:"medium"})}),(0,i.jsx)("span",{children:"Banner"}),(0,i.jsxs)("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"var(--gap-2)"},children:[(0,i.jsx)(p.Z,{size:"medium",onClick:e=>{e.stopPropagation(),removeBannerSection()},title:"Remove section",children:(0,i.jsx)(eZ.Z,{fontSize:"medium"})}),(0,i.jsx)(p.Z,{size:"medium",onClick:e=>{e.stopPropagation(),handleAccordionToggle("banner")},title:t?"Collapse section":"Expand section",children:t?(0,i.jsx)(ek.Z,{fontSize:"medium"}):(0,i.jsx)(eF.Z,{fontSize:"medium"})})]})]}),t&&(0,i.jsxs)("div",{className:"accordion-content",children:[ru?(0,i.jsx)("div",{style:{marginBottom:"0.5rem"},children:(0,i.jsx)("img",{src:ru,alt:rg||"",style:{width:"100%",height:"auto",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:"6px",overflow:"hidden"}})}):(0,i.jsx)("p",{children:"No hero image selected."}),(0,i.jsxs)("div",{className:"template-row",style:{display:"flex",gap:"var(--gap-2)",alignItems:"center",marginTop:"1.5rem"},children:[(0,i.jsxs)(y.Z,{fullWidth:!0,variant:"outlined",children:[(0,i.jsx)(I.Z,{id:"banner-template-label",children:"Template"}),(0,i.jsx)(E.Z,{labelId:"banner-template-label",id:"banner-template-select",label:"Template",value:rc,onChange:e=>rp(e.target.value),children:rd.map(e=>(0,i.jsx)(B.Z,{value:e.id,children:e.name},e.id))})]}),(0,i.jsx)(p.Z,{onClick:()=>rj(e=>!e),title:rv?"Close editor":"Edit template",children:(0,i.jsx)(eC.Z,{fontSize:"medium"})}),(0,i.jsx)(p.Z,{onClick:()=>rI(e=>!e),title:rT?"Cancel new template":"Add new template",children:(0,i.jsx)(ej.Z,{fontSize:"medium"})})]}),rv&&(0,i.jsxs)("div",{children:[(0,i.jsx)(z.Z,{id:"banner-draft-html",label:"Template HTML",value:rw,onChange:e=>rS(e.target.value),rows:8,fullWidth:!0,multiline:!0,variant:"standard",sx:{fontFamily:"monospace","& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}}}),(0,i.jsxs)("div",{className:"new-template-actions",style:{display:"flex",gap:"var(--gap-2)",marginTop:"0.5rem"},children:[(0,i.jsx)(p.Z,{onClick:()=>rj(!1),title:"Cancel edit",children:(0,i.jsx)(ew.Z,{fontSize:"medium"})}),(0,i.jsx)(p.Z,{onClick:()=>{saveBannerEdits(),rj(!1)},title:"Save edits",children:(0,i.jsx)(eS.Z,{fontSize:"medium"})})]})]}),rT&&(0,i.jsxs)("div",{className:"new-template-form",children:[(0,i.jsx)(z.Z,{id:"banner-new-name",label:"Template name",type:"text",value:rC,onChange:e=>rZ(e.target.value),fullWidth:!0,variant:"standard",sx:{mb:1,"& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}}}),(0,i.jsx)(z.Z,{id:"banner-new-html",label:"Template HTML",value:rk,onChange:e=>rF(e.target.value),rows:6,fullWidth:!0,multiline:!0,variant:"standard",sx:{fontFamily:"monospace","& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}}}),(0,i.jsxs)("div",{className:"new-template-actions",style:{display:"flex",gap:"var(--gap-2)",marginTop:"0.5rem"},children:[(0,i.jsx)(p.Z,{onClick:()=>{rI(!1),rZ(""),rF("")},title:"Cancel new template",children:(0,i.jsx)(ew.Z,{fontSize:"medium"})}),(0,i.jsx)(p.Z,{onClick:()=>{addNewBannerTemplate(),rI(!1)},title:"Save new template",children:(0,i.jsx)(eS.Z,{fontSize:"medium"})})]})]}),(0,i.jsx)(z.Z,{id:"banner-href",label:"Banner Link URL",defaultValue:rx,onBlur:e=>rf(sanitizeUrl(e.currentTarget.value)),fullWidth:!0,variant:"standard",sx:{mt:2,"& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}},inputProps:{onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.currentTarget.blur())}}}),(0,i.jsx)(z.Z,{id:"banner-alt",label:"Banner Alt Text",defaultValue:rg,onBlur:e=>rh(e.currentTarget.value),fullWidth:!0,variant:"standard",sx:{mt:2,"& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}},inputProps:{onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.currentTarget.blur())}}}),(0,i.jsx)(eh,{label:"Section padding (px)",value:nd,onChange:nh,persistKey:"banner:padding"})]})]})}),[e5,e4]=(0,l.useState)(J),[e3,e8]=(0,l.useState)(J[0].id),[e9,e7]=(0,l.useState)(!1),[te,tt]=(0,l.useState)(""),[tn,tr]=(0,l.useState)(""),[ti,tl]=(0,l.useState)(""),[to,ta]=(0,l.useState)(Y),[td,ts]=(0,l.useState)(Y[0].id),[tc,tp]=(0,l.useState)(!1),[tu,tm]=(0,l.useState)(""),[tg,th]=(0,l.useState)(""),[tx,tf]=(0,l.useState)(""),[tb,ty]=(0,l.useState)(K),[tv,tj]=(0,l.useState)(K[0].id),[tw,tS]=(0,l.useState)(!1),[tC,tZ]=(0,l.useState)(""),[tk,tF]=(0,l.useState)(""),[tT,tI]=(0,l.useState)(""),[tE,tB]=(0,l.useState)(!1),[tz,tM]=(0,l.useState)(!1),[tL,tA]=(0,l.useState)(!1),[tH,tR]=(0,l.useState)(0),[tP,tN]=(0,l.useState)(""),[tW,tD]=(0,l.useState)(""),[tO,tU]=(0,l.useState)(""),[t_,tq]=(0,l.useState)(""),[tG,tJ]=(0,l.useState)(!1),tY=(0,l.useRef)(null),tK=(0,l.useRef)(null);(0,l.useEffect)(()=>{let handleClickOutside=e=>{tY.current&&!tY.current.contains(e.target)&&tJ(!1)};return tG&&document.addEventListener("mousedown",handleClickOutside),()=>{document.removeEventListener("mousedown",handleClickOutside)}},[tG]);let[tV,t$]=(0,l.useState)(!1),[tX,tQ]=(0,l.useState)(""),[t0,t1]=(0,l.useState)(-1),[t2,t6]=(0,l.useState)(-1),[t5,t4]=(0,l.useState)(!1),[t3,t8]=(0,l.useState)(""),[t9,t7]=(0,l.useState)("#d19aa0"),[ne,nt]=(0,l.useState)("#F0C3C7"),[nn,nr]=(0,l.useState)(""),[ni,nl]=(0,l.useState)({top:0,right:0,bottom:0,left:0}),[no,na]=(0,l.useState)({top:0,right:0,bottom:0,left:0}),[nd,ns]=(0,l.useState)({top:0,right:0,bottom:0,left:0}),[nc,np]=(0,l.useState)({top:0,right:0,bottom:0,left:0}),[nu,nm]=(0,l.useState)(new Map),ng=(0,l.useCallback)(e=>na(e),[]),nh=(0,l.useCallback)(e=>ns(e),[]),getBodySectionPadding=e=>nu.get(e)||{top:0,right:0,bottom:0,left:0},nx=(0,l.useCallback)((e,t)=>{nm(n=>new Map(n).set(e,t))},[]),[nf,nb]=(0,l.useState)(!0),[ny,nv]=(0,l.useState)("");(0,l.useEffect)(()=>{nn&&0===eP.length&&ny&&eN([{id:1,name:"Body 1",urls:[ny],products:[],selectedBodyId:J[0].id,loading:!1,descriptionSource:"metadata"}])},[nn,ny]);let nj=(0,l.useCallback)((e,t)=>{if(!e)return{title:"Summary"};let n=null;try{n=new URL(e)}catch(e){}let r=(null==n?void 0:n.pathname)||e;if(/\/products\//i.test(r)){var i;let e=(null==t?void 0:null===(i=t.product)||void 0===i?void 0:i.title)||"";return{title:"Product Page Detected!",subline:e?"Product Name: ".concat(e):void 0}}return/\/collections\//i.test(r)?{title:"Product Page Detected!",subline:"Collection Name: "}:{title:"Summary"}},[]),[nw,nS]=(0,l.useState)(null),[nC,nZ]=(0,l.useState)(!1),[nk,nF]=(0,l.useState)(!1),[nT,nI]=(0,l.useState)(null);(0,l.useEffect)(()=>{(null==nT?void 0:nT.product)&&nI(e=>{if(!e)return e;let t=e.product;return void 0===t.metadataDescription&&"string"==typeof t.description?{...e,product:{...t,metadataDescription:t.description}}:e})},[null==nT?void 0:nT.product]);let[nE,nB]=(0,l.useState)({includeLogo:!0,selectedHero:null,selectedBanner:null,includeColors:!0,selectedPrimary:null,selectedText:"black",includeFonts:!0,includeProduct:!0,includeAnnouncement:!0}),[nz,nM]=(0,l.useState)(""),[nL,nA]=(0,l.useState)("black"),[nH,nR]=(0,l.useState)(!1),[nP,nN]=(0,l.useState)(""),[nW,nD]=(0,l.useState)({}),toggleCodeSection=e=>{nD(t=>{let n=!1!==t[e];return{...t,[e]:!n}})},nO=(0,l.useCallback)(e=>{nN(e),nR(!0)},[]);(0,l.useEffect)(()=>{nn||nb(!0)},[nn]),(0,l.useEffect)(()=>{if(nw){let e=new FileReader;e.onload=e=>{var t;rM(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsDataURL(nw)}else rM("")},[nw]),(0,l.useEffect)(()=>{let e=tK.current;if(!e)return;let handleClick=e=>{let t=e.target,n=t.closest("a");if(n){e.preventDefault(),e.stopPropagation();let t=n.getAttribute("href");if(t){nO((0,i.jsxs)("span",{children:["External link: ",(0,i.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:t})]}));let e=n.closest("[data-section]"),r=null==e?void 0:e.getAttribute("data-section");r&&ef(r)}}};return e.addEventListener("click",handleClick),()=>{e.removeEventListener("click",handleClick)}},[eH,nO,ef]);let applyBrandColoursAndFont=e=>{let t=e;if(t9){let e=RegExp("#d19aa0","gi");t=t.replace(e,t9)}if(ne){let e=RegExp("#F0C3C7","gi");t=t.replace(e,ne)}if(t3&&t3.trim()){let e=RegExp("'Montserrat',Arial,Helvetica,sans-serif","gi");t=t.replace(e,t3)}return t},applyBrandLogo=e=>rz?e.replace(/<img([^>]+)src="[^">]*"/,'<img$1src="'.concat(rz,'"')):e,applyAnnouncementCopy=e=>{if(!nz||!e)return e;let t="<!-- Announcement Bar -->",n=e.indexOf(t);if(-1===n)return e;let r=e.slice(n+t.length),i=r.indexOf("<td");if(-1===i)return e;let l=r.indexOf(">",i);if(-1===l)return e;let o=r.indexOf("</td>",l+1);if(-1===o)return e;let a=r.slice(i,l+1),d="white"===nL?"#FFFFFF":"#000000",s=a,c=/style="([^"]*)"/i.test(s);s=c?/color\s*:\s*[^;"']+/.test(s)?s.replace(/color\s*:\s*[^;"']+/i,"color:".concat(d)):s.replace(/style="([^"]*)"/i,(e,t)=>{let n=t&&t.trim().length>0&&!t.trim().endsWith(";")?";":"";return'style="'.concat(t).concat(n,"color:").concat(d,';"')}):s.replace("<td",'<td style="color:'.concat(d,';"')),/data-announcement=/.test(s)||(s=s.replace("<td",'<td data-announcement="true"'));let p=e.slice(0,n+t.length),u=r.slice(0,i),m=r.slice(o),g=eM?sanitizeEmailHtml(nz):nz;return p+u+s+g+m},[nU,n_]=(0,l.useState)(null),[nq,nG]=(0,l.useState)(!1),nJ=(0,l.useRef)(null);(0,l.useEffect)(()=>{function onDown(e){let t=e.target,n=null==t?void 0:t.closest('[data-announcement="true"]'),r=!!(null==t?void 0:t.closest(".MuiPaper-root"));n?(nJ.current=n,nG(!0),n_(n.getBoundingClientRect())):r||(nG(!1),nJ.current=null)}return document.addEventListener("mousedown",onDown),()=>document.removeEventListener("mousedown",onDown)},[]),(0,l.useEffect)(()=>{function onFocusIn(e){let t=e.target,n=null==t?void 0:t.closest('[data-announcement="true"]');n&&(nJ.current=n,nG(!0),n_(n.getBoundingClientRect()))}return document.addEventListener("focusin",onFocusIn),()=>document.removeEventListener("focusin",onFocusIn)},[]),(0,l.useEffect)(()=>{function onSelChange(){if(!nq||!nJ.current)return;let e=window.getSelection();if(!e||!e.rangeCount)return;let t=e.getRangeAt(0),n=t.startContainer instanceof Element?t.startContainer:t.startContainer.parentElement;if(n&&nJ.current.contains(n)){let e=t.getBoundingClientRect();e&&(e.width||e.height)?n_(e):n_(nJ.current.getBoundingClientRect())}}return document.addEventListener("selectionchange",onSelChange),()=>document.removeEventListener("selectionchange",onSelChange)},[nq]),(0,l.useEffect)(()=>{function updatePos(){nJ.current&&nq&&n_(nJ.current.getBoundingClientRect())}return window.addEventListener("resize",updatePos),document.addEventListener("scroll",updatePos,{passive:!0}),()=>{window.removeEventListener("resize",updatePos),document.removeEventListener("scroll",updatePos)}},[nq]),(0,l.useEffect)(()=>{function onFocusOut(e){let t=e.relatedTarget||document.activeElement,n=!!(null==t?void 0:t.closest(".MuiPaper-root")),r=!!(null==t?void 0:t.closest('[data-announcement="true"]'));n||r||(nG(!1),nJ.current=null)}return document.addEventListener("focusout",onFocusOut),()=>document.removeEventListener("focusout",onFocusOut)},[]);let applyWrapperPadding=(e,t)=>{if(!t)return e;let n="".concat(t.top,"px ").concat(t.right,"px ").concat(t.bottom,"px ").concat(t.left,"px");return e.replace(/(<table\b[^>]*style=")(.*?max-width\s*:\s*600px[^\"]*)(")[^>]*>/i,(e,t,r,i)=>{let l=r.replace(/padding\s*:\s*[^;\"]*;?/gi,"");return l.length>0&&!l.trim().endsWith(";")&&(l+=";"),l+="padding:".concat(n,";"),"".concat(t).concat(l).concat(i)})},wrapSectionWithWrapper=(e,t)=>{let n=t?"".concat(t.top,"px ").concat(t.right,"px ").concat(t.bottom,"px ").concat(t.left,"px"):"0";return'\n<table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" align="center" style="margin:0;padding:0;">\n  <tr>\n    <td align="center" style="margin:0;padding:0;">\n      <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="max-width:600px;margin:0 auto;background:#FFFFFF;padding:'.concat(n,';">\n        <tr>\n          <td style="padding:0;">\n            ').concat(e,"\n          </td>\n        </tr>\n      </table>\n    </td>\n  </tr>\n</table>")},stripModuleWrapper=e=>{let t=/<table\b[^>]*style=\"[^\"]*max-width\s*:\s*600px[^\"]*\"[^>]*>\s*<tr>\s*<td[^>]*>([\s\S]*?)<\/td>\s*<\/tr>\s*<\/table>/i,n=e.match(t);return n&&n[1]?e.replace(t,n[1]):e},[nY,nK]=(0,l.useState)(V),[nV,n$]=(0,l.useState)(V[0].id),[nX,nQ]=(0,l.useState)(""),[n0,n1]=(0,l.useState)(tX||"Brand"),[n2,n6]=(0,l.useState)(""),[n5,n4]=(0,l.useState)(""),[n3,n8]=(0,l.useState)(!1),[n9,n7]=(0,l.useState)(""),[re,rt]=(0,l.useState)(""),[rn,rr]=(0,l.useState)(""),[ri,rl]=(0,l.useState)(!1),[ro,ra]=(0,l.useState)([]),[rd,rs]=(0,l.useState)($),[rc,rp]=(0,l.useState)($[0].id),[ru,rm]=(0,l.useState)(""),[rg,rh]=(0,l.useState)(tX||"Brand"),[rx,rf]=(0,l.useState)(""),[rb,ry]=(0,l.useState)(""),[rv,rj]=(0,l.useState)(!1),[rw,rS]=(0,l.useState)(""),[rC,rZ]=(0,l.useState)(""),[rk,rF]=(0,l.useState)(""),[rT,rI]=(0,l.useState)(!1),rE=(0,l.useCallback)(async()=>{if(nn)try{let e=await fetch("/api/hero?url=".concat(encodeURIComponent(nn)));if(e.ok){let t=await e.json();t.images&&Array.isArray(t.images)&&t.images.length>0&&(ra(t.images),nQ(t.images[0]),n6(nn),n1((null==nT?void 0:nT.storeName)||tX||"Brand"))}}catch(e){console.warn("Failed to fetch hero images",e)}},[nn,tX]),rB=(0,l.useCallback)(async()=>{if(nn)try{let e=await fetch("/api/banner?url=".concat(encodeURIComponent(nn)));if(e.ok){let t=await e.json();t.image&&(rm(t.image),rf(nn),rh((null==nT?void 0:nT.storeName)||tX||"Brand"))}}catch(e){console.warn("Failed to fetch banner image",e)}},[nn,tX]);(0,l.useEffect)(()=>{eq&&rE()},[rE,eq]),(0,l.useEffect)(()=>{eJ&&rB()},[rB,eJ]);let updateHero=(e,t)=>{"image"===e?nQ(t):"alt"===e?n1(t):"href"===e&&n6(t)},[rz,rM]=(0,l.useState)("");(0,l.useEffect)(()=>{if(nT){if(!t3||!t3.trim()){let e=nT.fontFamilies&&nT.fontFamilies[0]||"";if(e){let t=/[^a-z0-9-]/i.test(e),n="".concat(t?"'".concat(e,"'"):e,",Arial,Helvetica,sans-serif");t8(n)}else t8("'Montserrat',Arial,Helvetica,sans-serif")}nz&&nz.trim()||!nT.announcementCopy||nM(nT.announcementCopy),!rz&&nT.logo&&rM(nT.logo)}},[nT]),(0,l.useEffect)(()=>{var e;let t=null===(e=tK.current)||void 0===e?void 0:e.querySelector('[data-announcement="true"]');if(!t)return;t.setAttribute("contenteditable","true"),t.setAttribute("spellcheck","false");let onBlur=()=>{let e=(t.innerHTML||"").trim();nM(e)},onEnter=()=>{t.style.opacity="0.6"},onLeave=()=>{t.style.opacity="1"};return t.addEventListener("blur",onBlur),t.addEventListener("mouseenter",onEnter),t.addEventListener("mouseleave",onLeave),()=>{t.removeEventListener("blur",onBlur),t.removeEventListener("mouseenter",onEnter),t.removeEventListener("mouseleave",onLeave)}},[tP,tK]),(0,l.useEffect)(()=>{var e;if(!nX&&((null==nT?void 0:null===(e=nT.heroImages)||void 0===e?void 0:e.length)||0)>0){let e=nT.heroImages[0];nQ(e),n6(nn||""),n1((null==nT?void 0:nT.storeName)||tX||"Brand")}},[nT,nX,nn,tX]),(0,l.useEffect)(()=>{var e;if(!ru&&((null==nT?void 0:null===(e=nT.bannerImages)||void 0===e?void 0:e.length)||0)>0){let e=nT.bannerImages[0];rm(e),rf(nn||""),rh((null==nT?void 0:nT.storeName)||tX||"Brand")}},[nT,ru,nn,tX]);let addBodySection=()=>{let e=eP.length?Math.max(...eP.map(e=>e.id))+1:1,t={id:e,name:"Body ".concat(e),urls:[""],products:[],selectedBodyId:J[0].id,loading:!1};eN(e=>[...e,t]),eX(t=>{let n=[...t],r="body-".concat(e),i=n.indexOf("banner");return i>=0?n.splice(i,0,r):n.push(r),n}),ef("body-".concat(e))},removeHeaderSection=()=>{e_(!1),tN(""),ef(e=>"header"===e?"":e)},removeHeroSection=()=>{eG(!1),nQ(""),n1(""),n6(""),n4(""),eX(e=>e.filter(e=>"hero"!==e)),ef(e=>"hero"===e?"":e)},removeBannerSection=()=>{eY(!1),rm(""),rh(""),rf(""),ry(""),eX(e=>e.filter(e=>"banner"!==e)),ef(e=>"banner"===e?"":e)},removeFooterSection=()=>{eV(!1),tU(""),ef(e=>"footer"===e?"":e)},removeBodySection=e=>{eN(t=>t.filter(t=>t.id!==e)),eX(t=>t.filter(t=>t!=="body-".concat(e))),ef(t=>t==="body-".concat(e)?"":t)},addSectionByType=e=>{switch(e){case"header":e_(!0),ef("header");break;case"hero":eG(!0),eX(e=>e.includes("hero")?e:["hero",...e]),ef("hero");break;case"banner":eY(!0),eX(e=>e.includes("banner")?e:[...e,"banner"]),ef("banner");break;case"footer":eV(!0),ef("footer");break;default:addBodySection()}tJ(!1)},setSectionTemplate=(e,t)=>{eN(n=>n.map(n=>n.id===e?{...n,selectedBodyId:t}:n)),e8(t)},saveHeroEdits=()=>{nK(e=>e.map(e=>e.id===nV?{...e,html:n9}:e)),n8(!1);try{{let e=window.localStorage.getItem("customHeroTemplates"),t=e?JSON.parse(e):[],n=t.map(e=>e.id===nV?{...e,html:n9}:e);window.localStorage.setItem("customHeroTemplates",JSON.stringify(n))}}catch(e){console.warn("Failed to persist hero template edits",e)}},addNewHeroTemplate=()=>{let e=re.trim(),t=rn.trim();if(!e||!t)return;let n="".concat(e.toLowerCase().replace(/\s+/g,"-"),"-").concat(Date.now()),r={id:n,name:e,html:t};nK(e=>[...e,r]);try{{let e=window.localStorage.getItem("customHeroTemplates"),t=e?JSON.parse(e):[];t.push(r),window.localStorage.setItem("customHeroTemplates",JSON.stringify(t))}}catch(e){console.warn("Failed to save custom hero template",e)}rt(""),rr("")};(0,l.useEffect)(()=>{try{let e=window.localStorage.getItem("customHeroTemplates");if(e){let t=JSON.parse(e);Array.isArray(t)&&t.length&&nK(e=>[...e,...t])}}catch(e){console.warn("Failed to load custom hero templates",e)}},[]),(0,l.useEffect)(()=>{let e="";if(eU){let t=to.find(e=>e.id===td);e=applyWrapperPadding(e=applyAnnouncementCopy(e=applyBrandLogo(e=applyBrandColoursAndFont(e=t?t.html:""))),ni)}let t="",n=nY.find(e=>e.id===nV);if(eq&&n&&nX){let e={heroImage:nX,heroAlt:n0||"",heroHref:n2||""};!e.heroAlt&&tX&&(e.heroAlt=tX),t=applyWrapperPadding(t=applyBrandColoursAndFont(t=renderTemplate(n,e)),no)}let r={};eP.forEach(e=>{let t="";e.products.forEach((n,r)=>{let i=e.selectedBodyId;r%2==1&&eL[e.selectedBodyId]&&(i=eL[e.selectedBodyId]);let l=e5.find(e=>e.id===i);if(!l)return;let o=n.price||"",a=n.originalPrice,d="";d=a&&a!==o?'<span style="text-decoration:line-through;color:#888888;margin-right:8px;font-weight:400;">'.concat(a,"</span> ").concat(o):o;let s=n.description||"";"p"===e.descriptionSource&&n.descriptionP?s=n.descriptionP:"ul"===e.descriptionSource&&n.descriptionUl&&(s=n.descriptionUl);let c=e.descriptionSource||"metadata",p="ul"===c&&n.descriptionUl?"[[DESC_MARKER]]":s,u={...n,title:eM?sanitizeInlineHtml(n.title||""):n.title,description:eM?sanitizeEmailHtml(p):p,ctaLabel:n.ctaLabel||"SHOP NOW",priceHtml:d,ctaBg:t9,ctaText:"white"===nL?"#FFFFFF":"#000000"},m=renderTemplate(l,u);if("ul"===c&&n.descriptionUl){let e=n.descriptionUl,t=eM?sanitizeEmailHtml(e):e,r=normalizeListHtml(t);m=m.replace(/<p[^>]*>\s*\[\[DESC_MARKER\]\]\s*<\/p>/i,r)}m=applyBrandColoursAndFont(m=stripModuleWrapper(m)),t+=m}),r["body-".concat(e.id)]=wrapSectionWithWrapper(t,getBodySectionPadding(e.id))});let i="",l=rd.find(e=>e.id===rc);if(eJ&&l&&ru){let e={bannerImage:ru,bannerAlt:rg||"",bannerHref:rx||""};!e.bannerAlt&&tX&&(e.bannerAlt=tX),i=applyWrapperPadding(i=applyBrandColoursAndFont(i=renderTemplate(l,e)),nd)}let o="";if(eK){let e=tb.find(e=>e.id===tv);o=applyWrapperPadding(o=applyBrandColoursAndFont(o=e?e.html:""),nc)}let a="";e$.forEach(e=>{"hero"===e?a+=t:"banner"===e?a+=i:e.startsWith("body-")&&(a+=r[e]||"")}),tN(e),n4(t),tD(e$.filter(e=>e.startsWith("body-")).map(e=>r[e]).join("")),ry(i),tU(o),tq("".concat(e).concat(a).concat(o))},[eP,e3,td,tv,rc,e5,to,tb,rd,t9,ne,t3,rz,nz,nX,n0,n2,ru,rg,rx,nV,nY,eU,eq,eJ,eK,e$,ni,no,nd,nc]);let rL=(0,l.useRef)(null),[rA,rH]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{try{let e=await n.e(660).then(n.t.bind(n,5660,23));await n.e(335).then(n.t.bind(n,4335,23)),rL.current=e.default,rH(!0)}catch(e){console.warn("Failed to load PrismJS",e)}})()},[]);let rR=[];tP&&rR.push({key:"header",title:"Header",code:tP}),e$.forEach(e=>{if("hero"===e&&n5){rR.push({key:"hero",title:"Hero",code:n5});return}if("banner"===e&&rb){rR.push({key:"banner",title:"Banner",code:rb});return}if(e.startsWith("body-")){let t=eP.find(t=>"body-".concat(t.id)===e);if(!t)return;let n="";t.products.forEach((e,r)=>{let i=t.selectedBodyId;r%2==1&&eL[t.selectedBodyId]&&(i=eL[t.selectedBodyId]);let l=e5.find(e=>e.id===i);if(!l)return;let o=e.price||"",a=e.originalPrice,d="";d=a&&a!==o?'<span style="text-decoration:line-through;color:#888888;margin-right:8px;font-weight:400;">'.concat(a,"</span> ").concat(o):o;let s=e.description||"";"p"===t.descriptionSource&&e.descriptionP?s=e.descriptionP:"ul"===t.descriptionSource&&e.descriptionUl&&(s=e.descriptionUl);let c={...e,title:eM?sanitizeInlineHtml(e.title||""):e.title,description:eM?sanitizeEmailHtml(s):s,ctaLabel:e.ctaLabel||"SHOP NOW",priceHtml:d,ctaBg:t9,ctaText:"white"===nL?"#FFFFFF":"#000000"},p=renderTemplate(l,c);if("ul"===t.descriptionSource&&e.descriptionUl){let t=e.descriptionUl,n=eM?sanitizeEmailHtml(t):t,r=normalizeListHtml(n);p=p.replace(/<p[^>]*>\s*\{\{\s*description\s*\}\}\s*<\/p>/i,r)}p=applyBrandColoursAndFont(p=stripModuleWrapper(p)),n+=p}),n&&rR.push({key:e,title:t.name,code:wrapSectionWithWrapper(n,getBodySectionPadding(t.id))})}}),tO&&rR.push({key:"footer",title:"Footer",code:tO}),(0,l.useEffect)(()=>{try{let e=window.localStorage.getItem("customTemplates");if(e){let t=JSON.parse(e);Array.isArray(t)&&t.length&&e4(e=>[...e,...t])}let t=window.localStorage.getItem("customHeaderTemplates");if(t){let e=JSON.parse(t);Array.isArray(e)&&e.length&&ta(t=>[...t,...e])}let n=window.localStorage.getItem("customFooterTemplates");if(n){let e=JSON.parse(n);Array.isArray(e)&&e.length&&ty(t=>{let n=[...t,...e],r=new Set;return n.filter(e=>!r.has(e.id)&&(r.add(e.id),!0))})}let r=window.localStorage.getItem("customBannerTemplates");if(r){let e=JSON.parse(r);Array.isArray(e)&&e.length&&rs(t=>[...t,...e])}}catch(e){console.warn("Failed to load custom templates from localStorage",e)}},[]),(0,l.useEffect)(()=>{let e=e5.find(e=>e.id===e3);e&&tt(e.html)},[e3,e5]),(0,l.useEffect)(()=>{let e=to.find(e=>e.id===td);e&&tm(e.html)},[td,to]),(0,l.useEffect)(()=>{let e=rd.find(e=>e.id===rc);e&&rS(e.html)},[rc,rd]),(0,l.useEffect)(()=>{let e=tb.find(e=>e.id===tv);e&&tZ(e.html)},[tv,tb]),(0,l.useEffect)(()=>{let e=nY.find(e=>e.id===nV);e&&n7(e.html)},[nV,nY]);let sanitizeUrl=e=>e.split("?")[0],isHttpUrl=e=>{try{let t=new URL(e);return"http:"===t.protocol||"https:"===t.protocol}catch(e){return!1}},handleUrlChange=(e,t,n)=>{eD(r=>{var i;let l=null!==(i=r[e])&&void 0!==i?i:eO(e),o=[...l];return o[t]=n,{...r,[e]:o}})},addUrlField=(e,t)=>{eD(t=>{var n;let r=null!==(n=t[e])&&void 0!==n?n:eO(e);return{...t,[e]:[...r,""]}}),void 0!==t&&setTimeout(()=>{let n=document.getElementById("url-".concat(e,"-").concat(t));null==n||n.focus()},0)},removeUrlField=(e,t)=>{eD(n=>{var r;let i=null!==(r=n[e])&&void 0!==r?r:eO(e);return{...n,[e]:i.filter((e,n)=>n!==t)}})},saveBodyEdits=()=>{e4(e=>e.map(e=>e.id===e3?{...e,html:te}:e)),e7(!1)},saveHeaderEdits=()=>{ta(e=>e.map(e=>e.id===td?{...e,html:tu}:e)),tp(!1)},saveBannerEdits=()=>{rs(e=>e.map(e=>e.id===rc?{...e,html:rw}:e)),rj(!1)},saveFooterEdits=()=>{ty(e=>e.map(e=>e.id===tv?{...e,html:tC}:e)),tS(!1)},addNewBodyTemplate=()=>{let e=tn.trim(),t=ti.trim();if(!e||!t)return;let n="".concat(e.toLowerCase().replace(/\s+/g,"-"),"-").concat(Date.now()),r={id:n,name:e,html:t};e4(e=>[...e,r]);try{{let e=window.localStorage.getItem("customTemplates"),t=e?JSON.parse(e):[];t.push(r),window.localStorage.setItem("customTemplates",JSON.stringify(t))}}catch(e){console.warn("Failed to save custom body template",e)}tr(""),tl("")},addNewHeaderTemplate=()=>{let e=tg.trim(),t=tx.trim();if(!e||!t)return;let n="".concat(e.toLowerCase().replace(/\s+/g,"-"),"-").concat(Date.now()),r={id:n,name:e,html:t};ta(e=>[...e,r]);try{{let e=window.localStorage.getItem("customHeaderTemplates"),t=e?JSON.parse(e):[];t.push(r),window.localStorage.setItem("customHeaderTemplates",JSON.stringify(t))}}catch(e){console.warn("Failed to save custom header template",e)}th(""),tf("")},addNewBannerTemplate=()=>{let e=rC.trim(),t=rk.trim();if(!e||!t)return;let n="".concat(e.toLowerCase().replace(/\s+/g,"-"),"-").concat(Date.now()),r={id:n,name:e,html:t};rs(e=>[...e,r]);try{{let e=window.localStorage.getItem("customBannerTemplates"),t=e?JSON.parse(e):[];t.push(r),window.localStorage.setItem("customBannerTemplates",JSON.stringify(t))}}catch(e){console.warn("Failed to save custom banner template",e)}rZ(""),rF("")},addNewFooterTemplate=()=>{let e=tk.trim(),t=tT.trim();if(!e||!t)return;let n="".concat(e.toLowerCase().replace(/\s+/g,"-"),"-").concat(Date.now()),r={id:n,name:e,html:t};ty(e=>[...e,r]);try{{let e=window.localStorage.getItem("customFooterTemplates"),t=e?JSON.parse(e):[];t.push(r),window.localStorage.setItem("customFooterTemplates",JSON.stringify(t))}}catch(e){console.warn("Failed to save custom footer template",e)}tF(""),tI("")},generateSection=async e=>{var t;let n=eP.find(t=>t.id===e);if(!n)return;let r=(null!==(t=eW[e])&&void 0!==t?t:n.urls).map(e=>e.trim()).filter(e=>e);if(0===r.length){alert("Please provide at least one product URL.");return}let i=r.filter(e=>!isHttpUrl(e));if(i.length>0){alert("Invalid URL(s):\n".concat(i.join("\n"),"\n\nPlease enter full http(s) links."));return}eN(t=>t.map(t=>t.id===e?{...t,urls:[...r],loading:!0,products:[]}:t));try{t4(!0),t1(0),t6(15);let t=await fetch("/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({urls:r,templateId:n.selectedBodyId})});if(!t.ok){let e="";try{e=await t.text()}catch(e){}throw Error("Request failed with status ".concat(t.status).concat(e?": ".concat(e):""))}t1(20),t6(40);let i=await t.json();t1(30),t6(50);let l=new Map;(i.products||[]).forEach(e=>{let t=Object.keys(e||{}).some(t=>"url"!==t&&e[t]);if(!t){let t=e.url||"Unknown URL";nO("Error on fetching data from the url ".concat(t));return}l.set(e.url,{url:e.url,pretitle:e.pretitle||"",title:e.title||"",price:e.price||"",originalPrice:e.originalPrice||void 0,description:e.description||"",descriptionP:e.descriptionP||"",descriptionUl:e.descriptionUl||"",image:e.image||"",images:Array.isArray(e.images)?e.images:void 0,cta:e.cta||e.url,ctaLabel:e.ctaLabel||"SHOP NOW"})});let o=r.filter(e=>l.has(e)),a=o.map(e=>l.get(e)),d=Math.max(1,r.length);o.forEach((e,t)=>{let n=Math.min(90,30+Math.round((t+1)/d*60));t1(n),t6(Math.min(100,n+10))}),t1(95),t6(100),eN(t=>t.map(t=>t.id===e?{...t,products:a,urls:[...o,""],loading:!1}:t)),eD(t=>({...t,[e]:[...o,""]})),t1(100),setTimeout(()=>{t4(!1),t1(-1),t6(-1)},200)}catch(t){console.error("Generation failed",t),console.log("Failed to generate products: ".concat(t.message)),eN(t=>t.map(t=>t.id===e?{...t,loading:!1}:t)),t4(!1),t1(-1),t6(-1)}};(0,l.useEffect)(()=>{eu.current||1!==eP.length||0!==eP[0].products.length||!eP[0].urls[0]||eP[0].loading||(eu.current=!0,generateSection(eP[0].id))},[eP]);let generateAllSections=async()=>{for(let e of eP)await generateSection(e.id)},updateProductInSection=(e,t,n,r)=>{eN(i=>i.map(i=>{if(i.id!==e)return i;let l=[...i.products],o={...l[t]};return o[n]=r,l[t]=o,{...i,products:l}}))},copyToClipboard=e=>{"undefined"!=typeof navigator&&navigator.clipboard&&navigator.clipboard.writeText(e).then(()=>{nO("Code copied!")}).catch(e=>{console.warn("Failed to copy to clipboard",e)})},highlight=e=>{let t=rL.current;return t?t.highlight(e,t.languages.markup,"markup"):e},rP=[...eU?[]:[{key:"header",label:"Header"}],...eq?[]:[{key:"hero",label:"Hero"}],{key:"body",label:"Body"},...eJ?[]:[{key:"banner",label:"Banner"}],...eK?[]:[{key:"footer",label:"Footer"}]];return nn?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a(),{children:[(0,i.jsx)("title",{children:"EDM Expresso"}),(0,i.jsx)("meta",{name:"description",content:"Build modular EDMs from product pages"})]}),(0,i.jsx)(AppLayout,{title:"EDM Espresso",left:(0,i.jsxs)("div",{className:"accordion-list".concat(ex?" has-open":""),style:{height:"100%",display:"flex",flexDirection:"column"},children:[eU&&(0,i.jsxs)("div",{className:"accordion-section".concat("header"===ex?" open":""),children:[(0,i.jsxs)("div",{className:"accordion-header".concat("header"===ex?" open":""),onClick:()=>handleAccordionToggle("header"),children:[(0,i.jsx)("span",{children:"Header"}),(0,i.jsxs)("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"var(--gap-2)"},children:[(0,i.jsx)(p.Z,{onClick:e=>{e.stopPropagation(),removeHeaderSection()},title:"Remove section",children:(0,i.jsx)(eZ.Z,{fontSize:"medium"})}),(0,i.jsx)(p.Z,{onClick:e=>{e.stopPropagation(),handleAccordionToggle("header")},title:"header"===ex?"Collapse section":"Expand section",children:"header"===ex?(0,i.jsx)(ek.Z,{fontSize:"medium"}):(0,i.jsx)(eF.Z,{fontSize:"medium"})})]})]}),"header"===ex&&(0,i.jsxs)("div",{className:"accordion-content",children:[(0,i.jsx)("div",{style:{display:"flex",flexWrap:"wrap",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:"6px",overflow:"hidden"},children:(()=>{let e=to.find(e=>e.id===td);return e?(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,i.jsx)(shared_HtmlThumbnail,{html:e.html,width:600,forceAutoHeight:!0})},e.id):null})()}),(0,i.jsxs)("div",{className:"template-row",style:{display:"flex",gap:"var(--gap-2)",alignItems:"center",marginTop:"1.5rem"},children:[(0,i.jsxs)(y.Z,{fullWidth:!0,variant:"outlined",children:[(0,i.jsx)(I.Z,{id:"header-template-label",children:"Template"}),(0,i.jsx)(E.Z,{labelId:"header-template-label",id:"header-template-select",label:"Template",value:td,onChange:e=>ts(e.target.value),children:to.map(e=>(0,i.jsx)(B.Z,{value:e.id,children:e.name},e.id))})]}),(0,i.jsx)(p.Z,{onClick:()=>tp(e=>!e),title:tc?"Close editor":"Edit template",children:(0,i.jsx)(eC.Z,{fontSize:"medium"})}),(0,i.jsx)(p.Z,{onClick:()=>tB(e=>!e),title:tE?"Cancel new template":"Add new template",children:(0,i.jsx)(ej.Z,{fontSize:"medium"})})]}),tc&&(0,i.jsxs)("div",{children:[(0,i.jsx)(z.Z,{id:"header-draft-html",label:"Template HTML",value:tu,onChange:e=>tm(e.target.value),rows:8,fullWidth:!0,multiline:!0,variant:"standard",sx:{fontFamily:"monospace","& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}}}),(0,i.jsxs)("div",{className:"new-template-actions",style:{display:"flex",gap:"var(--gap-2)",marginTop:"0.5rem"},children:[(0,i.jsx)(p.Z,{onClick:()=>tp(!1),title:"Cancel edit",children:(0,i.jsx)(ew.Z,{fontSize:"medium"})}),(0,i.jsx)(p.Z,{onClick:()=>{saveHeaderEdits(),tp(!1)},title:"Save edits",children:(0,i.jsx)(eS.Z,{fontSize:"medium"})})]})]}),tE&&(0,i.jsxs)("div",{className:"new-template-form",children:[(0,i.jsx)(z.Z,{id:"header-new-name",label:"Template name",type:"text",value:tg,onChange:e=>th(e.target.value),fullWidth:!0,variant:"standard",sx:{mb:1,"& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}}}),(0,i.jsx)(z.Z,{id:"header-new-html",label:"Template HTML",value:tx,onChange:e=>tf(e.target.value),rows:6,fullWidth:!0,multiline:!0,variant:"standard",sx:{fontFamily:"monospace","& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}}}),(0,i.jsxs)("div",{className:"new-template-actions",style:{display:"flex",gap:"var(--gap-2)",marginTop:"0.5rem"},children:[(0,i.jsx)(p.Z,{onClick:()=>{tB(!1),th(""),tf("")},title:"Cancel new template",children:(0,i.jsx)(ew.Z,{fontSize:"medium"})}),(0,i.jsx)(p.Z,{onClick:()=>{addNewHeaderTemplate(),tB(!1)},title:"Save new template",children:(0,i.jsx)(eS.Z,{fontSize:"medium"})})]})]}),(0,i.jsx)(eh,{label:"Section padding (px)",value:ni,onChange:nl,persistKey:"header:padding"})]})]}),(0,i.jsx)(eI.LB,{sensors:eQ,collisionDetection:eI.pE,modifiers:[eB.DL],onDragEnd:e=>{let{active:t,over:n}=e;n&&t.id!==n.id&&(eX(e=>{let r=e.indexOf(t.id),i=e.indexOf(n.id);return(0,eE.Rp)(e,r,i)}),String(t.id).startsWith("body-")&&String(n.id).startsWith("body-")&&eN(e=>{let r=e.findIndex(e=>"body-".concat(e.id)===t.id),i=e.findIndex(e=>"body-".concat(e.id)===n.id);return(0,eE.Rp)(e,r,i)}))},children:(0,i.jsx)(eE.Fo,{items:e$,strategy:eE.qw,children:e$.map(e=>{if("hero"===e&&eq)return(0,i.jsx)(e2,{isOpen:"hero"===ex},"hero");if("banner"===e&&eJ)return(0,i.jsx)(e6,{isOpen:"banner"===ex},"banner");if(e.startsWith("body-")){let t=eP.find(t=>"body-".concat(t.id)===e);if(!t)return null;let n=ex===e;return(0,i.jsx)(e1,{section:t,isOpen:n},e)}return null})})}),eK&&(0,i.jsxs)("div",{className:"accordion-section".concat("footer"===ex?" open":""),children:[(0,i.jsxs)("div",{className:"accordion-header".concat("footer"===ex?" open":""),onClick:()=>handleAccordionToggle("footer"),children:[(0,i.jsx)("span",{children:"Footer"}),(0,i.jsxs)("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"var(--gap-2)"},children:[(0,i.jsx)(p.Z,{onClick:e=>{e.stopPropagation(),removeFooterSection()},title:"Remove section",children:(0,i.jsx)(eZ.Z,{fontSize:"medium"})}),(0,i.jsx)(p.Z,{onClick:e=>{e.stopPropagation(),handleAccordionToggle("footer")},title:"footer"===ex?"Collapse section":"Expand section",children:"footer"===ex?(0,i.jsx)(ek.Z,{fontSize:"medium"}):(0,i.jsx)(eF.Z,{fontSize:"medium"})})]})]}),"footer"===ex&&(0,i.jsxs)("div",{className:"accordion-content",children:[(0,i.jsx)("div",{style:{display:"flex",flexWrap:"wrap",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:"6px",overflow:"hidden"},children:(()=>{let e=tb.find(e=>e.id===tv);return e?(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:(0,i.jsx)(shared_HtmlThumbnail,{html:e.html,width:600,forceAutoHeight:!0})},e.id):null})()}),(0,i.jsxs)("div",{className:"template-row",style:{display:"flex",gap:"var(--gap-2)",alignItems:"center",marginTop:"1.5rem"},children:[(0,i.jsxs)(y.Z,{fullWidth:!0,variant:"outlined",children:[(0,i.jsx)(I.Z,{id:"footer-template-label",children:"Template"}),(0,i.jsx)(E.Z,{labelId:"footer-template-label",id:"footer-template-select",label:"Template",value:tv,onChange:e=>tj(e.target.value),children:tb.map(e=>(0,i.jsx)(B.Z,{value:e.id,children:e.name},e.id))})]}),(0,i.jsx)(p.Z,{onClick:()=>tS(e=>!e),title:tw?"Close editor":"Edit template",children:(0,i.jsx)(eC.Z,{fontSize:"medium"})}),(0,i.jsx)(p.Z,{onClick:()=>tA(e=>!e),title:tL?"Cancel new template":"Add new template",children:(0,i.jsx)(ej.Z,{fontSize:"medium"})})]}),tw&&(0,i.jsxs)("div",{children:[(0,i.jsx)(z.Z,{id:"footer-draft-html",label:"Template HTML",value:tC,onChange:e=>tZ(e.target.value),rows:8,fullWidth:!0,multiline:!0,variant:"standard",sx:{fontFamily:"monospace","& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}}}),(0,i.jsxs)("div",{className:"new-template-actions",style:{display:"flex",gap:"var(--gap-2)",marginTop:"0.5rem"},children:[(0,i.jsx)(p.Z,{onClick:()=>tS(!1),title:"Cancel edit",children:(0,i.jsx)(ew.Z,{fontSize:"medium"})}),(0,i.jsx)(p.Z,{onClick:()=>{saveFooterEdits(),tS(!1)},title:"Save edits",children:(0,i.jsx)(eS.Z,{fontSize:"medium"})})]})]}),tL&&(0,i.jsxs)("div",{className:"new-template-form",children:[(0,i.jsx)(z.Z,{id:"footer-new-name",label:"Template name",type:"text",value:tk,onChange:e=>tF(e.target.value),fullWidth:!0,variant:"standard",sx:{mb:1,"& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}}}),(0,i.jsx)(z.Z,{id:"footer-new-html",label:"Template HTML",value:tT,onChange:e=>tI(e.target.value),rows:6,fullWidth:!0,multiline:!0,variant:"standard",sx:{fontFamily:"monospace","& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}}}),(0,i.jsxs)("div",{className:"new-template-actions",style:{display:"flex",gap:"var(--gap-2)",marginTop:"0.5rem"},children:[(0,i.jsx)(p.Z,{onClick:()=>{tA(!1),tF(""),tI("")},title:"Cancel new template",children:(0,i.jsx)(ew.Z,{fontSize:"medium"})}),(0,i.jsx)(p.Z,{onClick:()=>{addNewFooterTemplate(),tA(!1)},title:"Save new template",children:(0,i.jsx)(eS.Z,{fontSize:"medium"})})]})]}),(0,i.jsx)(eh,{label:"Section padding (px)",value:nc,onChange:np,persistKey:"footer:padding"})]})]}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:"var(--gap-2)",marginTop:"1rem"},children:[(0,i.jsx)(M.Z,{onClick:generateAllSections,children:"Generate EDM"}),(0,i.jsxs)("div",{ref:tY,style:{position:"relative",marginLeft:"1rem"},children:[(0,i.jsxs)(M.Z,{onClick:()=>tJ(e=>!e),title:"Add section",children:["Add Section ",tG?(0,i.jsx)(ek.Z,{sx:{ml:.5}}):(0,i.jsx)(eF.Z,{sx:{ml:.5}})]}),tG&&(0,i.jsx)(R.Z,{elevation:3,sx:{position:"absolute",top:"100%",left:0,mt:.5,zIndex:10,minWidth:"12rem",maxHeight:"12rem",overflowY:"auto"},children:(0,i.jsx)(b.Z,{children:rP.map(e=>(0,i.jsx)(M.Z,{onClick:()=>addSectionByType(e.key),sx:{justifyContent:"flex-start",px:2},children:e.label},e.key))})})]})]})]}),rightOpen:tV,onRightClose:()=>t$(!1),onRightToggle:()=>t$(e=>!e),progress:t0,buffer:t2,loading:t5,right:(0,i.jsxs)(m.Z,{className:"summary-container",children:[(0,i.jsx)(m.Z,{sx:{p:0},children:(()=>{let e=nj(ny,nT);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.Z,{variant:"h6",component:"h2",children:e.title}),e.subline&&(0,i.jsx)(c.Z,{variant:"body2",sx:{color:"text.secondary",mt:.5},children:e.subline})]})})()}),(0,i.jsx)(L.Z,{sx:{my:2}}),(0,i.jsxs)(A.Z,{value:tH,onChange:(e,t)=>tR(t),"aria-label":"summary tabs",sx:{mb:2},children:[(0,i.jsx)(H.Z,{label:"Product"}),(0,i.jsx)(H.Z,{label:"Assets"}),(0,i.jsx)(H.Z,{label:"Brand"})]}),0===tH&&(0,i.jsx)(b.Z,{spacing:2,children:(null==nT?void 0:nT.product)&&(0,i.jsxs)(i.Fragment,{children:[nT.product.image&&(0,i.jsx)(m.Z,{sx:{mb:1,textAlign:"center"},children:(0,i.jsx)("img",{src:nT.product.image,alt:nT.product.title||"",style:{width:"100%",height:"auto",margin:"0 auto",display:"block",borderRadius:6,border:"1px solid rgba(0, 0, 0, 0.2)"}})}),(null==nT?void 0:null===(t=nT.product)||void 0===t?void 0:null===(e=t.images)||void 0===e?void 0:e.length)?(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(c.Z,{variant:"subtitle2",sx:{color:"text.secondary",mb:1},children:"Product images"}),(0,i.jsx)(m.Z,{className:"summary-product-grid",sx:{display:"grid",gap:1,width:"100%"},children:uniqueImages((nT.product.images||[]).map(e=>e||"")).map(e=>(0,i.jsx)(m.Z,{sx:{cursor:"pointer",border:normalizeImage(nT.product.image||"")===normalizeImage(e)?"2px solid var(--color-primary)":"2px solid #e0e0e0",borderRadius:1,opacity:normalizeImage(nT.product.image||"")===normalizeImage(e)?1:.9,overflow:"hidden",transition:"opacity .15s ease, border-color .15s ease, box-shadow .15s ease","& img":{transition:"transform .4s ease"},"&:hover":{opacity:1,borderColor:"var(--color-primary)",boxShadow:"0 0 0 1px rgba(0,0,0,0.02)"},"&:hover img":{transform:"scale(1.075)"}},onClick:()=>{nI(t=>t?{...t,product:{...t.product,image:e}}:t),eN(t=>{var n;if(!t.length||!(null===(n=t[0].products)||void 0===n?void 0:n.length))return t;let r=[...t],i={...r[0].products[0],image:e};return r[0]={...r[0],products:[i,...r[0].products.slice(1)]},r})},children:(0,i.jsx)("img",{src:e,alt:"product",style:{width:"100%",height:"auto",objectFit:"contain",display:"block"}})},normalizeImage(e)||e))})]}):null,(0,i.jsx)(m.Z,{sx:{mb:2},children:(0,i.jsx)(RichTextField,{label:"Title",value:nT.product.title||"",onChange:e=>{nI(t=>t?{...t,product:{...t.product,title:e}}:t),eN(t=>{var n;if(!t.length||!(null===(n=t[0].products)||void 0===n?void 0:n.length))return t;let r=[...t],i={...r[0].products[0],title:e};return r[0]={...r[0],products:[i,...r[0].products.slice(1)]},r})},placeholder:"Product title",minHeight:40})}),(0,i.jsx)(z.Z,{label:"Price",value:nT.product.price||"",onChange:e=>{let t=e.target.value;nI(e=>e?{...e,product:{...e.product,price:t}}:e),eN(e=>{var n;if(!e.length||!(null===(n=e[0].products)||void 0===n?void 0:n.length))return e;let r=[...e],i={...r[0].products[0],price:t};return r[0]={...r[0],products:[i,...r[0].products.slice(1)]},r})},fullWidth:!0,variant:"standard",sx:{mb:2,"& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}}}),(()=>{let e=nT.product,t=e.descChoice||"metadata",n="";return n="ul"===t&&e.descriptionUl?e.descriptionUl:"p"===t?e.descriptionP||"":e.metadataDescription||"",(0,i.jsx)(m.Z,{sx:{mb:0},children:(0,i.jsx)(RichTextField,{label:"Description",value:n,onChange:e=>{nI(n=>{if(!n)return n;let r={...n.product};return"ul"===t?r.descriptionUl=e:"p"===t?r.descriptionP=e:r.metadataDescription=e,{...n,product:r}}),eN(t=>{var n;if(!t.length||!(null===(n=t[0].products)||void 0===n?void 0:n.length))return t;let r=[...t],i={...r[0].products[0],description:e};return r[0]={...r[0],products:[i,...r[0].products.slice(1)]},r})},placeholder:"Product description",minHeight:80})})})(),(0,i.jsxs)(z.Z,{select:!0,fullWidth:!0,label:"Description Source",id:"desc-source-select",value:nT.product.descChoice||"metadata",onChange:e=>{let t=e.target.value;nI(e=>e?{...e,product:{...e.product,descChoice:t,description:"metadata"===t?e.product.metadataDescription||"":"p"===t?e.product.descriptionP||"":e.product.descriptionUl||""}}:e),eN(e=>{var n;if(!e.length||!(null===(n=e[0].products)||void 0===n?void 0:n.length))return e;let r=[...e],i=r[0].products[0],l="";"metadata"===t&&(l=(null==nT?void 0:nT.product).metadataDescription||""),"p"===t&&(l=i.descriptionP||""),"ul"===t&&(l=i.descriptionUl||"");let o={...r[0].products[0],description:l};return o.descSource=t,r[0]={...r[0],products:[o,...r[0].products.slice(1)]},r})},variant:"standard",sx:{"& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}},children:[(0,i.jsx)(B.Z,{value:"metadata",children:"Page metadata"}),(0,i.jsx)(B.Z,{value:"p",disabled:!nT.product.descriptionP,children:"First paragraph"}),(0,i.jsx)(B.Z,{value:"ul",disabled:!nT.product.descriptionUl,children:"Bullet list"})]})]})}),1===tH&&(0,i.jsxs)(b.Z,{spacing:2,children:[(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(c.Z,{variant:"subtitle2",sx:{color:"text.secondary",mb:1},children:"Hero images"}),(0,i.jsx)(m.Z,{className:"summary-product-grid",sx:{display:"grid",gap:1,width:"100%"},children:uniqueImages(ro&&ro.length?ro:(null==nT?void 0:nT.heroImages)||[]).map(e=>(0,i.jsx)(m.Z,{sx:{cursor:"pointer",border:normalizeImage(nX||"")===normalizeImage(e)?"2px solid var(--color-primary)":"2px solid #e0e0e0",borderRadius:1,opacity:normalizeImage(nX||"")===normalizeImage(e)?1:.9,overflow:"hidden",transition:"opacity .15s ease, border-color .15s ease, box-shadow .15s ease"},onClick:()=>{nQ(e),n6(nn||""),n1((null==nT?void 0:nT.storeName)||"")},children:(0,i.jsx)("img",{src:e,alt:"hero",style:{width:"100%",height:"auto",objectFit:"contain",display:"block"}})},normalizeImage(e)||e))})]}),((null==nT?void 0:null===(r=nT.bannerImages)||void 0===r?void 0:r.length)||0)>0&&(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(c.Z,{variant:"subtitle2",sx:{color:"text.secondary",mb:1},children:"Banner images"}),(0,i.jsx)(m.Z,{className:"summary-product-grid",sx:{display:"grid",gap:1,width:"100%"},children:uniqueImages(nT.bannerImages).map(e=>(0,i.jsx)(m.Z,{sx:{cursor:"pointer",border:normalizeImage(ru||"")===normalizeImage(e)?"2px solid var(--color-primary)":"2px solid #e0e0e0",borderRadius:1,opacity:normalizeImage(ru||"")===normalizeImage(e)?1:.9,overflow:"hidden",transition:"opacity .15s ease, border-color .15s ease, box-shadow .15s ease","& img":{transition:"transform .4s ease"},"&:hover":{opacity:1,borderColor:"var(--color-primary)",boxShadow:"0 0 0 1px rgba(0,0,0,0.02)"},"&:hover img":{transform:"scale(1.075)"}},onClick:()=>{rm(e),rf(nn||""),rh((null==nT?void 0:nT.storeName)||"")},children:(0,i.jsx)("img",{src:e,alt:"banner",style:{width:"100%",height:"auto",objectFit:"contain",display:"block"}})},normalizeImage(e)||e))})]})]}),2===tH&&(0,i.jsxs)(b.Z,{spacing:2,children:[(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(c.Z,{variant:"subtitle2",sx:{color:"text.secondary",mb:1},children:"Logo"}),(0,i.jsxs)(b.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[(0,i.jsx)(m.Z,{sx:{flex:1},children:rz||(null==nT?void 0:nT.logo)||(null==nT?void 0:nT.logoSvg)?rz?(0,i.jsx)("img",{src:rz,alt:"logo",style:{height:22,width:"auto",display:"block",textAlign:"left"}}):(null==nT?void 0:nT.logo)?(0,i.jsx)("img",{src:nT.logo,alt:"logo",style:{height:22,width:"auto",display:"block",textAlign:"left"}}):(0,i.jsx)(m.Z,{sx:{height:22,"& svg":{height:"100%"}},dangerouslySetInnerHTML:{__html:nT.logoSvg}}):(0,i.jsx)(c.Z,{variant:"caption",sx:{color:"text.disabled"},children:"No logo"})}),(0,i.jsx)(m.Z,{children:(0,i.jsxs)(M.Z,{component:"label",role:void 0,tabIndex:-1,variant:"outlined",color:"inherit",startIcon:(0,i.jsx)(D.Z,{children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0l3 3m-3-3l-3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z"})})}),children:["Upload a file",(0,i.jsx)(ec,{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?e.target.files[0]:null;nS(t)}})]})})]}),nw&&(0,i.jsx)(c.Z,{variant:"caption",sx:{display:"block",mt:.5,color:"text.secondary"},children:nw.name})]}),(0,i.jsx)(m.Z,{children:(0,i.jsx)(z.Z,{id:"summary-website",label:"Website URL",value:nn,fullWidth:!0,variant:"standard",sx:{"& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}}})}),(0,i.jsx)(m.Z,{children:(0,i.jsx)(z.Z,{id:"summary-store",label:"Store",value:(null==nT?void 0:nT.storeName)||"",fullWidth:!0,onChange:e=>nI(t=>t?{...t,storeName:e.target.value}:t),variant:"standard",sx:{"& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}}})}),(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(c.Z,{variant:"subtitle2",sx:{color:"text.secondary",mb:1},children:"Brand colors"}),(0,i.jsxs)(b.Z,{direction:"row",spacing:1,children:[(0,i.jsx)(N.Ov,{id:"brand-primary",label:"Primary",format:"hex",value:t9,onChange:e=>t7(e||t9),size:"small"}),(0,i.jsx)(N.Ov,{id:"brand-secondary",label:"Secondary",format:"hex",value:ne,onChange:e=>nt(e||ne),size:"small"})]})]}),(0,i.jsxs)(z.Z,{select:!0,fullWidth:!0,label:"Brand font",id:"brand-font",value:t3,onChange:e=>t8(e.target.value),variant:"standard",sx:{"& .MuiInput-underline:before":{borderBottomColor:"grey.400"},"& .MuiInput-underline:after":{borderBottomColor:"var(--color-primary)"}},children:[Array.from(new Set((null==nT?void 0:nT.fontFamilies)||[])).map(e=>{let t=/[^a-z0-9-]/i.test(e),n="".concat(t?"'".concat(e,"'"):e,",Arial,Helvetica,sans-serif");return(0,i.jsx)(B.Z,{value:n,children:e},"det-".concat(e))}),(0,i.jsx)(B.Z,{value:"'Montserrat',Arial,Helvetica,sans-serif",children:"Default (Montserrat)"}),(0,i.jsx)(B.Z,{value:"Arial, Helvetica, sans-serif",children:"Arial"}),(0,i.jsx)(B.Z,{value:"Georgia, serif",children:"Georgia"}),(0,i.jsx)(B.Z,{value:"Times New Roman, serif",children:"Times New Roman"}),(0,i.jsx)(B.Z,{value:"Courier New, monospace",children:"Courier New"})]}),(0,i.jsx)(m.Z,{children:(0,i.jsx)(RichTextField,{label:"Announcement Bar",value:nz,onChange:e=>nM(e),placeholder:"E.g., Free shipping this week  20% off sitewide  New arrivals",minHeight:60})})]})]}),children:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"calc(100vh - 64px)"},children:[(0,i.jsxs)("div",{className:"preview-bar",style:{display:"flex",alignItems:"center",gap:"var(--gap-2)"},children:[(0,i.jsx)(c.Z,{variant:"h6",sx:{flex:1,fontSize:"0.9rem",fontWeight:400},children:"preview"===eH?"Email Preview":"Email Code"}),(0,i.jsxs)("div",{className:"preview-actions",children:[(0,i.jsx)(p.Z,{onClick:()=>eR("preview"===eH?"code":"preview"),title:"preview"===eH?"Show code":"Show preview",children:"preview"===eH?(0,i.jsx)(ey.Z,{}):(0,i.jsx)(ev.Z,{})}),(0,i.jsx)(p.Z,{onClick:()=>{copyToClipboard(t_),nO("Code copied!")},title:"Copy full email HTML to clipboard",children:(0,i.jsx)(eb.Z,{})})]})]}),(0,i.jsx)("div",{style:{overflowY:"auto",overflowX:"hidden",padding:"1rem",paddingTop:"0",position:"relative"},children:"preview"===eH?(0,i.jsxs)("div",{ref:tK,"data-preview-container":"true",children:[nq&&(0,i.jsx)(function(e){let{anchorRect:t,onFormat:n}=e;if(!t)return null;let r={position:"fixed",top:t.top-44>0?t.top-44:t.bottom+8,left:t.left+t.width/2-90,zIndex:9999,background:"#fff",boxShadow:"0 2px 8px rgba(0,0,0,0.12)",borderRadius:8,padding:4,display:"flex",gap:2,minWidth:180,alignItems:"center"};return(0,i.jsxs)(R.Z,{elevation:3,style:r,children:[(0,i.jsx)(P.Z,{title:"Font Size",children:(0,i.jsx)(p.Z,{size:"small",onMouseDown:e=>{e.preventDefault(),n("fontSize")},children:(0,i.jsx)(er.Z,{fontSize:"small"})})}),(0,i.jsx)(P.Z,{title:"Text Color",children:(0,i.jsx)(p.Z,{size:"small",onMouseDown:e=>{e.preventDefault(),n("foreColor")},children:(0,i.jsx)(en.Z,{fontSize:"small"})})}),(0,i.jsx)(P.Z,{title:"Bold",children:(0,i.jsx)(p.Z,{size:"small",onMouseDown:e=>{e.preventDefault(),n("bold")},children:(0,i.jsx)(ee.Z,{fontSize:"small"})})}),(0,i.jsx)(P.Z,{title:"Italic",children:(0,i.jsx)(p.Z,{size:"small",onMouseDown:e=>{e.preventDefault(),n("italic")},children:(0,i.jsx)(et.Z,{fontSize:"small"})})}),(0,i.jsx)(P.Z,{title:"Bullet List",children:(0,i.jsx)(p.Z,{size:"small",onMouseDown:e=>{e.preventDefault(),n("insertUnorderedList")},children:(0,i.jsx)(ei.Z,{fontSize:"small"})})}),(0,i.jsx)(P.Z,{title:"Numbered List",children:(0,i.jsx)(p.Z,{size:"small",onMouseDown:e=>{e.preventDefault(),n("insertOrderedList")},children:(0,i.jsx)(el.Z,{fontSize:"small"})})}),(0,i.jsx)(P.Z,{title:"Link",children:(0,i.jsx)(p.Z,{size:"small",onMouseDown:e=>{e.preventDefault(),n("createLink")},children:(0,i.jsx)(eo.Z,{fontSize:"small"})})})]})},{anchorRect:nU,onFormat:function(e){if(nJ.current&&(nJ.current.focus(),"bold"===e&&document.execCommand("bold"),"italic"===e&&document.execCommand("italic"),"fontSize"===e&&document.execCommand("fontSize",!1,"4"),"foreColor"===e&&document.execCommand("foreColor",!1,"#e91e63"),"insertUnorderedList"===e&&document.execCommand("insertUnorderedList"),"insertOrderedList"===e&&document.execCommand("insertOrderedList"),"createLink"===e)){let e=window.prompt("Enter the URL");e&&document.execCommand("createLink",!1,e)}}}),eU&&(t5?(0,i.jsx)(x.Z,{variant:"rectangular",animation:"wave",sx:{mb:2,width:"100%",maxWidth:600,mx:"auto",height:80,borderRadius:2,boxShadow:"var(--shadow-light)",paddingTop:"".concat(null!==(Q=ni.top)&&void 0!==Q?Q:0,"px"),paddingBottom:"".concat(null!==(ea=ni.bottom)&&void 0!==ea?ea:0,"px")}}):(0,i.jsx)("div",{"data-section":"header",onClick:()=>ef("header"),dangerouslySetInnerHTML:{__html:tP}})),e$.map(e=>{var t,n,r,l;if("hero"===e&&eq)return nX&&!t5?(0,i.jsx)("div",{"data-section":"hero",children:(0,i.jsx)(ep,{heroImage:nX,heroAlt:n0||tX,heroHref:n2,heroImages:ro,updateHero:updateHero,templateId:nV,onActivate:()=>ef("hero"),wrapperPadding:no})},"hero"):(0,i.jsx)(x.Z,{variant:"rectangular",animation:"wave",sx:{mb:2,width:"100%",maxWidth:600,mx:"auto",height:180,borderRadius:2,boxShadow:"var(--shadow-light)",paddingTop:"".concat(null!==(t=no.top)&&void 0!==t?t:0,"px"),paddingBottom:"".concat(null!==(n=no.bottom)&&void 0!==n?n:0,"px")}},"hero-skel");if("banner"===e&&eJ)return ru&&!t5?(0,i.jsx)("div",{"data-section":"banner",onClick:()=>ef("banner"),dangerouslySetInnerHTML:{__html:rb}},"banner"):(0,i.jsx)(x.Z,{variant:"rectangular",animation:"wave",sx:{mb:2,width:"100%",maxWidth:600,mx:"auto",height:120,borderRadius:2,boxShadow:"var(--shadow-light)",paddingTop:"".concat(null!==(r=nd.top)&&void 0!==r?r:0,"px"),paddingBottom:"".concat(null!==(l=nd.bottom)&&void 0!==l?l:0,"px")}},"banner-skel");if(e.startsWith("body-")){let t=eP.find(t=>"body-".concat(t.id)===e);return t?(0,i.jsxs)("div",{"data-section":"body-".concat(t.id),onClick:()=>ef("body-".concat(t.id)),children:[t.loading&&(0,i.jsx)(i.Fragment,{children:(()=>{var e,n;let r=getBodySectionPadding(t.id),l={mb:2,width:"100%",maxWidth:600,mx:"auto",height:180,borderRadius:2,boxShadow:"var(--shadow-light)",paddingTop:"".concat(null!==(e=r.top)&&void 0!==e?e:0,"px"),paddingBottom:"".concat(null!==(n=r.bottom)&&void 0!==n?n:0,"px")};return 0===t.urls.filter(e=>e.trim()).length?(0,i.jsx)(x.Z,{variant:"rectangular",animation:"wave",sx:l}):t.urls.filter(e=>e.trim()).map((e,t)=>(0,i.jsx)(x.Z,{variant:"rectangular",animation:"wave",sx:l},t))})()}),"grid"===t.selectedBodyId?(()=>{let e=e5.find(e=>"grid"===e.id);return e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("table",{role:"presentation",width:"100%",cellPadding:0,cellSpacing:0,border:0,align:"center",style:{margin:0,padding:0},children:(0,i.jsx)("tbody",{children:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{align:"center",style:{margin:0,padding:0},children:(0,i.jsx)("table",{role:"presentation",width:"100%",cellPadding:0,cellSpacing:0,border:0,style:{maxWidth:600,margin:"0 auto",background:"#FFFFFF",padding:(()=>{let e=getBodySectionPadding(t.id);return"".concat(e.top,"px ").concat(e.right,"px ").concat(e.bottom,"px ").concat(e.left,"px")})()},children:(0,i.jsx)("tbody",{children:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{style:{padding:0},children:(0,i.jsx)("table",{role:"presentation",width:"100%",cellPadding:0,cellSpacing:0,border:0,style:{width:"100%",margin:0,padding:0},children:(0,i.jsx)("tbody",{children:(0,i.jsx)("tr",{children:t.products.map((e,n)=>(0,i.jsxs)("td",{align:"center",valign:"top",style:{padding:0,position:"relative",cursor:"pointer",overflow:"hidden"},onClick:()=>eg({sectionId:t.id,productIdx:n}),onMouseEnter:e=>{let t=e.currentTarget.querySelector("img"),n=e.currentTarget.querySelector(".edit-icon");t&&(t.style.opacity="0.7"),n&&(n.style.transform="translateY(-38px)")},onMouseLeave:e=>{let t=e.currentTarget.querySelector("img"),n=e.currentTarget.querySelector(".edit-icon");t&&(t.style.opacity="1"),n&&(n.style.transform="translateY(0)")},children:[(0,i.jsx)("img",{src:e.image,alt:e.title||"",style:{display:"block",width:"100%",height:"auto",border:0,outline:0,textDecoration:"none",transition:"opacity 0.2s ease-in-out"}}),e.images&&e.images.length>1&&(0,i.jsx)("div",{className:"edit-icon",style:{position:"absolute",bottom:-30,right:8,backgroundColor:"rgba(0,0,0,0.5)",color:"#ffffff",borderRadius:"50%",padding:4,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transform:"translateY(0)",transition:"transform 0.3s ease-in-out"},onClick:e=>{e.stopPropagation(),eg({sectionId:t.id,productIdx:n})},children:(0,i.jsx)(eC.Z,{style:{color:"#fff",fontSize:16}})})]},n))})})})})})})})})})})}),em&&em.sectionId===t.id&&t.products[em.productIdx]&&(()=>{let e=document.querySelector("main"),n=(null==e?void 0:e.getBoundingClientRect())||void 0;return(0,i.jsx)(ImageSelector,{images:t.products[em.productIdx].images||[],selected:t.products[em.productIdx].image,open:!0,onSelect:e=>{updateProductInSection(t.id,em.productIdx,"image",e),eg(null)},onClose:()=>eg(null),anchorRect:n})})()]}):null})():(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("table",{role:"presentation",width:"100%",cellPadding:0,cellSpacing:0,border:0,align:"center",style:{margin:0,padding:0},children:(0,i.jsx)("tbody",{children:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{align:"center",style:{margin:0,padding:0},children:(0,i.jsx)("table",{role:"presentation",width:"100%",cellPadding:0,cellSpacing:0,border:0,style:{maxWidth:600,margin:"0 auto",background:"#FFFFFF",padding:(()=>{let e=getBodySectionPadding(t.id);return"".concat(e.top,"px ").concat(e.right,"px ").concat(e.bottom,"px ").concat(e.left,"px")})()},children:(0,i.jsx)("tbody",{children:(0,i.jsx)("tr",{children:(0,i.jsx)("td",{style:{padding:0},children:t.products.map((e,n)=>{let r;r="product-image-left-copy-right"===t.selectedBodyId?n%2==0?"left-image":"right-image":n%2==0?"right-image":"left-image";let l=e.descSource||"metadata",o=e.description||"";return"p"===l&&e.descriptionP?o=e.descriptionP:"ul"===l&&e.descriptionUl&&(o=e.descriptionUl),(0,i.jsx)(components_ProductTableModule,{product:{...e,description:o},index:n,orientation:r,updateProduct:(e,n,r)=>updateProductInSection(t.id,e,n,r),onActivate:()=>ef("body-".concat(t.id)),ctaBg:t9,overlayContainerRef:tK,brandName:tX,descSource:e.descSource,onChangeDescSource:e=>updateProductInSection(t.id,n,"descSource",e)},"".concat(t.id,"-").concat(n))})})})})})})})})})})]},e):null}return null}),eK&&(t5?(0,i.jsx)(x.Z,{variant:"rectangular",animation:"wave",sx:{mb:2,width:"100%",maxWidth:600,mx:"auto",height:80,borderRadius:2,boxShadow:"var(--shadow-light)",paddingTop:"".concat(null!==(ed=nc.top)&&void 0!==ed?ed:0,"px"),paddingBottom:"".concat(null!==(es=nc.bottom)&&void 0!==es?es:0,"px")}}):(0,i.jsx)("div",{"data-section":"footer",onClick:()=>ef("footer"),dangerouslySetInnerHTML:{__html:tO}}))]}):(0,i.jsx)("div",{className:"code-accordion",style:{display:"flex",flexDirection:"column",gap:"var(--gap-2)"},children:rR.map(e=>{let t=!1!==nW[e.key];return(0,i.jsxs)("div",{className:"code-section",children:[(0,i.jsxs)("div",{className:"code-section-header",onClick:()=>toggleCodeSection(e.key),style:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",padding:"0.6rem 1rem",background:"#f9fafb",borderBottom:"1px solid #e5e7eb"},children:[(0,i.jsx)("span",{children:e.title}),(0,i.jsxs)("div",{className:"code-actions",style:{display:"flex",alignItems:"center",gap:"var(--gap-2)"},children:[(0,i.jsx)(p.Z,{onClick:t=>{t.stopPropagation(),toggleCodeSection(e.key)},title:t?"Collapse section":"Expand section",children:t?(0,i.jsx)(ek.Z,{}):(0,i.jsx)(eF.Z,{})}),(0,i.jsx)(p.Z,{onClick:t=>{t.stopPropagation(),copyToClipboard(e.code),nO("Code copied!")},title:"Copy code to clipboard",children:(0,i.jsx)(eb.Z,{})})]})]}),t&&(0,i.jsx)("pre",{style:{margin:0,maxHeight:"200px",overflow:"auto",background:"#ffffff",padding:"0.5rem 1rem"},children:(0,i.jsx)("code",{dangerouslySetInnerHTML:{__html:highlight(e.code)}})})]},e.key)})})})]})}),(0,i.jsx)(f.Z,{open:nH,autoHideDuration:3e3,onClose:()=>nR(!1),message:nP,anchorOrigin:{vertical:"bottom",horizontal:"left"}})]}):(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",background:"#fafbfc"},children:[(0,i.jsxs)("form",{onSubmit:e=>{e&&e.preventDefault();let t=function(e){try{let t=new URL(e);return t.origin}catch(e){return""}}(ny);t&&(nr(t),tQ(function(e){try{let t=new URL(e),n=t.hostname.replace(/^www\./,""),r=n.split(".");return r.length>1?r[0].replace(/-/g," "):n}catch(e){return""}}(ny)),nF(!0),(async()=>{try{let e=await fetch("/api/analyze?url=".concat(encodeURIComponent(ny)));if(!e.ok)throw Error("Analyze failed: ".concat(e.status));let t=await e.json();nI(t),nB(e=>{var n,r;return{...e,selectedHero:(null===(n=t.heroImages)||void 0===n?void 0:n[0])||null,selectedBanner:(null===(r=t.bannerImages)||void 0===r?void 0:r[0])||null,selectedText:t.textColor||e.selectedText}}),t$(!0)}catch(e){console.error(e),nO("Failed to analyze page. You can continue manually.")}finally{nF(!1),nb(!1)}})())},style:{background:"#fff",padding:32,borderRadius:8,boxShadow:"0 4px 24px rgba(0,0,0,0.08)"},children:[(0,i.jsx)("h2",{style:{marginBottom:16},children:"Enter a product URL to get started"}),(0,i.jsx)("input",{type:"url",value:ny,onChange:e=>nv(e.target.value),placeholder:"https://yourstore.com/products/example",style:{width:360,padding:8,fontSize:16,borderRadius:4,border:"1px solid #ccc",marginBottom:16},required:!0}),(0,i.jsx)("div",{style:{textAlign:"right"},children:(0,i.jsx)("button",{type:"submit",style:{padding:"8px 20px",fontSize:16,borderRadius:4,background:"#d19aa0",color:"#fff",border:"none",cursor:"pointer"},children:"Continue"})})]}),(0,i.jsxs)(v.Z,{open:nC,onClose:()=>nZ(!1),maxWidth:"md",fullWidth:!0,children:[(0,i.jsx)(j.Z,{children:"Product Page Detected!"}),(0,i.jsx)(w.Z,{dividers:!0,children:nk||!nT?(0,i.jsx)(m.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",py:6},children:(0,i.jsxs)(b.Z,{spacing:1,sx:{width:"100%"},children:[(0,i.jsx)(x.Z,{variant:"text",width:240,height:28}),(0,i.jsx)(x.Z,{variant:"rectangular",height:180}),(0,i.jsx)(x.Z,{variant:"text",width:300,height:24})]})}):(0,i.jsxs)(b.Z,{spacing:3,children:[(0,i.jsxs)(c.Z,{variant:"h6",children:["Store: ",nT.storeName||"Unknown"]}),(0,i.jsxs)(m.Z,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gap:2},children:[(0,i.jsx)(m.Z,{children:(0,i.jsxs)(C.Z,{variant:"outlined",children:[nT.logo||nT.logoSvg?nT.logo?(0,i.jsx)(k.Z,{component:"img",image:nT.logo,alt:"Store logo",sx:{objectFit:"contain",maxHeight:120}}):(0,i.jsx)(m.Z,{sx:{p:2},dangerouslySetInnerHTML:{__html:nT.logoSvg}}):(0,i.jsx)(m.Z,{sx:{p:2},children:(0,i.jsx)(c.Z,{variant:"body2",children:"No logo found"})}),(0,i.jsx)(Z.Z,{children:(0,i.jsx)(T.Z,{control:(0,i.jsx)(F.Z,{checked:nE.includeLogo,onChange:(e,t)=>nB({...nE,includeLogo:t})}),label:"Include store logo"})})]})}),(0,i.jsx)(m.Z,{children:(0,i.jsx)(C.Z,{variant:"outlined",children:(0,i.jsxs)(Z.Z,{children:[(0,i.jsx)(c.Z,{variant:"subtitle1",children:"Hero Images"}),(0,i.jsx)(b.Z,{direction:"row",spacing:1,sx:{overflowX:"auto",py:1},children:(ro||[]).map(e=>(0,i.jsx)(m.Z,{sx:{border:nE.selectedHero===e?"2px solid #1976d2":"1px solid #ddd",borderRadius:1,p:.5,cursor:"pointer"},onClick:()=>nB({...nE,selectedHero:e}),children:(0,i.jsx)("img",{src:e,alt:"hero",style:{height:80,display:"block"}})},e))})]})})}),(0,i.jsx)(m.Z,{children:(0,i.jsx)(C.Z,{variant:"outlined",children:(0,i.jsxs)(Z.Z,{children:[(0,i.jsx)(c.Z,{variant:"subtitle1",children:"Banner Images"}),(0,i.jsx)(b.Z,{direction:"row",spacing:1,sx:{overflowX:"auto",py:1},children:(nT.bannerImages||[]).map(e=>(0,i.jsx)(m.Z,{sx:{border:nE.selectedBanner===e?"2px solid #1976d2":"1px solid #ddd",borderRadius:1,p:.5,cursor:"pointer"},onClick:()=>nB({...nE,selectedBanner:e}),children:(0,i.jsx)("img",{src:e,alt:"banner",style:{height:80,display:"block"}})},e))})]})})}),(0,i.jsx)(m.Z,{children:(0,i.jsx)(C.Z,{variant:"outlined",children:(0,i.jsxs)(Z.Z,{children:[(0,i.jsx)(c.Z,{variant:"subtitle1",children:"Brand Colors"}),(0,i.jsxs)(b.Z,{spacing:1,sx:{py:1},children:[(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(c.Z,{variant:"body2",sx:{mb:.5},children:"Primary color"}),(0,i.jsx)(b.Z,{direction:"row",spacing:1,children:[nT.primaryColor,...(null===(o=nT.colorCandidates)||void 0===o?void 0:o.map(e=>e.color))||[]].filter(Boolean).map(e=>(0,i.jsx)(m.Z,{sx:{width:28,height:28,borderRadius:"50%",border:nE.selectedPrimary===e?"2px solid #1976d2":"1px solid rgba(0,0,0,0.2)",background:e,cursor:"pointer"},title:e,onClick:()=>nB({...nE,selectedPrimary:e})},e))})]}),(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(c.Z,{variant:"body2",sx:{mb:.5},children:"Text color"}),(0,i.jsxs)(G.Z,{size:"small",exclusive:!0,value:nE.selectedText,onChange:(e,t)=>t&&nB({...nE,selectedText:t}),children:[(0,i.jsx)(q.Z,{value:"black",children:"Black"}),(0,i.jsx)(q.Z,{value:"white",children:"White"})]})]})]}),(0,i.jsx)(T.Z,{control:(0,i.jsx)(F.Z,{checked:nE.includeColors,onChange:(e,t)=>nB({...nE,includeColors:t})}),label:"Apply colors to CTA & accents"})]})})}),(0,i.jsx)(m.Z,{sx:{gridColumn:"1 / -1"},children:(0,i.jsx)(C.Z,{variant:"outlined",children:(0,i.jsxs)(Z.Z,{children:[(0,i.jsx)(c.Z,{variant:"subtitle1",children:"Fonts"}),(0,i.jsx)(b.Z,{spacing:.5,sx:{py:1},children:(nT.fontFamilies||[]).map(e=>(0,i.jsx)(c.Z,{variant:"body2",sx:{fontFamily:"'".concat(e,"', Montserrat, Arial, Helvetica, sans-serif")},children:e},e))}),(0,i.jsx)(T.Z,{control:(0,i.jsx)(F.Z,{checked:nE.includeFonts,onChange:(e,t)=>nB({...nE,includeFonts:t})}),label:"Apply font family"})]})})}),nT.announcementCopy&&(0,i.jsx)(m.Z,{sx:{gridColumn:"1 / -1"},children:(0,i.jsx)(C.Z,{variant:"outlined",children:(0,i.jsxs)(Z.Z,{children:[(0,i.jsx)(c.Z,{variant:"subtitle1",children:"Announcement Bar"}),(0,i.jsx)(c.Z,{variant:"body2",sx:{mb:1},children:nT.announcementCopy}),(0,i.jsx)(T.Z,{control:(0,i.jsx)(F.Z,{checked:nE.includeAnnouncement,onChange:(e,t)=>nB({...nE,includeAnnouncement:t})}),label:"Use this copy in header"})]})})}),(0,i.jsxs)(m.Z,{sx:{gridColumn:"1 / -1"},children:[(null===(d=nT.product)||void 0===d?void 0:d.images)&&nT.product.images.length>0&&(0,i.jsxs)(m.Z,{sx:{mt:2},children:[(0,i.jsx)(c.Z,{variant:"subtitle2",sx:{mb:1},children:"Choose product image"}),(0,i.jsx)(U.Z,{cols:6,gap:6,sx:{m:.5},children:uniqueImages(nT.product.images).map(e=>(0,i.jsx)(_.Z,{sx:{cursor:"pointer"},children:(0,i.jsx)("img",{src:e,alt:"product",style:{border:nT.product.image===e?"3px solid var(--color-primary)":"3px solid transparent",borderRadius:6,width:"100%",height:"100%",objectFit:"cover"},onClick:()=>nI(t=>t?{...t,product:{...t.product,image:e}}:t)})},e))})]}),(0,i.jsxs)(m.Z,{sx:{mt:2},children:[(0,i.jsx)(c.Z,{variant:"subtitle2",sx:{mb:1},children:"Choose description"}),(0,i.jsxs)(b.Z,{spacing:1,children:[(0,i.jsx)(T.Z,{control:(0,i.jsx)(F.Z,{checked:!("descChoice"in nT.product)||"metadata"===nT.product.descChoice,onChange:(e,t)=>t&&nI(e=>e?{...e,product:{...e.product,descChoice:"metadata",description:e.product.metadataDescription||e.product.description||""}}:e)}),label:"Page metadata"}),"descriptionP"in nT.product&&nT.product.descriptionP&&(0,i.jsx)(T.Z,{control:(0,i.jsx)(F.Z,{checked:"p"===nT.product.descChoice,onChange:(e,t)=>t&&nI(e=>e?{...e,product:{...e.product,descChoice:"p",description:e.product.descriptionP}}:e)}),label:"First paragraph"}),"descriptionUl"in nT.product&&nT.product.descriptionUl&&(0,i.jsx)(T.Z,{control:(0,i.jsx)(F.Z,{checked:"ul"===nT.product.descChoice,onChange:(e,t)=>t&&nI(e=>e?{...e,product:{...e.product,descChoice:"ul",description:e.product.descriptionUl}}:e)}),label:"Bullet list"})]})]}),(0,i.jsx)(C.Z,{variant:"outlined",children:(0,i.jsxs)(Z.Z,{children:[(0,i.jsx)(c.Z,{variant:"subtitle1",children:"Product"}),(0,i.jsxs)(b.Z,{direction:"row",spacing:2,alignItems:"center",children:[(null===(s=nT.product)||void 0===s?void 0:s.image)&&(0,i.jsx)("img",{src:nT.product.image,alt:nT.product.title||"",style:{width:96,height:96,objectFit:"cover",borderRadius:6}}),(0,i.jsxs)("div",{children:[(0,i.jsx)(c.Z,{variant:"subtitle1",sx:{fontWeight:600},children:null===(u=nT.product)||void 0===u?void 0:u.title}),"descChoice"in nT.product&&"ul"===nT.product.descChoice&&nT.product.descriptionUl?(0,i.jsx)(m.Z,{sx:{maxWidth:560},dangerouslySetInnerHTML:{__html:nT.product.descriptionUl}}):(0,i.jsx)(c.Z,{variant:"body2",color:"text.secondary",sx:{maxWidth:560},children:null===(g=nT.product)||void 0===g?void 0:g.description}),(0,i.jsx)(c.Z,{variant:"body2",sx:{mt:.5},children:(null===(h=nT.product)||void 0===h?void 0:h.originalPrice)?"".concat(nT.product.originalPrice,"  ").concat(nT.product.price):null===(X=nT.product)||void 0===X?void 0:X.price})]})]}),(0,i.jsx)(T.Z,{control:(0,i.jsx)(F.Z,{checked:nE.includeProduct,onChange:(e,t)=>nB({...nE,includeProduct:t})}),label:"Include this product in the EDM"})]})})]})]})]})}),(0,i.jsxs)(S.Z,{children:[(0,i.jsx)(M.Z,{onClick:()=>nZ(!1),children:"Cancel"}),(0,i.jsx)(M.Z,{variant:"contained",disabled:!nT,onClick:()=>{var e,t;if(nT){if(nE.includeColors){let e=nE.selectedPrimary||nT.primaryColor||(null===(t=nT.colorScheme)||void 0===t?void 0:t[0]);e&&t7(e),nE.selectedText&&nA(nE.selectedText)}if(nE.includeFonts&&(null===(e=nT.fontFamilies)||void 0===e?void 0:e.length)&&t8(nT.fontFamilies[0]||t3),nE.includeLogo&&nT.logo&&rM(nT.logo),nE.includeAnnouncement&&nT.announcementCopy&&nM(nT.announcementCopy),nE.selectedHero&&(nQ(nE.selectedHero),n6(nn||""),n1((null==nT?void 0:nT.storeName)||tX||"Brand")),nE.selectedBanner&&(rm(nE.selectedBanner),rf(nn||""),rh((null==nT?void 0:nT.storeName)||tX||"Brand")),nE.includeProduct&&nT.product){let e=nT.product.url;eN(t=>t.length?t:[{id:1,name:"Body 1",urls:[e],products:[nT.product],selectedBodyId:J[0].id,loading:!1,descriptionSource:"metadata"}]),eD(t=>({...t,1:[e]}))}nZ(!1)}},children:"Add to Email"})]})]})]})}}},function(e){e.O(0,[913,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);